<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.105.0">
<meta name="robots" content="index, follow">

<script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "WebSite",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/gkcalat.github.io\/kubeflow-docs"
      },
      "articleSection" : "docs",
      "name" : "Deploying Management cluster",
      "headline" : "Deploying Management cluster",
      "description" : "Setting up a management cluster on Google Cloud",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "0001",
      "datePublished": "0001-01-01 00:00:00 \u002b0000 UTC",
      "dateModified" : "0001-01-01 00:00:00 \u002b0000 UTC",
      "url" : "https:\/\/gkcalat.github.io\/kubeflow-docs\/docs\/deploy\/management-setup\/",
      "wordCount" : "1150",
      "keywords" : [ "Kubeflow on GCP" ]
  }
  </script>

<link rel="shortcut icon" href="/kubeflow-docs/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/kubeflow-docs/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/kubeflow-docs/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/kubeflow-docs/favicons/favicon-32x32.png" sizes="32x32">
<link rel="manifest" href="/kubeflow-docs/favicons/manifest.json">
<meta name="msapplication-config" content="/kubeflow-docs/favicons/browserconfig.xml" />
<meta name="msapplication-TileColor" content="#4279f4">
<meta name="theme-color" content="#4279f4">

<title>Deploying Management cluster | Kubeflow on Google Cloud Platform</title>
<meta name="description" content="Setting up a management cluster on Google Cloud">
<meta property="og:title" content="Deploying Management cluster" />
<meta property="og:description" content="Setting up a management cluster on Google Cloud" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gkcalat.github.io/kubeflow-docs/docs/deploy/management-setup/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2022-11-11T00:13:55+00:00" /><meta property="og:site_name" content="Kubeflow on Google Cloud Platform" />

<meta itemprop="name" content="Deploying Management cluster">
<meta itemprop="description" content="Setting up a management cluster on Google Cloud">
<meta itemprop="dateModified" content="2022-11-11T00:13:55+00:00" />
<meta itemprop="wordCount" content="1150">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Deploying Management cluster"/>
<meta name="twitter:description" content="Setting up a management cluster on Google Cloud"/>




<link rel="preload" href="/kubeflow-docs/scss/main.min.5006b434b14f73c3d5537a7ba4c8ecef723ddc93f3a3c8530e19d24f75486ea9.css" as="style">
<link href="/kubeflow-docs/scss/main.min.5006b434b14f73c3d5537a7ba4c8ecef723ddc93f3a3c8530e19d24f75486ea9.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-GK9XL47N6S"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-GK9XL47N6S', { 'anonymize_ip': false });
}
</script>

  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand-md navbar-dark  td-navbar">
        <a class="navbar-brand" href="/kubeflow-docs/">
		<span class="navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 276.93 274.55"><g data-name="Layer 2"><g data-name="Layer 1"><path d="M95.9 62.15l4.1 102.1 73.75-94.12a6.79 6.79.0 019.6-1.11l46 36.92-15-65.61z" fill="#4279f4"/><path fill="#0028aa" d="M102.55 182.98h65.42l-40.17-32.23-25.25 32.23z"/><path fill="#014bd1" d="M180.18 83.92l-44 56.14 46.88 37.61 44.47-55.76-47.35-37.99z"/><path fill="#bedcff" d="M83.56 52.3l.01-.01 38.69-48.52-62.39 30.05-15.41 67.51 39.1-49.03z"/><path fill="#6ca1ff" d="M45.32 122.05l41.44 51.96-3.95-98.98-37.49 47.02z"/><path fill="#a1c3ff" d="M202.31 28.73 142.65.0l-37.13 46.56 96.79-17.83z"/><path d="M1.6 272v-44.78h5.74v23.41l20.48-23.41h6.4l-17.39 19.7 19 25.07H29.1l-15.92-20.8-5.84 6.65V272zm40.02-9.79V240h5.43v22.39a4.67 4.67.0 002.35 4.19 11 11 0 0011 0 4.69 4.69.0 002.33-4.19V240h5.43v22.19a9.08 9.08.0 01-4.1 7.87 16.2 16.2.0 01-18.37.0 9.07 9.07.0 01-4.07-7.85zM77.46 272v-48h5.43v16.81a29.29 29.29.0 019.32-1.73 13.1 13.1.0 016.2 1.41 10.71 10.71.0 014.18 3.74 18.07 18.07.0 012.23 5.06 21.26 21.26.0 01.73 5.58q0 8.43-4.38 12.79T87.35 272zm5.43-4.87h4.55q6.77.0 9.72-2.95t3-9.51a14.21 14.21.0 00-2-7.52 6.55 6.55.0 00-6-3.22 24.73 24.73.0 00-9.25 1.54zm29.47-11.19q0-7.71 4.09-12.3a13.75 13.75.0 0110.8-4.59q13.35.0 13.36 18.86h-22.82a12.3 12.3.0 002.9 7.07q2.59 3.11 7.9 3.1a24.92 24.92.0 0010.55-2v5a27.74 27.74.0 01-9.86 1.87 19.83 19.83.0 01-7.7-1.37 13.31 13.31.0 01-5.28-3.76 16.21 16.21.0 01-3-5.38 20.84 20.84.0 01-.94-6.5zm5.62-2.12h17.26a14.91 14.91.0 00-2.37-7.12 6.44 6.44.0 00-5.62-2.78 8.2 8.2.0 00-6.21 2.72 12.07 12.07.0 00-3.04 7.18z" fill="#4279f4" stroke="#4279f4" stroke-miterlimit="10" stroke-width="3.2"/><path d="M147.32 244.89V240h5v-7.59a8.14 8.14.0 012.31-6.05 7.79 7.79.0 015.69-2.28h7.86V229h-5c-2.21.0-3.67.45-4.37 1.34s-1.06 2.55-1.06 5V240h8.46v4.87h-8.46V272h-5.44v-27.1zM175.26 272v-48h5.43v48zm19.15-3.95a17.86 17.86.0 1112.33 4.9 16.57 16.57.0 01-12.33-4.9zm3.84-20.65a13.16 13.16.0 000 17.2 12.07 12.07.0 0017 0 13.09 13.09.0 000-17.2 12.07 12.07.0 00-17 0zm30.2-7.4h5.75l7.3 25.32 7.43-25.32h5.36l7.34 25.34L269 240h5.74l-10.04 32h-6.12l-6.83-24.58L245 272h-6.47z" fill="#0028aa" stroke="#0028aa" stroke-miterlimit="10" stroke-width="3.2"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Kubeflow on Google Cloud Platform</span>
	</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_navbar" aria-controls="main_navbar" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse ml-md-auto" id="main_navbar">
		<ul class="navbar-nav ml-auto pt-4 pt-md-0 my-2 my-md-1">
			
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kubeflow-docs/docs/" ><span>Docs</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kubeflow-docs/news/" ><span>News</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/GoogleCloudPlatform/kubeflow-distribution" target="_blank" ><i class='fa-brands fa-github pr-2'></i><span>Manifests</span></a>
			</li>
			
			
			<li class="nav-item dropdown mt-1 mt-lg-0 mr-2">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	v1.4
</a>
<div class="dropdown-menu dropdown-menu-md-right dropdown-menu-lg-left" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/docs">v1.6 (latest)</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.5/docs">v1.5</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.4/docs">v1.4</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/dev/docs">dev</a>
	
</div>

			</li>
			
			
		</ul>
	</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-kubeflow-docsdocs-li">
  <a href="/kubeflow-docs/docs/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-kubeflow-docsdocs"><span class="">Kubeflow on Google Cloud</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-kubeflow-docsdocsdeploy-li">
  <input type="checkbox" id="m-kubeflow-docsdocsdeploy-check" checked/>
  <label for="m-kubeflow-docsdocsdeploy-check"><a href="/kubeflow-docs/docs/deploy/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-docsdocsdeploy"><span class="">Deployment</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocsdeployoverview-li">
  <input type="checkbox" id="m-kubeflow-docsdocsdeployoverview-check"/>
  <label for="m-kubeflow-docsdocsdeployoverview-check"><a href="/kubeflow-docs/docs/deploy/overview/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocsdeployoverview"><span class="">Overview</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocsdeployproject-setup-li">
  <input type="checkbox" id="m-kubeflow-docsdocsdeployproject-setup-check"/>
  <label for="m-kubeflow-docsdocsdeployproject-setup-check"><a href="/kubeflow-docs/docs/deploy/project-setup/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocsdeployproject-setup"><span class="">Setting up GCP Project</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocsdeployoauth-setup-li">
  <input type="checkbox" id="m-kubeflow-docsdocsdeployoauth-setup-check"/>
  <label for="m-kubeflow-docsdocsdeployoauth-setup-check"><a href="/kubeflow-docs/docs/deploy/oauth-setup/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocsdeployoauth-setup"><span class="">Setting up OAuth client</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-kubeflow-docsdocsdeploymanagement-setup-li">
  <input type="checkbox" id="m-kubeflow-docsdocsdeploymanagement-setup-check" checked/>
  <label for="m-kubeflow-docsdocsdeploymanagement-setup-check"><a href="/kubeflow-docs/docs/deploy/management-setup/" class="align-left pl-0  active td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocsdeploymanagement-setup"><span class="td-sidebar-nav-active-item">Deploying Management cluster</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocsdeploydeploy-cli-li">
  <input type="checkbox" id="m-kubeflow-docsdocsdeploydeploy-cli-check"/>
  <label for="m-kubeflow-docsdocsdeploydeploy-cli-check"><a href="/kubeflow-docs/docs/deploy/deploy-cli/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocsdeploydeploy-cli"><span class="">Deploying Kubeflow cluster</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocsdeployupgrade-li">
  <input type="checkbox" id="m-kubeflow-docsdocsdeployupgrade-check"/>
  <label for="m-kubeflow-docsdocsdeployupgrade-check"><a href="/kubeflow-docs/docs/deploy/upgrade/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocsdeployupgrade"><span class="">Upgrade Kubeflow</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocsdeploymonitor-iap-setup-li">
  <input type="checkbox" id="m-kubeflow-docsdocsdeploymonitor-iap-setup-check"/>
  <label for="m-kubeflow-docsdocsdeploymonitor-iap-setup-check"><a href="/kubeflow-docs/docs/deploy/monitor-iap-setup/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocsdeploymonitor-iap-setup"><span class="">Monitoring Cloud IAP Setup</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocsdeploydelete-cli-li">
  <input type="checkbox" id="m-kubeflow-docsdocsdeploydelete-cli-check"/>
  <label for="m-kubeflow-docsdocsdeploydelete-cli-check"><a href="/kubeflow-docs/docs/deploy/delete-cli/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocsdeploydelete-cli"><span class="">Deleting Kubeflow</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-docsdocspipelines-li">
  <input type="checkbox" id="m-kubeflow-docsdocspipelines-check"/>
  <label for="m-kubeflow-docsdocspipelines-check"><a href="/kubeflow-docs/docs/pipelines/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-docsdocspipelines"><span class="">Pipelines on Google Cloud</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocspipelinesauthentication-sdk-li">
  <input type="checkbox" id="m-kubeflow-docsdocspipelinesauthentication-sdk-check"/>
  <label for="m-kubeflow-docsdocspipelinesauthentication-sdk-check"><a href="/kubeflow-docs/docs/pipelines/authentication-sdk/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocspipelinesauthentication-sdk"><span class="">Connecting to Kubeflow Pipelines on Google Cloud using the SDK</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocspipelinesauthentication-pipelines-li">
  <input type="checkbox" id="m-kubeflow-docsdocspipelinesauthentication-pipelines-check"/>
  <label for="m-kubeflow-docsdocspipelinesauthentication-pipelines-check"><a href="/kubeflow-docs/docs/pipelines/authentication-pipelines/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocspipelinesauthentication-pipelines"><span class="">Authenticating Pipelines to Google Cloud</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocspipelinesupgrade-li">
  <input type="checkbox" id="m-kubeflow-docsdocspipelinesupgrade-check"/>
  <label for="m-kubeflow-docsdocspipelinesupgrade-check"><a href="/kubeflow-docs/docs/pipelines/upgrade/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocspipelinesupgrade"><span class="">Upgrading</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocspipelinesenable-gpu-and-tpu-li">
  <input type="checkbox" id="m-kubeflow-docsdocspipelinesenable-gpu-and-tpu-check"/>
  <label for="m-kubeflow-docsdocspipelinesenable-gpu-and-tpu-check"><a href="/kubeflow-docs/docs/pipelines/enable-gpu-and-tpu/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocspipelinesenable-gpu-and-tpu"><span class="">Enabling GPU and TPU</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocspipelinespreemptible-li">
  <input type="checkbox" id="m-kubeflow-docsdocspipelinespreemptible-check"/>
  <label for="m-kubeflow-docsdocspipelinespreemptible-check"><a href="/kubeflow-docs/docs/pipelines/preemptible/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocspipelinespreemptible"><span class="">Using Preemptible VMs and GPUs on Google Cloud</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocscustomizing-li">
  <input type="checkbox" id="m-kubeflow-docsdocscustomizing-check"/>
  <label for="m-kubeflow-docsdocscustomizing-check"><a href="/kubeflow-docs/docs/customizing/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocscustomizing"><span class="">Customize Kubeflow on GKE</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocscustom-domain-li">
  <input type="checkbox" id="m-kubeflow-docsdocscustom-domain-check"/>
  <label for="m-kubeflow-docsdocscustom-domain-check"><a href="/kubeflow-docs/docs/custom-domain/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocscustom-domain"><span class="">Using Your Own Domain</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocsauthentication-li">
  <input type="checkbox" id="m-kubeflow-docsdocsauthentication-check"/>
  <label for="m-kubeflow-docsdocsauthentication-check"><a href="/kubeflow-docs/docs/authentication/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocsauthentication"><span class="">Authenticating Kubeflow to Google Cloud</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocsprivate-clusters-li">
  <input type="checkbox" id="m-kubeflow-docsdocsprivate-clusters-check"/>
  <label for="m-kubeflow-docsdocsprivate-clusters-check"><a href="/kubeflow-docs/docs/private-clusters/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocsprivate-clusters"><span class="">Securing Your Clusters</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocstroubleshooting-li">
  <input type="checkbox" id="m-kubeflow-docsdocstroubleshooting-check"/>
  <label for="m-kubeflow-docsdocstroubleshooting-check"><a href="/kubeflow-docs/docs/troubleshooting/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocstroubleshooting"><span class="">Troubleshooting Deployments on GKE</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocsanthos-li">
  <input type="checkbox" id="m-kubeflow-docsdocsanthos-check"/>
  <label for="m-kubeflow-docsdocsanthos-check"><a href="/kubeflow-docs/docs/anthos/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-docsdocsanthos"><span class="">Kubeflow On-premises on Anthos</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-docsdocschangelog-li">
  <input type="checkbox" id="m-kubeflow-docsdocschangelog-check"/>
  <label for="m-kubeflow-docsdocschangelog-check"><a href="/kubeflow-docs/docs/changelog/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-docsdocschangelog"><span class="">Changelog</span></a></label>
  
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a id="print" href="https://gkcalat.github.io/kubeflow-docs/docs/deploy/_print/"><i class="fa-solid fa-print fa-fw"></i> Print entire section</a>

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#deployment-steps">Deployment steps</a>
      <ul>
        <li><a href="#install-the-required-tools">Install the required tools</a></li>
        <li><a href="#fetch-googlecloudplatformkubeflow-distribution-package">Fetch GoogleCloudPlatform/kubeflow-distribution package</a></li>
        <li><a href="#configure-environment-variables">Configure Environment Variables</a></li>
        <li><a href="#configure-kpt-setter-values">Configure kpt setter values</a></li>
        <li><a href="#prerequisite-for-config-controller">Prerequisite for Config Controller</a></li>
        <li><a href="#deploy-management-cluster">Deploy Management Cluster</a></li>
      </ul>
    </li>
    <li><a href="#understanding-the-deployment-process">Understanding the deployment process</a>
      <ul>
        <li><a href="#config-controller">Config Controller</a></li>
        <li><a href="#management-cluster-layout">Management cluster layout</a></li>
        <li><a href="#debug">Debug</a></li>
        <li><a href="#faqs">FAQs</a></li>
      </ul>
    </li>
    <li><a href="#next-steps">Next steps</a></li>
  </ul>
</nav>
      </div>
    
            

	
		
			
				
			
			



  
  

		
			
				
			
			



  
  

		
	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  
  
  
  
  <div class="pageinfo pageinfo-primary">
    <p>Version v1.4 of the
      documentation is no longer actively maintained. The site that you are
      currently viewing is an archived snapshot. 
      For up-to-date documentation, see the 
        <a href="https://gkcalat.github.io/kubeflow-docs/docs" target="_blank">latest version</a>.</p>
      
    
  </div>


            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="https://gkcalat.github.io/kubeflow-docs/docs/">Kubeflow on Google Cloud</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://gkcalat.github.io/kubeflow-docs/docs/deploy/">Deployment</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="https://gkcalat.github.io/kubeflow-docs/docs/deploy/management-setup/" aria-disabled="true" class="btn-link disabled">Deploying Management cluster</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Deploying Management cluster</h1>
	<div class="lead">Setting up a management cluster on Google Cloud</div>
	<header class="article-meta">
		

  
    
      


    
      


    
  

		
			<p class="reading-time"><i class="fa-solid fa-clock" aria-hidden="true"></i>&nbsp; 6 minute read &nbsp;</p>

		
	</header>    
	<p>This guide describes how to setup a management cluster which you will use to deploy one or more instances of Kubeflow.</p>
<p>The management cluster is used to run <a href="https://cloud.google.com/config-connector/docs/overview">Cloud Config Connector</a>. Cloud Config Connector is a Kubernetes addon that allows you to manage Google Cloud resources through Kubernetes.</p>
<p>While the management cluster can be deployed in the same project as your Kubeflow cluster, typically you will want to deploy
it in a separate project used for administering one or more Kubeflow instances, because it will run with escalated permissions to create Google Cloud resources in the managed projects.</p>
<p>Optionally, the cluster can be configured with <a href="https://cloud.google.com/anthos-config-management/docs">Anthos Config Management</a>
to manage Google Cloud infrastructure using GitOps.</p>
<h2 id="deployment-steps">Deployment steps</h2>
<h3 id="install-the-required-tools">Install the required tools</h3>
<ol>
<li>
<p><a href="https://cloud.google.com/sdk/docs/components">gcloud components</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">gcloud components install kubectl kustomize kpt anthoscli beta
</span></span><span class="line"><span class="cl">gcloud components update
</span></span><span class="line"><span class="cl"><span class="c1"># If the output said the Cloud SDK component manager is disabled for installation, copy the command from output and run it.</span>
</span></span></code></pre></div><p>You can install specific version of kubectl by following instruction (Example: <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/">Install kubectl on Linux</a>). Latest patch version of kubectl from <code>v1.17</code> to <code>v1.19</code> works well too.</p>
<p>Note: Starting from Kubeflow 1.4, it requires <code>kpt v1.0.0-beta.6</code> or above to operate in <code>GoogleCloudPlatform/kubeflow-distribution</code> repository. gcloud hasn&rsquo;t caught up with this kpt version yet, <a href="https://kpt.dev/installation/">install kpt</a> separately from <a href="https://github.com/GoogleContainerTools/kpt/tags">https://github.com/GoogleContainerTools/kpt/tags</a> for now. Note that kpt requires docker to be installed.</p>
</li>
</ol>
<h3 id="fetch-googlecloudplatformkubeflow-distribution-package">Fetch GoogleCloudPlatform/kubeflow-distribution package</h3>
<p>The management cluster manifests live in GitHub repository <a href="https://github.com/GoogleCloudPlatform/kubeflow-distribution/">GoogleCloudPlatform/kubeflow-distribution</a>, use the following commands to pull Kubeflow manifests:</p>
<ol>
<li>
<p>Clone the GitHub repository and check out the v1.6.1 tag:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git clone https://github.com/GoogleCloudPlatform/kubeflow-distribution.git 
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> kubeflow-distribution
</span></span><span class="line"><span class="cl">git checkout tags/v1.6.1 -b v1.6.1
</span></span></code></pre></div><p>Alternatively, you can get the package by using <code>kpt</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Check out Kubeflow v1.6.1 blueprints</span>
</span></span><span class="line"><span class="cl">kpt pkg get https://github.com/GoogleCloudPlatform/kubeflow-distribution.git@v1.6.1 kubeflow-distribution
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> kubeflow-distribution
</span></span></code></pre></div></li>
<li>
<p>Go to <code>kubeflow-distribution/management</code> directory for Management cluster configurations.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> management
</span></span></code></pre></div></li>
</ol>


<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Tip</h4>

    To continuously manage the management cluster, you are recommended to check
the management configuration directory into source control. For example, <code>MGMT_DIR=~/kubeflow-distribution/management/</code>.

</div>

<h3 id="configure-environment-variables">Configure Environment Variables</h3>
<p>Fill in environment variables in <code>kubeflow-distribution/management/env.sh</code> as followed:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">MGMT_PROJECT</span><span class="o">=</span>&lt;the project where you deploy your management cluster&gt;
</span></span><span class="line"><span class="cl"><span class="nv">MGMT_NAME</span><span class="o">=</span>&lt;name of your management cluster&gt;
</span></span><span class="line"><span class="cl"><span class="nv">LOCATION</span><span class="o">=</span>&lt;location of your management cluster, use either us-central1 or us-east1&gt;
</span></span></code></pre></div><p>And run:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">source</span> env.sh
</span></span></code></pre></div><p>This guide assumes the following convention:</p>
<ul>
<li>
<p>The <code>${MGMT_PROJECT}</code> environment variable contains the Google Cloud project
ID where management cluster is deployed to.</p>
</li>
<li>
<p><code>${MGMT_NAME}</code> is the cluster name of your management cluster and the prefix for other Google Cloud resources created in the deployment process. Management cluster
should be a different cluster from your Kubeflow cluster.</p>
<p>Note, <code>${MGMT_NAME}</code> should</p>
<ul>
<li>start with a lowercase letter</li>
<li>only contain lowercase letters, numbers and <code>-</code></li>
<li>end with a number or a letter</li>
<li>contain no more than 18 characters</li>
</ul>
</li>
<li>
<p>The <code>${LOCATION}</code> environment variable contains the location of your management cluster.
you can choose between regional or zonal, see <a href="https://cloud.google.com/compute/docs/regions-zones#available">Available regions and zones</a>.</p>
</li>
</ul>
<h3 id="configure-kpt-setter-values">Configure kpt setter values</h3>
<p>Use kpt to <a href="https://catalog.kpt.dev/apply-setters/v0.2/">set values</a> for the name, project, and location of your management cluster. Run the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">bash kpt-set.sh
</span></span></code></pre></div><p>Note, you can find out which setters exist in a package and what their
current values are by running the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kpt fn <span class="nb">eval</span> -i list-setters:v0.1 ./manifests
</span></span></code></pre></div><h3 id="prerequisite-for-config-controller">Prerequisite for Config Controller</h3>
<p>In order to deploy Google Cloud Services like Kubernetes resources, we need to create a management cluster with Config Controller installed. Follow <a href="https://cloud.google.com/anthos-config-management/docs/how-to/config-controller-setup#before_you_begin">Before you begin</a> to create default network if not existed. Make sure to use <code>${MGMT_PROJECT}</code> for PROJECT_ID.</p>
<h3 id="deploy-management-cluster">Deploy Management Cluster</h3>
<ol>
<li>
<p>Deploy the management cluster by applying cluster resources:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">make create-cluster
</span></span></code></pre></div></li>
<li>
<p>Create a kubectl <strong>context</strong> for the management cluster, it will be named <code>${MGMT_NAME}</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">make create-context
</span></span></code></pre></div></li>
<li>
<p>Grant permission to Config Controller service account:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">make grant-owner-permission
</span></span></code></pre></div><p>Config Controller has created a default service account, this step grants owner permission to this service account in order to
allow Config Controller to manage Google Cloud resources. Refer to <a href="https://cloud.google.com/anthos-config-management/docs/how-to/config-controller-setup#set_up">Config Controller setup</a>.</p>
</li>
</ol>
<h2 id="understanding-the-deployment-process">Understanding the deployment process</h2>
<p>This section gives you more details about the configuration and
deployment process, so that you can customize your management cluster if necessary.</p>
<h3 id="config-controller">Config Controller</h3>
<p>Management cluster is a tool for managing Google Cloud services like KRM, for example: GKE container cluster, MySQL database, etc.
And you can use one Management cluster for multiple Kubeflow clusters, across multiple Google Cloud projects.
This capability is offered by <a href="https://cloud.google.com/config-connector/docs/how-to/getting-started">Config Connector</a>.</p>
<p>Starting with Kubeflow 1.5, we leveraged the managed version of Config Connector, which is called <a href="https://cloud.google.com/anthos-config-management/docs/concepts/config-controller-overview">Config Controller</a>.
Therefore, The Management cluster is the Config Controller cluster deployed using <a href="https://cloud.google.com/anthos-config-management/docs/how-to/config-controller-setup">Config Controller setup</a> process.
Note that you can create only one Management cluster within a Google Cloud project, and you usually need just one Management cluster.</p>
<h3 id="management-cluster-layout">Management cluster layout</h3>
<p>Inside the Config Controller, we manage Google Cloud resources in namespace mode. That means one namespace is responsible to manage Google Cloud resources deployed to the Google Cloud project with the same name. Your management cluster contains following namespaces:</p>
<ol>
<li>config-control</li>
<li>namespace with the same name as your Kubeflow clusters&rsquo; Google Cloud project name</li>
</ol>
<p><code>config-control</code> is the default namespace which is installed while creating Management cluster, you have granted the default service account (like <code>service-&lt;management-project-id&gt;@gcp-sa-yakima.iam.gserviceaccount.com</code>)
within this project to manage Config Connector. It is the prerequisite for managing resources in other Google Cloud projects.</p>
<p><code>namespace with the same name as your Kubeflow clusters' Google Cloud project name</code> is the resource pool for Kubeflow cluster&rsquo;s Google Cloud project.
For each Kubeflow Google Cloud project, you will have service account with pattern <code>kcc-&lt;kf-project-name&gt;@&lt;management-project-name&gt;.iam.gserviceaccount.com</code> in <code>config-control</code> namespace, and it needs to have owner permission to <code>${KF_PROJECT}</code>, you will perform this step during <a href="/docs/deploy/deploy-cli/">Deploy Kubeflow cluster</a>. After setup, your Google Cloud resources in Kubeflow cluster project will be deployed to the namespace with name <code>${KF_PROJECT}</code> in the management cluster.</p>
<p>Your management cluster directory contains the following file:</p>
<ul>
<li><strong>Makefile</strong> is a file that defines rules to automate deployment process. You can refer to <a href="https://www.gnu.org/software/make/manual/make.html#Introduction">GNU make documentation</a> for more introduction. The Makefile we provide is designed to be user maintainable. You are encouraged to read, edit and maintain it to suit your own deployment customization needs.</li>
</ul>
<h3 id="debug">Debug</h3>
<p>If you encounter issue creating Google Cloud resources using Config Controller. You can list resources in the <code>${KF_PROJECT}</code> namespace of management cluster to learn about the detail.
Learn more with <a href="https://cloud.google.com/config-connector/docs/how-to/monitoring-your-resources">Monitoring your resources</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl --context<span class="o">=</span><span class="si">${</span><span class="nv">MGMT_NAME</span><span class="si">}</span> get all -n <span class="si">${</span><span class="nv">KF_PROJECT</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># If you want to check the service account creation status</span>
</span></span><span class="line"><span class="cl">kubectl --context<span class="o">=</span><span class="si">${</span><span class="nv">MGMT_NAME</span><span class="si">}</span> get IAMServiceAccount -n <span class="si">${</span><span class="nv">KF_PROJECT</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">kubectl --context<span class="o">=</span><span class="si">${</span><span class="nv">MGMT_NAME</span><span class="si">}</span> get IAMServiceAccount &lt;service-account-name&gt; -n <span class="si">${</span><span class="nv">KF_PROJECT</span><span class="si">}</span> -oyaml
</span></span></code></pre></div><h3 id="faqs">FAQs</h3>
<ul>
<li>
<p>Where is <code>kfctl</code>?</p>
<p><code>kfctl</code> is no longer being used to apply resources for Google Cloud, because required functionalities are now supported by generic tools including <a href="https://www.gnu.org/software/make/">Make</a>, <a href="https://kustomize.io">Kustomize</a>, <a href="https://googlecontainertools.github.io/kpt/">kpt</a>, and <a href="https://cloud.google.com/config-connector/docs/overview">Cloud Config Connector</a>.</p>
</li>
<li>
<p>Why do we use an extra management cluster to manage Google Cloud resources?</p>
<p>The management cluster is very lightweight cluster that runs <a href="https://cloud.google.com/config-connector/docs/overview">Cloud Config Connector</a>. Cloud Config Connector makes it easier to configure Google Cloud resources using YAML and Kustomize.</p>
</li>
</ul>
<p>For a more detailed explanation of the drastic changes happened in Kubeflow v1.1 on Google Cloud, read <a href="https://github.com/GoogleCloudPlatform/kubeflow-distribution/issues/123">GoogleCloudPlatform/kubeflow-distribution #123</a>.</p>
<h2 id="next-steps">Next steps</h2>
<ul>
<li><a href="/docs/deploy/deploy-cli">Deploy Kubeflow</a> using kubectl, kustomize and kpt.</li>
</ul>

	
		<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<div class="card mt-4 col-12 col-sm-6">
  <div class="card-body">
    <h3 class="card-title">Feedback</h3>
    <p class="card-text">Was this page helpful?</p>
    <button class="btn btn-primary feedback--answer feedback--answer-yes" style="width: 5rem;">Yes</button>
    <button class="btn btn-primary feedback--answer feedback--answer-no" style="width: 5rem;">No</button>
    <p class="feedback--response feedback--response-yes">
      Thank you! <a href="https://github.com/gkcalat/kubeflow-docs/issues/new">Send your feedback to us</a>.
    </p>
    <p class="feedback--response feedback--response-no">
      Sorry to hear that. Please <a href="https://github.com/gkcalat/kubeflow-docs/issues/new">tell us how we can improve</a>.
    </p>
  </div>
</div>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

		<br />
	
	
	
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark pt-3 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Kubeflow mailing list" aria-label="Kubeflow mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.kubeflow.org/docs/about/community/#kubeflow-mailing-list" aria-label="Kubeflow mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.kubeflow.org/docs/about/community/#kubeflow-slack" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://twitter.com/kubeflow" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" rel="noopener" href="https://stackoverflow.com/questions/tagged/kubeflow" aria-label="Stack Overflow">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2022 Kubeflow on GCP authors | Documentation Distributed under CC BY 4.0</small>
        <p><small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></small></p>
	
		
	
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/GoogleCloudPlatform/kubeflow-distribution" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Kubeflow community calendar" aria-label="Kubeflow community calendar">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.kubeflow.org/docs/about/community/#kubeflow-community-calendars" aria-label="Kubeflow community calendar">
      <i class="fa fa-calendar"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="/kubeflow-docs/js/main.min.301c0110334bec1b4445867d27dc7dd69b2df859154ccf252005508bc860cc5a.js" integrity="sha256-MBwBEDNL7BtERYZ9J9x91pst&#43;FkVTM8lIAVQi8hgzFo=" crossorigin="anonymous"></script>
<script src='/kubeflow-docs/js/tabpane-persist.js'></script>

  </body>
</html>