<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.105.0">
<meta name="robots" content="index, follow">

<script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "WebSite",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/googlecloudplatform.github.io\/kubeflow-gke-docs\/v1.4"
      },
      "articleSection" : "docs",
      "name" : "Monitoring Cloud IAP Setup",
      "headline" : "Monitoring Cloud IAP Setup",
      "description" : "Instructions for monitoring and troubleshooting Cloud IAP",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "0001",
      "datePublished": "0001-01-01 00:00:00 \u002b0000 UTC",
      "dateModified" : "0001-01-01 00:00:00 \u002b0000 UTC",
      "url" : "https:\/\/googlecloudplatform.github.io\/kubeflow-gke-docs\/v1.4\/docs\/deploy\/monitor-iap-setup\/",
      "wordCount" : "751",
      "keywords" : [ "Kubeflow on GCP" ]
  }
  </script>

<link rel="shortcut icon" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/favicons/favicon-32x32.png" sizes="32x32">
<link rel="manifest" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/favicons/manifest.json">
<meta name="msapplication-config" content="/favicons/browserconfig.xml" />
<meta name="msapplication-TileColor" content="#4279f4">
<meta name="theme-color" content="#4279f4">

<title>Monitoring Cloud IAP Setup | Kubeflow on Google Cloud Platform</title>
<meta name="description" content="Instructions for monitoring and troubleshooting Cloud IAP">
<meta property="og:title" content="Monitoring Cloud IAP Setup" />
<meta property="og:description" content="Instructions for monitoring and troubleshooting Cloud IAP" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/deploy/monitor-iap-setup/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2023-01-03T18:58:56+00:00" /><meta property="og:site_name" content="Kubeflow on Google Cloud Platform" />

<meta itemprop="name" content="Monitoring Cloud IAP Setup">
<meta itemprop="description" content="Instructions for monitoring and troubleshooting Cloud IAP">
<meta itemprop="dateModified" content="2023-01-03T18:58:56+00:00" />
<meta itemprop="wordCount" content="751">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Monitoring Cloud IAP Setup"/>
<meta name="twitter:description" content="Instructions for monitoring and troubleshooting Cloud IAP"/>




<link rel="preload" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/scss/main.min.5006b434b14f73c3d5537a7ba4c8ecef723ddc93f3a3c8530e19d24f75486ea9.css" as="style">
<link href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/scss/main.min.5006b434b14f73c3d5537a7ba4c8ecef723ddc93f3a3c8530e19d24f75486ea9.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/css/prism.css"/>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-GK9XL47N6S"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-GK9XL47N6S', { 'anonymize_ip': false });
}
</script>

  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand-md navbar-dark  td-navbar">
        <a class="navbar-brand" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/">
		<span class="navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 276.93 274.55"><g data-name="Layer 2"><g data-name="Layer 1"><path d="M95.9 62.15l4.1 102.1 73.75-94.12a6.79 6.79.0 019.6-1.11l46 36.92-15-65.61z" fill="#4279f4"/><path fill="#0028aa" d="M102.55 182.98h65.42l-40.17-32.23-25.25 32.23z"/><path fill="#014bd1" d="M180.18 83.92l-44 56.14 46.88 37.61 44.47-55.76-47.35-37.99z"/><path fill="#bedcff" d="M83.56 52.3l.01-.01 38.69-48.52-62.39 30.05-15.41 67.51 39.1-49.03z"/><path fill="#6ca1ff" d="M45.32 122.05l41.44 51.96-3.95-98.98-37.49 47.02z"/><path fill="#a1c3ff" d="M202.31 28.73 142.65.0l-37.13 46.56 96.79-17.83z"/><path d="M1.6 272v-44.78h5.74v23.41l20.48-23.41h6.4l-17.39 19.7 19 25.07H29.1l-15.92-20.8-5.84 6.65V272zm40.02-9.79V240h5.43v22.39a4.67 4.67.0 002.35 4.19 11 11 0 0011 0 4.69 4.69.0 002.33-4.19V240h5.43v22.19a9.08 9.08.0 01-4.1 7.87 16.2 16.2.0 01-18.37.0 9.07 9.07.0 01-4.07-7.85zM77.46 272v-48h5.43v16.81a29.29 29.29.0 019.32-1.73 13.1 13.1.0 016.2 1.41 10.71 10.71.0 014.18 3.74 18.07 18.07.0 012.23 5.06 21.26 21.26.0 01.73 5.58q0 8.43-4.38 12.79T87.35 272zm5.43-4.87h4.55q6.77.0 9.72-2.95t3-9.51a14.21 14.21.0 00-2-7.52 6.55 6.55.0 00-6-3.22 24.73 24.73.0 00-9.25 1.54zm29.47-11.19q0-7.71 4.09-12.3a13.75 13.75.0 0110.8-4.59q13.35.0 13.36 18.86h-22.82a12.3 12.3.0 002.9 7.07q2.59 3.11 7.9 3.1a24.92 24.92.0 0010.55-2v5a27.74 27.74.0 01-9.86 1.87 19.83 19.83.0 01-7.7-1.37 13.31 13.31.0 01-5.28-3.76 16.21 16.21.0 01-3-5.38 20.84 20.84.0 01-.94-6.5zm5.62-2.12h17.26a14.91 14.91.0 00-2.37-7.12 6.44 6.44.0 00-5.62-2.78 8.2 8.2.0 00-6.21 2.72 12.07 12.07.0 00-3.04 7.18z" fill="#4279f4" stroke="#4279f4" stroke-miterlimit="10" stroke-width="3.2"/><path d="M147.32 244.89V240h5v-7.59a8.14 8.14.0 012.31-6.05 7.79 7.79.0 015.69-2.28h7.86V229h-5c-2.21.0-3.67.45-4.37 1.34s-1.06 2.55-1.06 5V240h8.46v4.87h-8.46V272h-5.44v-27.1zM175.26 272v-48h5.43v48zm19.15-3.95a17.86 17.86.0 1112.33 4.9 16.57 16.57.0 01-12.33-4.9zm3.84-20.65a13.16 13.16.0 000 17.2 12.07 12.07.0 0017 0 13.09 13.09.0 000-17.2 12.07 12.07.0 00-17 0zm30.2-7.4h5.75l7.3 25.32 7.43-25.32h5.36l7.34 25.34L269 240h5.74l-10.04 32h-6.12l-6.83-24.58L245 272h-6.47z" fill="#0028aa" stroke="#0028aa" stroke-miterlimit="10" stroke-width="3.2"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Kubeflow on Google Cloud Platform</span>
	</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_navbar" aria-controls="main_navbar" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse ml-md-auto" id="main_navbar">
		<ul class="navbar-nav ml-auto pt-4 pt-md-0 my-2 my-md-1">
			
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/" ><span>Docs</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/googlecloudplatform/kubeflow-distribution" target="_blank" ><i class='fa-brands fa-github pr-2'></i><span>Manifests</span></a>
			</li>
			
			
			<li class="nav-item dropdown mt-1 mt-lg-0 mr-2">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	v1.4
</a>
<div class="dropdown-menu dropdown-menu-md-right dropdown-menu-lg-left" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/docs">v1.7 (latest)</a>
	
	<a class="dropdown-item" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.6/docs">v1.6</a>
	
	<a class="dropdown-item" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.5/docs">v1.5</a>
	
	<a class="dropdown-item" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs">v1.4</a>
	
	<a class="dropdown-item" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/dev/docs">dev</a>
	
</div>

			</li>
			
			
		</ul>
	</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search">
  <div class="td-search__icon"></div>
  <input type="search" class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete="off">
</div>

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Kubeflow on Google Cloud</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docsdeploy-li">
  <input type="checkbox" id="m-docsdeploy-check" checked/>
  <label for="m-docsdeploy-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/deploy/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsdeploy"><span class="">Deployment</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdeployoverview-li">
  <input type="checkbox" id="m-docsdeployoverview-check"/>
  <label for="m-docsdeployoverview-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/deploy/overview/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdeployoverview"><span class="">Overview</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdeployproject-setup-li">
  <input type="checkbox" id="m-docsdeployproject-setup-check"/>
  <label for="m-docsdeployproject-setup-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/deploy/project-setup/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdeployproject-setup"><span class="">Setting up GCP Project</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdeployoauth-setup-li">
  <input type="checkbox" id="m-docsdeployoauth-setup-check"/>
  <label for="m-docsdeployoauth-setup-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/deploy/oauth-setup/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdeployoauth-setup"><span class="">Setting up OAuth client</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdeploymanagement-setup-li">
  <input type="checkbox" id="m-docsdeploymanagement-setup-check"/>
  <label for="m-docsdeploymanagement-setup-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/deploy/management-setup/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdeploymanagement-setup"><span class="">Deploying Management cluster</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdeploydeploy-cli-li">
  <input type="checkbox" id="m-docsdeploydeploy-cli-check"/>
  <label for="m-docsdeploydeploy-cli-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/deploy/deploy-cli/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdeploydeploy-cli"><span class="">Deploying Kubeflow cluster</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdeployupgrade-li">
  <input type="checkbox" id="m-docsdeployupgrade-check"/>
  <label for="m-docsdeployupgrade-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/deploy/upgrade/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdeployupgrade"><span class="">Upgrade Kubeflow</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docsdeploymonitor-iap-setup-li">
  <input type="checkbox" id="m-docsdeploymonitor-iap-setup-check" checked/>
  <label for="m-docsdeploymonitor-iap-setup-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/deploy/monitor-iap-setup/" class="align-left pl-0  active td-sidebar-link td-sidebar-link__page" id="m-docsdeploymonitor-iap-setup"><span class="td-sidebar-nav-active-item">Monitoring Cloud IAP Setup</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdeploydelete-cli-li">
  <input type="checkbox" id="m-docsdeploydelete-cli-check"/>
  <label for="m-docsdeploydelete-cli-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/deploy/delete-cli/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdeploydelete-cli"><span class="">Deleting Kubeflow</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docspipelines-li">
  <input type="checkbox" id="m-docspipelines-check"/>
  <label for="m-docspipelines-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/pipelines/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docspipelines"><span class="">Pipelines on Google Cloud</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspipelinesauthentication-sdk-li">
  <input type="checkbox" id="m-docspipelinesauthentication-sdk-check"/>
  <label for="m-docspipelinesauthentication-sdk-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/pipelines/authentication-sdk/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docspipelinesauthentication-sdk"><span class="">Connecting to Kubeflow Pipelines on Google Cloud using the SDK</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspipelinesauthentication-pipelines-li">
  <input type="checkbox" id="m-docspipelinesauthentication-pipelines-check"/>
  <label for="m-docspipelinesauthentication-pipelines-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/pipelines/authentication-pipelines/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docspipelinesauthentication-pipelines"><span class="">Authenticating Pipelines to Google Cloud</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspipelinesupgrade-li">
  <input type="checkbox" id="m-docspipelinesupgrade-check"/>
  <label for="m-docspipelinesupgrade-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/pipelines/upgrade/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docspipelinesupgrade"><span class="">Upgrading</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspipelinesenable-gpu-and-tpu-li">
  <input type="checkbox" id="m-docspipelinesenable-gpu-and-tpu-check"/>
  <label for="m-docspipelinesenable-gpu-and-tpu-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/pipelines/enable-gpu-and-tpu/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docspipelinesenable-gpu-and-tpu"><span class="">Enabling GPU and TPU</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspipelinespreemptible-li">
  <input type="checkbox" id="m-docspipelinespreemptible-check"/>
  <label for="m-docspipelinespreemptible-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/pipelines/preemptible/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docspipelinespreemptible"><span class="">Using Preemptible VMs and GPUs on Google Cloud</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscustomizing-li">
  <input type="checkbox" id="m-docscustomizing-check"/>
  <label for="m-docscustomizing-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/customizing/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docscustomizing"><span class="">Customize Kubeflow on Google Cloud</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscustom-domain-li">
  <input type="checkbox" id="m-docscustom-domain-check"/>
  <label for="m-docscustom-domain-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/custom-domain/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docscustom-domain"><span class="">Using Your Own Domain</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsauthentication-li">
  <input type="checkbox" id="m-docsauthentication-check"/>
  <label for="m-docsauthentication-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/authentication/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsauthentication"><span class="">Authenticating Kubeflow to Google Cloud</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsprivate-clusters-li">
  <input type="checkbox" id="m-docsprivate-clusters-check"/>
  <label for="m-docsprivate-clusters-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/private-clusters/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsprivate-clusters"><span class="">Securing Your Clusters</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstroubleshooting-li">
  <input type="checkbox" id="m-docstroubleshooting-check"/>
  <label for="m-docstroubleshooting-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/troubleshooting/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docstroubleshooting"><span class="">Troubleshooting Deployments on Google Cloud</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsanthos-li">
  <input type="checkbox" id="m-docsanthos-check"/>
  <label for="m-docsanthos-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/anthos/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsanthos"><span class="">Kubeflow On-premises on Anthos</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docschangelog-li">
  <input type="checkbox" id="m-docschangelog-check"/>
  <label for="m-docschangelog-check"><a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/changelog/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docschangelog"><span class="">Changelog</span></a></label>
  
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href="https://github.com/googlecloudplatform/kubeflow-gke-docs/tree/v1.4-release/content/en/docs/deploy/monitor-iap-setup.md" class="td-page-meta--view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/googlecloudplatform/kubeflow-gke-docs/edit/v1.4-release/content/en/docs/deploy/monitor-iap-setup.md" class="td-page-meta--edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/googlecloudplatform/kubeflow-gke-docs/new/v1.4-release/content/en/docs/deploy/monitor-iap-setup.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/googlecloudplatform/kubeflow-gke-docs/issues/new?title=Monitoring%20Cloud%20IAP%20Setup" class="td-page-meta--issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/googlecloudplatform/kubeflow-distribution/issues/new" class="td-page-meta--project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
  <a id="print" href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/deploy/_print/"><i class="fa-solid fa-print fa-fw"></i> Print entire section</a>

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#monitoring-your-cloud-iap-setup">Monitoring your Cloud IAP setup</a></li>
    <li><a href="#next-steps">Next steps</a></li>
  </ul>
</nav>
      </div>
    
            

	
		
			
				
			
			



  
  

		
			
				
			
			



  
  

		
	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  
  
  
  
  <div class="pageinfo pageinfo-primary">
    <p>Version v1.4 of the
      documentation is no longer actively maintained. The site that you are
      currently viewing is an archived snapshot. 
      For up-to-date documentation, see the 
        <a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/docs" target="_blank">latest version</a>.</p>
      
    
  </div>


            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/">Kubeflow on Google Cloud</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/deploy/">Deployment</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/docs/deploy/monitor-iap-setup/" aria-disabled="true" class="btn-link disabled">Monitoring Cloud IAP Setup</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Monitoring Cloud IAP Setup</h1>
	<div class="lead">Instructions for monitoring and troubleshooting Cloud IAP</div>
	<header class="article-meta">
		

  
    
      


    
      


    
  

		
			<p class="reading-time"><i class="fa-solid fa-clock" aria-hidden="true"></i>&nbsp; 4 minute read &nbsp;</p>

		
	</header>    
	<p><a href="https://cloud.google.com/iap/docs/">Cloud Identity-Aware Proxy (Cloud IAP)</a> is
the recommended solution for accessing your Kubeflow
deployment from outside the cluster, when running Kubeflow on Google Cloud.</p>
<p>This document is a step-by-step guide to ensuring that your IAP-secured endpoint
is available, and to debugging problems that may cause the endpoint to be
unavailable.</p>
<h2 id="introduction">Introduction</h2>
<p>When deploying Kubeflow using the <a href="../deploy-cli/">command-line interface</a>,
you choose the authentication method you want to use. One of the options is
Cloud IAP. This document assumes that you have already deployed Kubeflow.</p>
<p>Kubeflow uses the <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/managed-certs">Google-managed certificate</a>
to provide an SSL certificate for the Kubeflow Ingress.</p>
<p>Cloud IAP gives you the following benefits:</p>
<ul>
<li>Users can log in in using their Google Cloud accounts.</li>
<li>You benefit from Google&rsquo;s security expertise to protect your sensitive
workloads.</li>
</ul>
<h2 id="monitoring-your-cloud-iap-setup">Monitoring your Cloud IAP setup</h2>
<p>Follow these instructions to monitor your Cloud IAP setup and troubleshoot any
problems:</p>
<ol>
<li>
<p>Examine the
<a href="https://kubernetes.io/docs/concepts/services-networking/ingress/">Ingress</a>
and Google Cloud Build (GCB) load balancer to make sure it is available:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl -n istio-system describe ingress
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Name:             envoy-ingress
</span></span><span class="line"><span class="cl">Namespace:        kubeflow
</span></span><span class="line"><span class="cl">Address:          35.244.132.160
</span></span><span class="line"><span class="cl">Default backend:  default-http-backend:80 (10.20.0.10:8080)
</span></span><span class="line"><span class="cl">Annotations:
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">Events:
</span></span><span class="line"><span class="cl">   Type     Reason     Age                 From                     Message
</span></span><span class="line"><span class="cl">   ----     ------     ----                ----                     -------
</span></span><span class="line"><span class="cl">   Normal   ADD        12m                 loadbalancer-controller  kubeflow/envoy-ingress
</span></span><span class="line"><span class="cl">   Warning  Translate  12m (x10 over 12m)  loadbalancer-controller  error while evaluating the ingress spec: could not find service &#34;kubeflow/envoy&#34;
</span></span><span class="line"><span class="cl">   Warning  Translate  12m (x2 over 12m)   loadbalancer-controller  error while evaluating the ingress spec: error getting BackendConfig for port &#34;8080&#34; on service &#34;kubeflow/envoy&#34;, err: no BackendConfig for service port exists.
</span></span><span class="line"><span class="cl">   Warning  Sync       12m                 loadbalancer-controller  Error during sync: Error running backend syncing routine: received errors when updating backend service: googleapi: Error 400: The resource &#39;projects/code-search-demo/global/backendServices/k8s-be-32230--bee2fc38fcd6383f&#39; is not ready, resourceNotReady
</span></span><span class="line"><span class="cl"> googleapi: Error 400: The resource &#39;projects/code-search-demo/global/backendServices/k8s-be-32230--bee2fc38fcd6383f&#39; is not ready, resourceNotReady
</span></span><span class="line"><span class="cl">   Normal  CREATE  11m  loadbalancer-controller  ip: 35.244.132.160
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div><p>There should be an annotation indicating that we are using managed certificate:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">annotation:
</span></span><span class="line"><span class="cl">  networking.gke.io/managed-certificates: gke-certificate
</span></span></code></pre></div><p>Any problems with creating the load balancer are reported as Kubernetes
events in the results of the above <code>describe</code> command.</p>
<ul>
<li>
<p>If the address isn&rsquo;t set then there was a problem creating the load
balancer.</p>
</li>
<li>
<p>The <code>CREATE</code> event indicates the load balancer was successfully
created on the specified IP address.</p>
</li>
<li>
<p>The most common error is running out of Google Cloud resource quota. To fix this problem,
you must either increase the quota for the relevant resource on your Google Cloud
project or delete some existing resources.</p>
</li>
</ul>
</li>
<li>
<p>Verify that a managed certificate resource is generated:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl describe -n istio-system managedcertificate gke-certificate
</span></span></code></pre></div><p>The status field should have information about the current status of the Certificate.
Eventually, certificate status should be <code>Active</code>.</p>
</li>
<li>
<p>Wait for the load balancer to report the back ends as healthy:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl describe -n istio-system ingress envoy-ingress
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">Annotations:
</span></span><span class="line"><span class="cl"> kubernetes.io/ingress.global-static-ip-name:  kubeflow-ip
</span></span><span class="line"><span class="cl"> kubernetes.io/tls-acme:                       true
</span></span><span class="line"><span class="cl"> certmanager.k8s.io/issuer:                    letsencrypt-prod
</span></span><span class="line"><span class="cl"> ingress.kubernetes.io/backends:               {&#34;k8s-be-31380--5e1566252944dfdb&#34;:&#34;HEALTHY&#34;,&#34;k8s-be-32133--5e1566252944dfdb&#34;:&#34;HEALTHY&#34;}
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div><p>Both backends should be reported as healthy.
It can take several minutes for the load balancer to consider the back ends
healthy.</p>
<p>The service with port <code>31380</code> is the one that handles Kubeflow
traffic. (31380 is the default port of the service <code>istio-ingressgateway</code>.)</p>
<p>If the backend is unhealthy, check the pods in <code>istio-system</code>:</p>
<ul>
<li><code>kubectl get pods -n istio-system</code></li>
<li>The <code>istio-ingressgateway-XX</code> pods should be running</li>
<li>Check the logs of pod <code>backend-updater-0</code>, <code>iap-enabler-XX</code> to see if there is any error</li>
<li>Follow the steps <a href="../../troubleshooting/#502-server-error">here</a> to check the load balancer and backend service on Google Cloud.</li>
</ul>
</li>
<li>
<p>Try accessing Cloud IAP at the fully qualified domain name in your web
browser:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">https://&lt;your-fully-qualified-domain-name&gt;     
</span></span></code></pre></div><p>If you get SSL errors when you log in, this typically means that your SSL
certificate is still propagating. Wait a few minutes and try again. SSL
propagation can take up to 10 minutes.</p>
<p>If you do not see a login prompt and you get a 404 error, the configuration
of Cloud IAP is not yet complete. Keep retrying for up to 10 minutes.</p>
</li>
<li>
<p>If you get an error <code>Error: redirect_uri_mismatch</code> after logging in, this means the list of OAuth authorized redirect URIs does not include your domain.</p>
<p>The full error message looks like the following example and includes the 
relevant links:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">The redirect URI in the request, https://&lt;my_kubeflow&gt;.endpoints.&lt;my_project&gt;.cloud.goog/_gcp_gatekeeper/authenticate, does not match the ones authorized for the OAuth client. 	
</span></span><span class="line"><span class="cl">To update the authorized redirect URIs, visit: https://console.developers.google.com/apis/credentials/oauthclient/22222222222-7meeee7a9a76jvg54j0g2lv8lrsb4l8g.apps.googleusercontent.com?project=22222222222	
</span></span></code></pre></div><p>Follow the link in the error message to find the OAuth credential being used
and add the redirect URI listed in the error message to the list of 
authorized URIs. For more information, read the guide to 
<a href="../oauth-setup/">setting up OAuth for Cloud IAP</a>.</p>
</li>
</ol>
<h2 id="next-steps">Next steps</h2>
<ul>
<li>The <a href="../../troubleshooting/">Google Kubernetes Engine troubleshooting guide</a> for Kubeflow.</li>
<li>How to <a href="../../customizing/">customize Kubeflow cluster</a> and <a href="../../customizing/#add-users-to-kubeflow">add users to the cluster</a>.</li>
<li>Google Cloud guide to <a href="https://cloud.google.com/iap/docs/">Cloud IAP</a>.</li>
</ul>

	
		<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<div class="card mt-4 col-12 col-sm-6">
  <div class="card-body">
    <h3 class="card-title">Feedback</h3>
    <p class="card-text">Was this page helpful?</p>
    <button class="btn btn-primary feedback--answer feedback--answer-yes" style="width: 5rem;">Yes</button>
    <button class="btn btn-primary feedback--answer feedback--answer-no" style="width: 5rem;">No</button>
    <p class="feedback--response feedback--response-yes">
      Thank you! <a href="https://github.com/googlecloudplatform/kubeflow-gke-docs/issues/new">Send your feedback to us</a>.
    </p>
    <p class="feedback--response feedback--response-no">
      Sorry to hear that. Please <a href="https://github.com/googlecloudplatform/kubeflow-gke-docs/issues/new">tell us how we can improve</a>.
    </p>
  </div>
</div>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

		<br />
	
	
	<div class="text-muted mt-5 pt-3 border-top">
  Last modified January 3, 2023: <a href="https://github.com/googlecloudplatform/kubeflow-gke-docs/commit/088cbaddcc226dae05b6e4bb78635ca89505ca8b">Fix hyper-links (088cbad)</a>
</div>

</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark pt-3 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Kubeflow mailing list" aria-label="Kubeflow mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.kubeflow.org/docs/about/community/#kubeflow-mailing-list" aria-label="Kubeflow mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.kubeflow.org/docs/about/community/#kubeflow-slack" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://twitter.com/kubeflow" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" rel="noopener" href="https://stackoverflow.com/questions/tagged/kubeflow" aria-label="Stack Overflow">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2023 The Kubeflow Authors. | Documentation Distributed under CC BY 4.0</small>
        <p><small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></small></p>
	
		
	
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/googlecloudplatform/kubeflow-distribution" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Kubeflow community calendar" aria-label="Kubeflow community calendar">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.kubeflow.org/docs/about/community/#kubeflow-community-calendars" aria-label="Kubeflow community calendar">
      <i class="fa fa-calendar"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/js/main.min.8660119eabd7f70cc26066bd335638838718a8c13b2b2c9f9f4748ee6b89b32f.js" integrity="sha256-hmARnqvX9wzCYGa9M1Y4g4cYqME7Kyyfn0dI7muJsy8=" crossorigin="anonymous"></script>
<script src='https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/js/prism.js'></script>
<script src='https://googlecloudplatform.github.io/kubeflow-gke-docs/v1.4/js/tabpane-persist.js'></script>

  </body>
</html>