<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.105.0">
<link rel="canonical" type="text/html" href="https://gkcalat.github.io/kubeflow-docs/docs/components/pipelines/v1/installation/">
<link rel="alternate" type="application/rss&#43;xml" href="https://gkcalat.github.io/kubeflow-docs/docs/components/pipelines/v1/installation/index.xml">
<meta name="robots" content="noindex, nofollow">

<script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "WebSite",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/gkcalat.github.io\/kubeflow-docs"
      },
      "articleSection" : "docs",
      "name" : "Installation",
      "headline" : "Installation",
      "description" : "Options for installing Kubeflow Pipelines",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "0001",
      "datePublished": "0001-01-01 00:00:00 \u002b0000 UTC",
      "dateModified" : "0001-01-01 00:00:00 \u002b0000 UTC",
      "url" : "https:\/\/gkcalat.github.io\/kubeflow-docs\/docs\/components\/pipelines\/v1\/installation\/",
      "wordCount" : "0",
      "keywords" : [ "Kubeflow" ]
  }
  </script>

<link rel="shortcut icon" href="/kubeflow-docs/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/kubeflow-docs/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/kubeflow-docs/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/kubeflow-docs/favicons/favicon-32x32.png" sizes="32x32">
<link rel="manifest" href="/kubeflow-docs/favicons/manifest.json">
<meta name="msapplication-config" content="/kubeflow-docs/favicons/browserconfig.xml" />
<meta name="msapplication-TileColor" content="#4279f4">
<meta name="theme-color" content="#4279f4">

<title>Installation | Kubeflow on Google Cloud Platform</title>
<meta name="description" content="Options for installing Kubeflow Pipelines">
<meta property="og:title" content="Installation" />
<meta property="og:description" content="Options for installing Kubeflow Pipelines" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://gkcalat.github.io/kubeflow-docs/docs/components/pipelines/v1/installation/" /><meta property="og:site_name" content="Kubeflow on Google Cloud Platform" />

<meta itemprop="name" content="Installation">
<meta itemprop="description" content="Options for installing Kubeflow Pipelines"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Installation"/>
<meta name="twitter:description" content="Options for installing Kubeflow Pipelines"/>




<link rel="preload" href="/kubeflow-docs/scss/main.min.5006b434b14f73c3d5537a7ba4c8ecef723ddc93f3a3c8530e19d24f75486ea9.css" as="style">
<link href="/kubeflow-docs/scss/main.min.5006b434b14f73c3d5537a7ba4c8ecef723ddc93f3a3c8530e19d24f75486ea9.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-GK9XL47N6S"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-GK9XL47N6S', { 'anonymize_ip': false });
}
</script>

  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand-md navbar-dark  td-navbar">
        <a class="navbar-brand" href="/kubeflow-docs/">
		<span class="navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 276.93 274.55"><g data-name="Layer 2"><g data-name="Layer 1"><path d="M95.9 62.15l4.1 102.1 73.75-94.12a6.79 6.79.0 019.6-1.11l46 36.92-15-65.61z" fill="#4279f4"/><path fill="#0028aa" d="M102.55 182.98h65.42l-40.17-32.23-25.25 32.23z"/><path fill="#014bd1" d="M180.18 83.92l-44 56.14 46.88 37.61 44.47-55.76-47.35-37.99z"/><path fill="#bedcff" d="M83.56 52.3l.01-.01 38.69-48.52-62.39 30.05-15.41 67.51 39.1-49.03z"/><path fill="#6ca1ff" d="M45.32 122.05l41.44 51.96-3.95-98.98-37.49 47.02z"/><path fill="#a1c3ff" d="M202.31 28.73 142.65.0l-37.13 46.56 96.79-17.83z"/><path d="M1.6 272v-44.78h5.74v23.41l20.48-23.41h6.4l-17.39 19.7 19 25.07H29.1l-15.92-20.8-5.84 6.65V272zm40.02-9.79V240h5.43v22.39a4.67 4.67.0 002.35 4.19 11 11 0 0011 0 4.69 4.69.0 002.33-4.19V240h5.43v22.19a9.08 9.08.0 01-4.1 7.87 16.2 16.2.0 01-18.37.0 9.07 9.07.0 01-4.07-7.85zM77.46 272v-48h5.43v16.81a29.29 29.29.0 019.32-1.73 13.1 13.1.0 016.2 1.41 10.71 10.71.0 014.18 3.74 18.07 18.07.0 012.23 5.06 21.26 21.26.0 01.73 5.58q0 8.43-4.38 12.79T87.35 272zm5.43-4.87h4.55q6.77.0 9.72-2.95t3-9.51a14.21 14.21.0 00-2-7.52 6.55 6.55.0 00-6-3.22 24.73 24.73.0 00-9.25 1.54zm29.47-11.19q0-7.71 4.09-12.3a13.75 13.75.0 0110.8-4.59q13.35.0 13.36 18.86h-22.82a12.3 12.3.0 002.9 7.07q2.59 3.11 7.9 3.1a24.92 24.92.0 0010.55-2v5a27.74 27.74.0 01-9.86 1.87 19.83 19.83.0 01-7.7-1.37 13.31 13.31.0 01-5.28-3.76 16.21 16.21.0 01-3-5.38 20.84 20.84.0 01-.94-6.5zm5.62-2.12h17.26a14.91 14.91.0 00-2.37-7.12 6.44 6.44.0 00-5.62-2.78 8.2 8.2.0 00-6.21 2.72 12.07 12.07.0 00-3.04 7.18z" fill="#4279f4" stroke="#4279f4" stroke-miterlimit="10" stroke-width="3.2"/><path d="M147.32 244.89V240h5v-7.59a8.14 8.14.0 012.31-6.05 7.79 7.79.0 015.69-2.28h7.86V229h-5c-2.21.0-3.67.45-4.37 1.34s-1.06 2.55-1.06 5V240h8.46v4.87h-8.46V272h-5.44v-27.1zM175.26 272v-48h5.43v48zm19.15-3.95a17.86 17.86.0 1112.33 4.9 16.57 16.57.0 01-12.33-4.9zm3.84-20.65a13.16 13.16.0 000 17.2 12.07 12.07.0 0017 0 13.09 13.09.0 000-17.2 12.07 12.07.0 00-17 0zm30.2-7.4h5.75l7.3 25.32 7.43-25.32h5.36l7.34 25.34L269 240h5.74l-10.04 32h-6.12l-6.83-24.58L245 272h-6.47z" fill="#0028aa" stroke="#0028aa" stroke-miterlimit="10" stroke-width="3.2"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Kubeflow on Google Cloud Platform</span>
	</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_navbar" aria-controls="main_navbar" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse ml-md-auto" id="main_navbar">
		<ul class="navbar-nav ml-auto pt-4 pt-md-0 my-2 my-md-1">
			
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kubeflow-docs/docs/" ><span>Docs</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kubeflow-docs/news/" ><span>News</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/GoogleCloudPlatform/kubeflow-distribution" target="_blank" ><i class='fa-brands fa-github pr-2'></i><span>Source</span></a>
			</li>
			
			
			<li class="nav-item dropdown mt-1 mt-lg-0 mr-2">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Releases
</a>
<div class="dropdown-menu dropdown-menu-md-right dropdown-menu-lg-left" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.6-release/docs">latest</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.6-release/docs">v1.6</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.5-release/docs">v1.5</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.4-release/docs">v1.4</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/main/docs">dev</a>
	
</div>

			</li>
			
			
		</ul>
	</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/kubeflow-docs/docs/components/pipelines/v1/installation/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Installation</h1>
<div class="lead">Options for installing Kubeflow Pipelines</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-bf5608113cd0f142b59a1ebf6bdc0ddf">Installation Options</a></li>


    
  
    
    
	
<li>2: <a href="#pg-c3e83ecb2e15685ebd378756baadb500">Local Deployment</a></li>


    
  
    
    
	
<li>3: <a href="#pg-66adf3067d8aebc177db56ac3216c29d">Standalone Deployment</a></li>


    
  
    
    
	
<li>4: <a href="#pg-fd77b2375cf26c5efa8e44515f653900">Choosing an Argo Workflows Executor</a></li>


    
  
    
    
	
<li>5: <a href="#pg-15348c81205e7f1ec62291a74fc14992">Upgrade Notes</a></li>


    
  
    
    
	
<li>6: <a href="#pg-6f46cfeabcf176dd38dca8992b1dc5d5">Compatibility Matrix</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-bf5608113cd0f142b59a1ebf6bdc0ddf">1 - Installation Options</h1>
    <div class="lead">Overview of the ways to deploy Kubeflow Pipelines</div>
	<p>Kubeflow Pipelines offers a few installation options.
This page describes the options and the features available
with each option:</p>
<ul>
<li><a href="#kubeflow-pipelines-standalone">Kubeflow Pipelines Standalone</a> is the minimal
portable installation that only includes Kubeflow Pipelines.</li>
<li>Kubeflow Pipelines as <a href="#full-kubeflow-deployment">part of a full Kubeflow deployment</a> provides
all Kubeflow components and more integration with each platform.</li>
<li><strong>Beta</strong>: <a href="#google-cloud-ai-platform-pipelines">Google Cloud AI Platform Pipelines</a> makes it easier to install and use Kubeflow Pipelines on Google Cloud by providing a management UI on <a href="https://console.cloud.google.com/ai-platform/pipelines/clusters">Google Cloud Console</a>.</li>
<li>A <a href="/docs/components/pipelines/installation/localcluster-deployment">local</a> Kubeflow Pipelines deployment for testing purposes.</li>
</ul>
<h2 id="choosing-an-installation-option">Choosing an installation option</h2>
<ol>
<li>
<p>Do you want to use other Kubeflow components in addition to Pipelines?</p>
<p>If yes, choose the <a href="#full-kubeflow-deployment">full Kubeflow deployment</a>.</p>
</li>
<li>
<p>Can you use a cloud/on-prem Kubernetes cluster?</p>
<p>If you can&rsquo;t, you should try using Kubeflow Pipelines on a local Kubernetes cluster for learning and testing purposes by following the steps in <a href="/docs/components/pipelines/installation/localcluster-deployment">Deploying Kubeflow Pipelines on a local cluster</a>.</p>
</li>
<li>
<p>Do you want to use Kubeflow Pipelines with <a href="https://github.com/kubeflow/pipelines/issues/1223">multi-user support</a>?</p>
<p>If yes, choose the <a href="#full-kubeflow-deployment">full Kubeflow deployment</a> with version &gt;= v1.1.</p>
</li>
<li>
<p>Do you deploy on Google Cloud?</p>
<p>If yes, deploy <a href="#kubeflow-pipelines-standalone">Kubeflow Pipelines Standalone</a>. You can also
use <a href="#google-cloud-ai-platform-pipelines">Google Cloud AI Platform Pipelines</a> to deploy Kubeflow Pipelines
using a user interface, but there are limitations in
customizability and upgradability. For details, please read corresponding
sections.</p>
</li>
<li>
<p>You deploy on other platforms.</p>
<p>Please compare your platform specific <a href="#full-kubeflow-deployment">full Kubeflow</a> with the
<a href="#kubeflow-pipelines-standalone">Kubeflow Pipelines Standalone</a> before making your decision.</p>
</li>
</ol>
<p><strong>Warning:</strong> Choose your installation option with caution, there&rsquo;s no current
supported path to migrate data between different installation options. Please
create <a href="https://github.com/kubeflow/pipelines/issues/new/choose">a GitHub issue</a>
if that&rsquo;s important for you.</p>
<p><a id="standalone"></a></p>
<h2 id="kubeflow-pipelines-standalone">Kubeflow Pipelines Standalone</h2>
<p>Use this option to deploy Kubeflow Pipelines to an on-premises, cloud
or even local Kubernetes cluster, without the other components of Kubeflow.
To deploy Kubeflow Pipelines Standalone, you use kustomize manifests only.
This process makes it simpler to customize your deployment and to integrate
Kubeflow Pipelines into an existing Kubernetes cluster.</p>
<dl>
<dt>Installation guide</dt>
<dd><a href="/docs/components/pipelines/installation/standalone-deployment/">Kubeflow Pipelines Standalone deployment
guide</a></dd>
</dl>
<p>Interfaces
:</p>
<ul>
<li>Kubeflow Pipelines UI</li>
<li>Kubeflow Pipelines SDK</li>
<li>Kubeflow Pipelines API</li>
<li>Kubeflow Pipelines endpoint is <strong>only auto-configured</strong> for Google Cloud.</li>
</ul>
<p>If you wish to deploy Kubeflow Pipelines on other platforms, you can either access it through
<code>kubectl port-forward</code> or configure your own platform specific auth-enabled
endpoint by yourself.</p>
<dl>
<dt>Release Schedule</dt>
<dd>Kubeflow Pipelines Standalone is available for every Kubeflow Pipelines release.
You will have access to the latest features.</dd>
<dt>Upgrade Support (<strong>Beta</strong>)</dt>
<dd><a href="/docs/components/pipelines/installation/standalone-deployment/#upgrading-kubeflow-pipelines">Upgrading Kubeflow Pipelines Standalone</a> introduces how to upgrade
in place.</dd>
</dl>
<p>Google Cloud Integrations
:</p>
<ul>
<li>A Kubeflow Pipelines public endpoint with auth support is <strong>auto-configured</strong> for you.</li>
<li>Open the Kubeflow Pipelines UI via the <strong>Open Pipelines Dashboard</strong> link in <a href="https://console.cloud.google.com/ai-platform/pipelines/clusters">the AI Platform Pipelines dashboard of Cloud Console</a>.</li>
<li>(Optional) You can choose to persist your data in Google Cloud managed storage (Cloud SQL and Cloud Storage).</li>
<li><a href="/docs/gke/pipelines/authentication-pipelines/">All options to authenticate to Google Cloud</a> are supported.</li>
</ul>
<p>Notes on specific features
:</p>
<ul>
<li>After deployment, your Kubernetes cluster contains Kubeflow Pipelines only.
It does not include the other Kubeflow components.
For example, to use a Jupyter Notebook, you must use a local notebook or a
hosted notebook in a cloud service such as the <a href="https://cloud.google.com/ai-platform/notebooks/docs/">AI Platform
Notebooks</a>.</li>
<li>Kubeflow Pipelines multi-user support is <strong>not available</strong> in standalone, because
multi-user support depends on other Kubeflow components.</li>
</ul>
<p><a id="full-kubeflow"></a></p>
<h2 id="full-kubeflow-deployment">Full Kubeflow deployment</h2>
<p>Use this option to deploy Kubeflow Pipelines to your local machine, on-premises,
or to a cloud, as part of a full Kubeflow installation.</p>
<dl>
<dt>Installation guide</dt>
<dd><a href="/docs/started/getting-started/">Kubeflow installation guide</a></dd>
</dl>
<p>Interfaces
:</p>
<ul>
<li>Kubeflow UI</li>
<li>Kubeflow Pipelines UI within or outside the Kubeflow UI</li>
<li>Kubeflow Pipelines SDK</li>
<li>Kubeflow Pipelines API</li>
<li>Other Kubeflow APIs</li>
<li>Kubeflow Pipelines endpoint is auto-configured with auth support for each platform</li>
</ul>
<dl>
<dt>Release Schedule</dt>
<dd>The full Kubeflow is released quarterly. It has significant delay in receiving
Kubeflow Pipelines updates.</dd>
</dl>
<table>
<thead>
<tr>
<th>Kubeflow Version</th>
<th>Kubeflow Pipelines Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>0.7.0</td>
<td>0.1.31</td>
</tr>
<tr>
<td>1.0.0</td>
<td>0.2.0</td>
</tr>
<tr>
<td>1.0.2</td>
<td>0.2.5</td>
</tr>
<tr>
<td>1.1.0</td>
<td>1.0.0</td>
</tr>
<tr>
<td>1.2.0</td>
<td>1.0.4</td>
</tr>
<tr>
<td>1.3.0</td>
<td>1.5.0</td>
</tr>
<tr>
<td>1.4.0</td>
<td>1.7.0</td>
</tr>
</tbody>
</table>
<p>Note: Google Cloud, AWS, and IBM Cloud have supported Kubeflow Pipelines 1.0.0 with multi-user separation. Other platforms might not be up-to-date for now, refer to <a href="https://github.com/kubeflow/manifests/issues/1364#issuecomment-668415871">this GitHub issue</a> for status.</p>
<p>Upgrade Support
:
Refer to <a href="/docs/gke/pipelines/upgrade/#full-kubeflow">the full Kubeflow section of upgrading Kubeflow Pipelines on Google Cloud</a> guide.</p>
<p>Google Cloud Integrations
:</p>
<ul>
<li>A Kubeflow Pipelines public endpoint with auth support is <strong>auto-configured</strong> for you using <a href="https://cloud.google.com/iap">Cloud Identity-Aware Proxy</a>.</li>
<li>There&rsquo;s no current support for persisting your data in Google Cloud managed storage (Cloud SQL and Cloud Storage). Refer to <a href="https://github.com/kubeflow/pipelines/issues/4356">this GitHub issue</a> for the latest status.</li>
<li>You can <a href="/docs/gke/pipelines/authentication-pipelines/#workload-identity">authenticate to Google Cloud with Workload Identity</a>.</li>
</ul>
<p>Notes on specific features
:</p>
<ul>
<li>After deployment, your Kubernetes cluster includes all the
<a href="/docs/components/">Kubeflow components</a>.
For example, you can use the Jupyter notebook services
<a href="/docs/components/notebooks/">deployed with Kubeflow</a> to create one or more notebook
servers in your Kubeflow cluster.</li>
<li>Kubeflow Pipelines multi-user support is <strong>only available</strong> in full Kubeflow. It supports
using a single Kubeflow Pipelines control plane to orchestrate user pipeline
runs in multiple user namespaces with authorization.</li>
<li>Latest features and bug fixes may not be available soon because release
cadence is long.</li>
</ul>
<p><a id="marketplace"></a></p>
<h2 id="google-cloud-ai-platform-pipelines">Google Cloud AI Platform Pipelines</h2>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Beta release</h4>

    <p>Google Cloud AI Platform Pipelines is currently in <b>Beta</b> with
  limited support. The Kubeflow Pipelines team is interested in any feedback you may have,
  in particular on the usability of the feature.
<p>You can raise any issues or discussion items in the
<a href="https://github.com/kubeflow/pipelines/issues">Kubeflow Pipelines
issue tracker</a>.</p></p>


</div>

<p>Use this option to deploy Kubeflow Pipelines to Google Kubernetes Engine (GKE)
from Google Cloud Marketplace. You can deploy Kubeflow Pipelines to an existing or new
GKE cluster and manage your cluster within Google Cloud.</p>
<dl>
<dt>Installation guide</dt>
<dd><a href="https://cloud.google.com/ai-platform/pipelines/docs">Google Cloud AI Platform Pipelines documentation</a></dd>
</dl>
<p>Interfaces
:</p>
<ul>
<li>Google Cloud Console for managing the Kubeflow Pipelines cluster and other Google Cloud
services</li>
<li>Kubeflow Pipelines UI via the <strong>Open Pipelines Dashboard</strong> link in the
Google Cloud Console</li>
<li>Kubeflow Pipelines SDK in Cloud Notebooks</li>
<li>Kubeflow Pipelines endpoint of your instance is auto-configured for you</li>
</ul>
<dl>
<dt>Release Schedule</dt>
<dd>AI Platform Pipelines is available for a chosen set of stable Kubeflow
Pipelines releases. You will receive updates slightly slower than Kubeflow
Pipelines Standalone.</dd>
<dt>Upgrade Support (<strong>Alpha</strong>)</dt>
<dd>An in-place upgrade is not supported.</dd>
</dl>
<p>To upgrade AI Platform Pipelines by reinstalling it (with existing data), refer to the <a href="/docs/gke/pipelines/upgrade/#ai-platform-pipelines">Upgrading AI Platform Pipelines</a> guide.</p>
<p>Google Cloud Integrations
:</p>
<ul>
<li>You can deploy AI Platform Pipelines on <a href="https://console.cloud.google.com/marketplace/details/google-cloud-ai-platform/kubeflow-pipelines">Cloud Console UI</a>.</li>
<li>A Kubeflow Pipelines public endpoint with auth support is <strong>auto-configured</strong> for you.</li>
<li>(Optional) You can choose to persist your data in Google Cloud managed storage services (Cloud SQL and Cloud Storage).</li>
<li>You can <a href="/docs/gke/pipelines/authentication-pipelines/#compute-engine-default-service-account">authenticate to Google Cloud with the Compute Engine default service account</a>. However, this method may not be suitable if you need workload permission separation.</li>
<li>You can deploy AI Platform Pipelines on both public and private GKE clusters as long as the cluster <a href="https://cloud.google.com/ai-platform/pipelines/docs/configure-gke-cluster#ensure">has sufficient resources for AI Platform Pipelines</a>.</li>
</ul>
<p>Notes on specific features
:</p>
<ul>
<li>After deployment, your Kubernetes cluster contains Kubeflow Pipelines only.
It does not include the other Kubeflow components.
For example, to use a Jupyter Notebook, you can use <a href="https://cloud.google.com/ai-platform/notebooks/docs/">AI Platform
Notebooks</a>.</li>
<li>Kubeflow Pipelines multi-user support is <strong>not available</strong> in AI Platform Pipelines, because
multi-user support depends on other Kubeflow components.</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c3e83ecb2e15685ebd378756baadb500">2 - Local Deployment</h1>
    <div class="lead">Information about local Deployment of Kubeflow Pipelines (kind, K3s, K3ai)</div>
	<p>This guide shows how to deploy Kubeflow Pipelines standalone on a local
Kubernetes cluster using:</p>
<ul>
<li>kind</li>
<li>K3s</li>
<li>K3s on Windows Subsystem for Linux (WSL)</li>
<li>K3ai [<em>alpha</em>]</li>
</ul>
<p>Such deployment methods can be part of your local environment using the supplied
kustomize manifests for test purposes. This guide is an alternative to</p>
<p><a href="/docs/started/getting-started/#installing-kubeflow">Deploying Kubeflow Pipelines
(KFP)</a>.</p>
<h2 id="before-you-get-started">Before you get started</h2>
<ul>
<li>
<p>You should be familiar with <a href="https://kubernetes.io/docs/home/">Kubernetes</a>,
<a href="https://kubernetes.io/docs/reference/kubectl/overview/">kubectl</a>, and
<a href="https://kustomize.io/">kustomize</a>.</p>
</li>
<li>
<p>For native support of kustomize, you will need kubectl v1.14 or higher. You
can download and install kubectl by following the <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">kubectl installation
guide</a>.</p>
</li>
</ul>
<h2 id="kind">kind</h2>
<h3 id="1-installing-kind">1. Installing kind</h3>
<p><a href="https://kind.sigs.k8s.io">kind</a> is a tool for running local Kubernetes clusters
using Docker container nodes. <code>kind</code> was primarily designed for testing
Kubernetes itself. It can also be used for local development or CI.</p>
<p>You can install and configure kind by following the
<a href="https://kind.sigs.k8s.io/docs/user/quick-start/">official quick start</a>.</p>
<p>To get started with kind:</p>
<p><strong>On Linux:</strong></p>
<p>Download and move the <code>kind</code> executable to your directory in your PATH by
running the following commands:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -Lo ./kind https://kind.sigs.k8s.io/dl/<span class="o">{</span>KIND_VERSION<span class="o">}</span>/kind-linux-amd64 <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>chmod +x ./kind <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>mv ./kind /<span class="o">{</span>YOUR_KIND_DIRECTORY<span class="o">}</span>/kind
</span></span></code></pre></div><p>Replace the following:</p>
<ul>
<li><code>{KIND_VERSION}</code>: the kind version; for example, <code>v0.8.1</code> as of the date this
guide was written</li>
<li><code>{YOUR_KIND_DIRECTORY}</code>: your directory in PATH</li>
</ul>
<p><strong>On macOS:</strong></p>
<p>You can use <a href="https://brew.sh">Homebrew</a> to install kind:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">brew install kind
</span></span></code></pre></div><p><strong>On Windows:</strong></p>
<ul>
<li>
<p>You can use the administrative PowerShell console to run the following
commands to download and move the <code>kind</code> executable to a directory in your
PATH:</p>
</li>
<li>
<p><strong>PowerShell:</strong> Run these commands to download and move the <code>kind</code> executable
to a directory in your PATH:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">curl</span><span class="p">.</span><span class="n">exe</span> <span class="n">-Lo</span> <span class="nb">kind-windows</span><span class="n">-amd64</span><span class="p">.</span><span class="n">exe</span> <span class="n">https</span><span class="err">:</span><span class="p">//</span><span class="n">kind</span><span class="p">.</span><span class="n">sigs</span><span class="p">.</span><span class="n">k8s</span><span class="p">.</span><span class="n">io</span><span class="p">/</span><span class="n">dl</span><span class="p">/{</span><span class="n">KIND_VERSION</span><span class="p">}/</span><span class="nb">kind-windows</span><span class="n">-amd64</span>
</span></span><span class="line"><span class="cl"><span class="nb">Move-Item</span> <span class="p">.\</span><span class="nb">kind-windows</span><span class="n">-amd64</span><span class="p">.</span><span class="n">exe</span> <span class="n">c:</span><span class="p">\{</span><span class="n">YOUR_KIND_DIRECTORY</span><span class="p">}\</span><span class="n">kind</span><span class="p">.</span><span class="n">exe</span>
</span></span></code></pre></div><p>Replace the following:</p>
<ul>
<li><code>{KIND_VERSION}</code>: the kind version - for example, <code>v0.9</code> (check the latest
stable binary versions on the <a href="https://github.com/kubernetes-sigs/kind/releases">kind releases
pages</a>)</li>
<li><code>{YOUR_KIND_DIRECTORY}</code>: your directory for kind in PATH</li>
</ul>
</li>
</ul>
<ul>
<li><code>{KIND_VERSION}</code>: the kind version; for example, <code>v0.8.1</code> as of the date this
guide was written</li>
<li><code>{YOUR_KIND_DIRECTORY}</code>: your directory in PATH</li>
</ul>
<ul>
<li>
<p>Alternatively, you can use Chocolatey <a href="https://chocolatey.org/packages/kind">https://chocolatey.org/packages/kind</a>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-SHELL" data-lang="SHELL"><span class="line"><span class="cl">choco install kind
</span></span></code></pre></div></li>
</ul>
<p><strong>Note:</strong> kind uses containerd as a default container-runtime hence you cannot
use the standard kubeflow pipeline manifests.</p>
<p><strong>References</strong>:</p>
<p><strong>References:</strong></p>
<ul>
<li><a href="https://kind.sigs.k8s.io/docs/user/quick-start/">kind: Quick Start Guide</a></li>
<li><a href="https://kind.sigs.k8s.io/docs/user/known-issues/">kind: Known Issues</a></li>
<li><a href="https://kind.sigs.k8s.io/docs/user/working-offline/">kind: Working Offline</a></li>
</ul>
<h3 id="2-creating-a-cluster-on-kind">2. Creating a cluster on kind</h3>
<p>Having installed kind, you can create a Kubernetes cluster on kind with this
command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kind create cluster
</span></span></code></pre></div><p>This will bootstrap a Kubernetes cluster using a pre-built node image. You can
find that image on the Docker Hub <code>kindest/node</code>
<a href="https://hub.docker.com/r/kindest/node">here</a>. If you wish to build the node
image yourself, you can use the <code>kind build node-image</code> command—see the official
<a href="https://kind.sigs.k8s.io/docs/user/quick-start/#building-images">building
image</a> section
for more details. And, to specify another image, use the <code>--image</code> flag.</p>
<p>By default, the cluster will be given the name kind. Use the <code>--name</code> flag to
assign the cluster a different context name.</p>
<h2 id="k3s">K3s</h2>
<h3 id="1-setting-up-a-cluster-on-k3s">1. Setting up a cluster on K3s</h3>
<p>K3s is a fully compliant Kubernetes distribution with the following
enhancements:</p>
<ul>
<li>
<p>Packaged as a single binary.</p>
</li>
<li>
<p>Lightweight storage backend based on sqlite3 as the default storage mechanism.
etcd3, MySQL, Postgres also still available.</p>
</li>
<li>
<p>Wrapped in simple launcher that handles a lot of the complexity of TLS and
options.</p>
</li>
<li>
<p>Secure by default with reasonable defaults for lightweight environments.</p>
</li>
<li>
<p>Simple but powerful “batteries-included” features have been added, such as: a
local storage provider, a service load balancer, a Helm controller, and the
Traefik ingress controller.</p>
</li>
<li>
<p>Operation of all Kubernetes control plane components is encapsulated in a
single binary and process. This allows K3s to automate and manage complex
cluster operations like distributing certificates.</p>
</li>
<li>
<p>External dependencies have been minimized (just a modern kernel and cgroup
mounts needed). K3s packages required dependencies, including:</p>
<ul>
<li>containerd</li>
<li>Flannel</li>
<li>CoreDNS</li>
<li>CNI</li>
<li>Host utilities (iptables, socat, etc)</li>
<li>Ingress controller (traefik)</li>
<li>Embedded service loadbalancer</li>
<li>Embedded network policy controller</li>
</ul>
</li>
</ul>
<p>You can find the the official K3s installation script to install it as a service
on systemd- or openrc-based systems on the official
<a href="https://get.k3s.io">K3s website</a>.</p>
<p>To install K3s using that method, run the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-SHELL" data-lang="SHELL"><span class="line"><span class="cl">curl -sfL https://get.k3s.io <span class="p">|</span> sh -
</span></span></code></pre></div><p><strong>References</strong>:</p>
<ul>
<li>
<p><a href="https://rancher.com/docs/k3s/latest/en/quick-start/">K3s: Quick Start Guide</a></p>
</li>
<li>
<p><a href="https://rancher.com/docs/k3s/latest/en/known-issues/">K3s: Known Issues</a></p>
</li>
<li>
<p><a href="https://rancher.com/docs/k3s/latest/en/faq/">K3s: FAQ</a></p>
</li>
</ul>
<h3 id="2-creating-a-cluster-on-k3s">2. Creating a cluster on K3s</h3>
<ol>
<li>
<p>To create a Kubernetes cluster on K3s, use the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo k3s server <span class="p">&amp;</span>
</span></span></code></pre></div><p>This will bootstrap a Kubernetes cluster kubeconfig is written to
<code>/etc/rancher/k3s/k3s.yaml</code>.</p>
</li>
<li>
<p>(Optional) Check your cluster:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo k3s kubectl get node
</span></span></code></pre></div><p>K3s embeds the popular kubectl command directly in the binaries, so you may
immediately interact with the cluster through it.</p>
</li>
<li>
<p>(Optional) Run the below command on a different node. <code>NODE_TOKEN</code> comes from
<code>/var/lib/rancher/k3s/server/node-token</code> on your server:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo k3s agent --server https://myserver:6443 --token <span class="o">{</span>YOUR_NODE_TOKEN<span class="o">}</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="k3s-on-windows-subsystem-for-linux-wsl">K3s on Windows Subsystem for Linux (WSL)</h2>
<h3 id="1-setting-up-a-cluster-on-k3s-on-windows-subsystem-for-linux-wsl">1. Setting up a cluster on K3s on Windows Subsystem for Linux (WSL)</h3>
<p>The Windows Subsystem for Linux (WSL) lets developers run a GNU/Linux
environment—including most command-line tools, utilities, and applications—
directly on Windows, unmodified, without the overhead of a traditional virtual
machine or dualboot setup.</p>
<p>The full instructions for installing WSL can be found on the
<a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">official Windows site</a>.</p>
<p>The following steps summarize what you&rsquo;ll need to set up WSL and then K3s on
WSL.</p>
<ol>
<li>
<p>Install [WSL] by following the official <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">docs</a>.</p>
</li>
<li>
<p>As per the official instructions, update WSL and download your preferred
distibution:</p>
</li>
</ol>
<ul>
<li><a href="https://www.microsoft.com/store/apps/9PN498VPMF3Z">SUSE Linux Enterprise Server 15
SP1</a></li>
<li><a href="https://www.microsoft.com/store/apps/9MZD0N9Z4M4H">openSUSE Leap 15.2</a></li>
<li><a href="https://www.microsoft.com/store/apps/9N9TNGVNDL3Q">Ubuntu 18.04 LTS</a></li>
<li><a href="https://www.microsoft.com/store/apps/9MSVKQC78PK6">Debian GNU/Linux</a></li>
</ul>
<p><strong>References</strong>:</p>
<ul>
<li><a href="https://gist.github.com/ibuildthecloud/1b7d6940552ada6d37f54c71a89f7d00">K3s on WSL: Quick Start Guide</a></li>
</ul>
<h3 id="2-creating-a-cluster-on-k3s-on-wsl">2. Creating a cluster on K3s on WSL</h3>
<p>Below are the steps to create a cluster on K3s in WSL</p>
<ol>
<li>
<p>To create a Kubernetes cluster on K3s on WSL, run the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo ./k3s server
</span></span></code></pre></div><p>This will bootstrap a Kubernetes cluster but you will cannot yet access from
your Windows machine to the cluster itself.</p>
<p><strong>Note:</strong> You can&rsquo;t install K3s using the curl script because there is no
supervisor (systemd or openrc) in WSL.</p>
</li>
<li>
<p>Download the K3s binary from <a href="https://github.com/rancher/k3s/releases/latest">https://github.com/rancher/k3s/releases/latest</a>.
Then, inside the directory where you download the K3s binary to, run this
command to add execute permission to the K3s binary:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">chmod +x k3s
</span></span></code></pre></div></li>
<li>
<p>Start K3s:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo ./k3s server
</span></span></code></pre></div></li>
</ol>
<h3 id="3-setting-up-access-to-wsl-instance">3. Setting up access to WSL instance</h3>
<p>To set up access to your WSL instance:</p>
<ol>
<li>
<p>Copy <code>/etc/rancher/k3s/k3s.yaml</code> from WSL to <code>$HOME/.kube/config</code>.</p>
</li>
<li>
<p>Edit the copied file by changing the server URL from <code>https://localhost:6443</code>
to the IP of the your WSL instance (<code>ip addr show dev eth0</code>) (For example,
<code>https://192.168.170.170:6443</code>.)</p>
</li>
<li>
<p>Run kubectl in a Windows terminal. If you don&rsquo;t kubectl installed, follow the
official <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/#install-kubectl-on-windows">Kubernetes on Windows instructions</a>.</p>
</li>
</ol>
<h2 id="k3ai-alpha">K3ai [<em>alpha</em>]</h2>
<p>K3ai is a lightweight &ldquo;infrastructure in a box&rdquo; designed specifically to install
and configure AI tools and platforms on portable hardware, such as laptops and
edge devices. This enables users to perform quick experimentations with Kubeflow
on a local cluster.</p>
<p>K3ai&rsquo;s main goal is to provide a quick way to install Kubernetes (K3s-based) and
Kubeflow Pipelines with NVIDIA GPU support and TensorFlow Serving with just one
line. (For Kubeflow and other component support, check <a href="https://kf5ai.gitbook.io/k3ai/#components-of-k-3-ai">K3ai&rsquo;s
website</a> for updates.) To
install Kubeflow Pipelines using K3ai, run the following commands:</p>
<ul>
<li>With CPU-only support:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-SHELL" data-lang="SHELL"><span class="line"><span class="cl">curl -sfL https://get.k3ai.in <span class="p">|</span> bash -s -- --cpu --plugin_kfpipelines
</span></span></code></pre></div><ul>
<li>With GPU support:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-SHELL" data-lang="SHELL"><span class="line"><span class="cl">curl -sfL https://get.k3ai.in <span class="p">|</span> bash -s -- --gpu --plugin_kfpipelines
</span></span></code></pre></div><p>For more information about K3ai, refer to the
<a href="https://k3ai.github.io/docs/intro">official documentation</a>.</p>
<h2 id="deploying-kubeflow-pipelines">Deploying Kubeflow Pipelines</h2>
<p>The installation process for Kubeflow Pipelines is the same for all three
environments covered in this guide: kind, K3s, and K3ai.</p>
<p><strong>Note</strong>: Process Namespace Sharing (PNS) is not mature in Argo yet - for more
information go to <a href="https://argoproj.github.io/argo-workflows/workflow-executors/">Argo
Executors</a> and reference
&ldquo;pns executors&rdquo; in any issue you may come across when using PNS.</p>
<ol>
<li>
<p>To deploy the Kubeflow Pipelines, run the following commands:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># env/platform-agnostic-pns hasn&#39;t been publically released, so you will install it from master</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">PIPELINE_VERSION</span><span class="o">=</span>1.8.5
</span></span><span class="line"><span class="cl">kubectl apply -k <span class="s2">&#34;github.com/kubeflow/pipelines/manifests/kustomize/cluster-scoped-resources?ref=</span><span class="nv">$PIPELINE_VERSION</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">kubectl <span class="nb">wait</span> --for <span class="nv">condition</span><span class="o">=</span>established --timeout<span class="o">=</span>60s crd/applications.app.k8s.io
</span></span><span class="line"><span class="cl">kubectl apply -k <span class="s2">&#34;github.com/kubeflow/pipelines/manifests/kustomize/env/platform-agnostic-pns?ref=</span><span class="nv">$PIPELINE_VERSION</span><span class="s2">&#34;</span>
</span></span></code></pre></div><p>The Kubeflow Pipelines deployment may take several minutes to complete.</p>
</li>
<li>
<p>Verify that the Kubeflow Pipelines UI is accessible by port-forwarding:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kubectl port-forward -n kubeflow svc/ml-pipeline-ui 8080:80
</span></span></code></pre></div><p>Then, open the Kubeflow Pipelines UI at <code>http://localhost:8080/</code> or - if you are
using kind or K3s within a virtual machine - <code>http://{YOUR_VM_IP_ADDRESS}:8080/</code></p>
<p>Note that K3ai will automatically print the URL for the web UI at the end of
the installation process.</p>
<p><strong>Note</strong>: <code>kubectl apply -k</code> accepts local paths and paths that are
formatted as
<a href="https://github.com/kubernetes-sigs/kustomize/blob/master/examples/remoteBuild.md#url-format">hashicorp/go-getter URLs</a>.
While the paths in the preceding commands look like URLs, they are not valid
URLs.</p>
</li>
</ol>
<h2 id="uninstalling-kubeflow-pipelines">Uninstalling Kubeflow Pipelines</h2>
<p>Below are the steps to remove Kubeflow Pipelines on kind, K3s, or K3ai:</p>
<ul>
<li>
<p>To uninstall Kubeflow Pipelines using your manifest file, run the following command,
replacing <code>{YOUR_MANIFEST_FILE}</code> with the name of your manifest file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kubectl delete -k <span class="o">{</span>YOUR_MANIFEST_FILE<span class="o">}</span><span class="sb">`</span>
</span></span></code></pre></div></li>
<li>
<p>To uninstall Kubeflow Pipelines using manifests from Kubeflow Pipelines&rsquo;s
GitHub repository, run these commands:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">PIPELINE_VERSION</span><span class="o">=</span>1.8.5
</span></span><span class="line"><span class="cl">kubectl delete -k <span class="s2">&#34;github.com/kubeflow/pipelines/manifests/kustomize/env/platform-agnostic-pns?ref=</span><span class="nv">$PIPELINE_VERSION</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">kubectl delete -k <span class="s2">&#34;github.com/kubeflow/pipelines/manifests/kustomize/cluster-scoped-resources?ref=</span><span class="nv">$PIPELINE_VERSION</span><span class="s2">&#34;</span>
</span></span></code></pre></div></li>
<li>
<p>To uninstall Kubeflow Pipelines using manifests from your local repository or
file system, run the following commands:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kubectl delete -k manifests/kustomize/env/platform-agnostic-pns
</span></span><span class="line"><span class="cl">kubectl delete -k manifests/kustomize/cluster-scoped-resources
</span></span></code></pre></div></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-66adf3067d8aebc177db56ac3216c29d">3 - Standalone Deployment</h1>
    <div class="lead">Information about Standalone Deployment of Kubeflow Pipelines</div>
	<p>As an alternative to deploying Kubeflow Pipelines (KFP) as part of the
<a href="/docs/started/getting-started/#installing-kubeflow">Kubeflow deployment</a>, you also have a choice
to deploy only Kubeflow Pipelines. Follow the instructions below to deploy
Kubeflow Pipelines standalone using the supplied kustomize manifests.</p>
<p>You should be familiar with <a href="https://kubernetes.io/docs/home/">Kubernetes</a>,
<a href="https://kubernetes.io/docs/reference/kubectl/overview/">kubectl</a>, and <a href="https://kustomize.io/">kustomize</a>.</p>


<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Installation options for Kubeflow Pipelines standalone</h4>

    This guide currently describes how to install Kubeflow Pipelines standalone
on Google Cloud Platform (GCP). You can also install Kubeflow Pipelines standalone on other
platforms. This guide needs updating. See <a href="https://github.com/kubeflow/website/issues/1253">Issue 1253</a>.

</div>

<h2 id="before-you-get-started">Before you get started</h2>
<p>Working with Kubeflow Pipelines Standalone requires a Kubernetes cluster as well as an installation of kubectl.</p>
<h3 id="download-and-install-kubectl">Download and install kubectl</h3>
<p>Download and install kubectl by following the <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">kubectl installation guide</a>.</p>
<p>You need kubectl version 1.14 or higher for native support of kustomize.</p>
<h3 id="set-up-your-cluster">Set up your cluster</h3>
<p>If you have an existing Kubernetes cluster, continue with the instructions for <a href="#configure-kubectl">configuring kubectl to talk to your cluster</a>.</p>
<p>See the GKE guide to <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/creating-a-cluster">creating a cluster</a> for Google Cloud Platform (GCP).</p>
<p>Use the <a href="https://cloud.google.com/sdk/gcloud/reference/container/clusters/create">gcloud container clusters create command</a> to create a cluster that can run all Kubeflow Pipelines samples:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># The following parameters can be customized based on your needs.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">CLUSTER_NAME=&#34;kubeflow-pipelines-standalone&#34;
</span></span><span class="line"><span class="cl">ZONE=&#34;us-central1-a&#34;
</span></span><span class="line"><span class="cl">MACHINE_TYPE=&#34;e2-standard-2&#34; # A machine with 2 CPUs and 8GB memory.
</span></span><span class="line"><span class="cl">SCOPES=&#34;cloud-platform&#34; # This scope is needed for running some pipeline samples. Read the warning below for its security implication
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">gcloud container clusters create $CLUSTER_NAME \
</span></span><span class="line"><span class="cl">     --zone $ZONE \
</span></span><span class="line"><span class="cl">     --machine-type $MACHINE_TYPE \
</span></span><span class="line"><span class="cl">     --scopes $SCOPES
</span></span></code></pre></div><p><strong>Note</strong>: <code>e2-standard-2</code> doesn&rsquo;t support GPU. You can choose machine types that meet your need by referring to guidance in <a href="http://cloud/compute/docs/machine-types">Cloud Machine families</a>.</p>
<p><strong>Warning</strong>: Using <code>SCOPES=&quot;cloud-platform&quot;</code> grants all GCP permissions to the cluster. For a more secure cluster setup, refer to <a href="/docs/gke/authentication/#authentication-from-kubeflow-pipelines">Authenticating Pipelines to GCP</a>.</p>
<p>Note, some legacy pipeline examples may need minor code change to run on clusters with <code>SCOPES=&quot;cloud-platform&quot;</code>, refer to <a href="/docs/gke/pipelines/authentication-pipelines/#authoring-pipelines-to-use-default-service-account">Authoring Pipelines to use default service account</a>.</p>
<p><strong>References</strong>:</p>
<ul>
<li>
<p><a href="https://cloud.google.com/compute/docs/regions-zones/#available">GCP regions and zones documentation</a></p>
</li>
<li>
<p><a href="https://cloud.google.com/sdk/gcloud/">gcloud command-line tool guide</a></p>
</li>
<li>
<p><a href="https://cloud.google.com/sdk/gcloud/reference/container/clusters/create">gcloud command reference</a></p>
</li>
</ul>
<h3 id="configure-kubectl">Configure kubectl to talk to your cluster</h3>
<p>See the Google Kubernetes Engine (GKE) guide to
<a href="https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-access-for-kubectl">configuring cluster access for kubectl</a>.</p>
<h2 id="deploying-kubeflow-pipelines">Deploying Kubeflow Pipelines</h2>
<ol>
<li>
<p>Deploy the Kubeflow Pipelines:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">export PIPELINE_VERSION=1.8.5
</span></span><span class="line"><span class="cl">kubectl apply -k &#34;github.com/kubeflow/pipelines/manifests/kustomize/cluster-scoped-resources?ref=$PIPELINE_VERSION&#34;
</span></span><span class="line"><span class="cl">kubectl wait --for condition=established --timeout=60s crd/applications.app.k8s.io
</span></span><span class="line"><span class="cl">kubectl apply -k &#34;github.com/kubeflow/pipelines/manifests/kustomize/env/dev?ref=$PIPELINE_VERSION&#34;
</span></span></code></pre></div><p>The Kubeflow Pipelines deployment requires approximately 3 minutes to complete.</p>
<p><strong>Note</strong>: The above commands apply to Kubeflow Pipelines version 0.4.0 and higher.</p>
<p>For Kubeflow Pipelines version 0.2.0 ~ 0.3.0, use:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">export PIPELINE_VERSION=&lt;kfp-version-between-0.2.0-and-0.3.0&gt;
</span></span><span class="line"><span class="cl">kubectl apply -k &#34;github.com/kubeflow/pipelines/manifests/kustomize/base/crds?ref=$PIPELINE_VERSION&#34;
</span></span><span class="line"><span class="cl">kubectl wait --for condition=established --timeout=60s crd/applications.app.k8s.io
</span></span><span class="line"><span class="cl">kubectl apply -k &#34;github.com/kubeflow/pipelines/manifests/kustomize/env/dev?ref=$PIPELINE_VERSION&#34;
</span></span></code></pre></div><p>For Kubeflow Pipelines version &lt; 0.2.0, use:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">export PIPELINE_VERSION=&lt;kfp-version-0.1.x&gt;
</span></span><span class="line"><span class="cl">kubectl apply -k &#34;github.com/kubeflow/pipelines/manifests/kustomize/env/dev?ref=$PIPELINE_VERSION&#34;
</span></span></code></pre></div><p><strong>Note</strong>: <code>kubectl apply -k</code> accepts local paths and paths that are formatted as <a href="https://github.com/kubernetes-sigs/kustomize/blob/master/examples/remoteBuild.md#url-format">hashicorp/go-getter URLs</a>. While the paths in the preceding commands look like URLs, the paths are not valid URLs.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Deprecation Notice</h4>

    <p>Kubeflow Pipelines will change default executor from Docker to Emissary starting KFP backend v1.8, docker executor has been
deprecated on Kubernetes 1.20+.</p>
<p>For Kubeflow Pipelines before v1.8, configure to use Emissary executor by
referring to <a href="/docs/components/pipelines/installation/choose-executor">Argo Workflow Executors</a>.</p>


</div>

</li>
<li>
<p>Get the public URL for the Kubeflow Pipelines UI and use it to access the Kubeflow Pipelines UI:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl describe configmap inverse-proxy-config -n kubeflow | grep googleusercontent.com
</span></span></code></pre></div></li>
</ol>
<h2 id="upgrading-kubeflow-pipelines">Upgrading Kubeflow Pipelines</h2>
<ol>
<li>
<p>For release notices and breaking changes, refer to <a href="/docs/components/pipelines/upgrade">Upgrading Kubeflow Pipelines</a>.</p>
</li>
<li>
<p>Check the <a href="https://github.com/kubeflow/pipelines/releases">Kubeflow Pipelines GitHub repository</a> for available releases.</p>
</li>
<li>
<p>To upgrade to Kubeflow Pipelines 0.4.0 and higher, use the following commands:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">export PIPELINE_VERSION=&lt;version-you-want-to-upgrade-to&gt;
</span></span><span class="line"><span class="cl">kubectl apply -k &#34;github.com/kubeflow/pipelines/manifests/kustomize/cluster-scoped-resources?ref=$PIPELINE_VERSION&#34;
</span></span><span class="line"><span class="cl">kubectl wait --for condition=established --timeout=60s crd/applications.app.k8s.io
</span></span><span class="line"><span class="cl">kubectl apply -k &#34;github.com/kubeflow/pipelines/manifests/kustomize/env/dev?ref=$PIPELINE_VERSION&#34;
</span></span></code></pre></div><p>To upgrade to Kubeflow Pipelines 0.3.0 and lower, use the <a href="#deploying-kubeflow-pipelines">deployment instructions</a> to upgrade your Kubeflow Pipelines cluster.</p>
</li>
<li>
<p>Delete obsolete resources manually.</p>
<p>Depending on the version you are upgrading from and the version you are upgrading to,
some Kubeflow Pipelines resources may have become obsolete.</p>
<p>If you are upgrading from Kubeflow Pipelines &lt; 0.4.0 to 0.4.0 or above, you can remove the
following obsolete resources after the upgrade:
<code>metadata-deployment</code>, <code>metadata-service</code>.</p>
<p>Run the following command to check if these resources exist on your cluster:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl -n &lt;KFP_NAMESPACE&gt; get deployments | grep metadata-deployment
</span></span><span class="line"><span class="cl">kubectl -n &lt;KFP_NAMESPACE&gt; get service | grep metadata-service
</span></span></code></pre></div><p>If these resources exist on your cluster, run the following commands to delete them:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl -n &lt;KFP_NAMESPACE&gt; delete deployment metadata-deployment
</span></span><span class="line"><span class="cl">kubectl -n &lt;KFP_NAMESPACE&gt; delete service metadata-service
</span></span></code></pre></div><p>For other versions, you don&rsquo;t need to do anything.</p>
</li>
</ol>
<h2 id="customizing-kubeflow-pipelines">Customizing Kubeflow Pipelines</h2>
<p>Kubeflow Pipelines can be configured through kustomize <a href="https://github.com/kubernetes-sigs/kustomize/blob/master/docs/glossary.md#overlay">overlays</a>.</p>
<p>To begin, first clone the <a href="https://github.com/kubeflow/pipelines">Kubeflow Pipelines GitHub repository</a>,
and use it as your working directory.</p>
<h3 id="deploy-on-gcp-with-cloud-sql-and-google-cloud-storage">Deploy on GCP with Cloud SQL and Google Cloud Storage</h3>
<p><strong>Note</strong>: This is recommended for production environments. For more details about customizing your environment
for GCP, see the <a href="https://github.com/kubeflow/pipelines/tree/sdk/release-1.8/manifests/kustomize/env/gcp">Kubeflow Pipelines GCP manifests</a>.</p>
<h3 id="change-deployment-namespace">Change deployment namespace</h3>
<p>To deploy Kubeflow Pipelines standalone in namespace <code>&lt;my-namespace&gt;</code>:</p>
<ol>
<li>
<p>Set the <code>namespace</code> field to <code>&lt;my-namespace&gt;</code> in
<a href="https://github.com/kubeflow/pipelines/blob/sdk/release-1.8/manifests/kustomize/env/dev/kustomization.yaml">dev/kustomization.yaml</a> or
<a href="https://github.com/kubeflow/pipelines/blob/sdk/release-1.8/manifests/kustomize/env/gcp/kustomization.yaml">gcp/kustomization.yaml</a>.</p>
</li>
<li>
<p>Set the <code>namespace</code> field to <code>&lt;my-namespace&gt;</code> in <a href="https://github.com/kubeflow/pipelines/blob/sdk/release-1.8/manifests/kustomize/cluster-scoped-resources/kustomization.yaml">cluster-scoped-resources/kustomization.yaml</a></p>
</li>
<li>
<p>Apply the changes to update the Kubeflow Pipelines deployment:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl apply -k manifests/kustomize/cluster-scoped-resources
</span></span><span class="line"><span class="cl">kubectl apply -k manifests/kustomize/env/dev
</span></span></code></pre></div><p><strong>Note</strong>: If using GCP Cloud SQL and Google Cloud Storage, set the proper values in <a href="https://github.com/kubeflow/pipelines/blob/sdk/release-1.8/manifests/kustomize/env/gcp/params.env">manifests/kustomize/env/gcp/params.env</a>, then apply with this command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl apply -k manifests/kustomize/cluster-scoped-resources
</span></span><span class="line"><span class="cl">kubectl apply -k manifests/kustomize/env/gcp
</span></span></code></pre></div></li>
</ol>
<h3 id="disable-the-public-endpoint">Disable the public endpoint</h3>
<p>By default, the KFP standalone deployment installs an <a href="https://github.com/google/inverting-proxy">inverting proxy agent</a> that exposes a public URL. If you want to skip the installation of the inverting proxy agent, complete the following:</p>
<ol>
<li>
<p>Comment out the proxy components in the base <code>kustomization.yaml</code>. For example in <a href="https://github.com/kubeflow/pipelines/blob/sdk/release-1.8/manifests/kustomize/env/dev/kustomization.yaml">manifests/kustomize/env/dev/kustomization.yaml</a> comment out <code>inverse-proxy</code>.</p>
</li>
<li>
<p>Apply the changes to update the Kubeflow Pipelines deployment:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl apply -k manifests/kustomize/env/dev
</span></span></code></pre></div><p><strong>Note</strong>: If using GCP Cloud SQL and Google Cloud Storage, set the proper values in <a href="https://github.com/kubeflow/pipelines/blob/sdk/release-1.8/manifests/kustomize/env/gcp/params.env">manifests/kustomize/env/gcp/params.env</a>, then apply with this command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl apply -k manifests/kustomize/env/gcp
</span></span></code></pre></div></li>
<li>
<p>Verify that the Kubeflow Pipelines UI is accessible by port-forwarding:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl port-forward -n kubeflow svc/ml-pipeline-ui 8080:80
</span></span></code></pre></div></li>
<li>
<p>Open the Kubeflow Pipelines UI at <code>http://localhost:8080/</code>.</p>
</li>
</ol>
<h2 id="uninstalling-kubeflow-pipelines">Uninstalling Kubeflow Pipelines</h2>
<p>To uninstall Kubeflow Pipelines, run <code>kubectl delete -k &lt;manifest-file&gt;</code>.</p>
<p>For example, to uninstall KFP using manifests from a GitHub repository, run:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">export PIPELINE_VERSION=1.8.5
</span></span><span class="line"><span class="cl">kubectl delete -k &#34;github.com/kubeflow/pipelines/manifests/kustomize/env/dev?ref=$PIPELINE_VERSION&#34;
</span></span><span class="line"><span class="cl">kubectl delete -k &#34;github.com/kubeflow/pipelines/manifests/kustomize/cluster-scoped-resources?ref=$PIPELINE_VERSION&#34;
</span></span></code></pre></div><p>To uninstall KFP using manifests from your local repository or file system, run:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl delete -k manifests/kustomize/env/dev
</span></span><span class="line"><span class="cl">kubectl delete -k manifests/kustomize/cluster-scoped-resources
</span></span></code></pre></div><p><strong>Note</strong>: If you are using GCP Cloud SQL and Google Cloud Storage, run:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl delete -k manifests/kustomize/env/gcp
</span></span><span class="line"><span class="cl">kubectl delete -k manifests/kustomize/cluster-scoped-resources
</span></span></code></pre></div><h2 id="best-practices-for-maintaining-manifests">Best practices for maintaining manifests</h2>
<p>Similar to source code, configuration files belong in source control.
A repository manages the changes to your
manifest files and ensures that you can repeatedly deploy, upgrade,
and uninstall your components.</p>
<h3 id="maintain-your-manifests-in-source-control">Maintain your manifests in source control</h3>
<p>After creating or customizing your deployment manifests, save your manifests
to a local or remote source control repository.
For example, save the following <code>kustomization.yaml</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># kustomization.yaml
</span></span><span class="line"><span class="cl">apiVersion: kustomize.config.k8s.io/v1beta1
</span></span><span class="line"><span class="cl">kind: Kustomization
</span></span><span class="line"><span class="cl"># Edit the following to change the deployment to your custom namespace.
</span></span><span class="line"><span class="cl">namespace: kubeflow
</span></span><span class="line"><span class="cl"># You can add other customizations here using kustomize.
</span></span><span class="line"><span class="cl"># Edit ref in the following link to deploy a different version of Kubeflow Pipelines.
</span></span><span class="line"><span class="cl">bases:
</span></span><span class="line"><span class="cl">- github.com/kubeflow/pipelines/manifests/kustomize/env/dev?ref=1.8.5
</span></span></code></pre></div><h3 id="further-reading">Further reading</h3>
<ul>
<li>To learn about kustomize workflows with off-the-shelf configurations, see the
<a href="https://github.com/kubernetes-sigs/kustomize/blob/master/docs/workflows.md#off-the-shelf-configuration">kustomize configuration workflows guide</a>.</li>
</ul>
<h2 id="troubleshooting">Troubleshooting</h2>
<ul>
<li>If your pipelines are stuck in ContainerCreating state and it has pod events like</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">MountVolume.SetUp failed for volume &#34;gcp-credentials-user-gcp-sa&#34; : secret &#34;user-gcp-sa&#34; not found
</span></span></code></pre></div><p>You should remove <code>use_gcp_secret</code> usages as documented in <a href="/docs/distributions/gke/pipelines/authentication-pipelines/#authoring-pipelines-to-use-workload-identity">Authenticating Pipelines to GCP</a>.</p>
<h2 id="whats-next">What&rsquo;s next</h2>
<ul>
<li><a href="/docs/distributions/gke/pipelines/authentication-sdk/#connecting-to-kubeflow-pipelines-standalone-or-ai-platform-pipelines">Connecting to Kubeflow Pipelines standalone on Google Cloud using the SDK</a></li>
<li><a href="/docs/distributions/gke/pipelines/authentication-pipelines/#authoring-pipelines-to-use-workload-identity">Authenticating Pipelines to GCP</a> if you want to use GCP services in Kubeflow Pipelines.</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-fd77b2375cf26c5efa8e44515f653900">4 - Choosing an Argo Workflows Executor</h1>
    <div class="lead">How to choose an Argo Workflows Executor</div>
	<p>An Argo workflow executor is a process that conforms to a specific interface that allows Argo to perform certain actions like monitoring pod logs, collecting artifacts, managing container lifecycles, etc.</p>
<p>Kubeflow Pipelines runs on <a href="https://argoproj.github.io/workflows/">Argo Workflows</a> as the workflow engine, so Kubeflow Pipelines users need to choose a workflow executor.</p>
<h2 id="choosing-the-workflow-executor">Choosing the Workflow Executor</h2>
<ol>
<li>
<p>Some users may value stability and backward compatibility. For example, if you
are running Kubeflow Pipelines in a production cluster or you maintain production
pipelines that you don&rsquo;t want to break or migrate.</p>
<p>In this case, we recommend you use <a href="#docker-executor">docker executor</a> and configure your Kubernetes nodes to use docker container runtime.</p>
<p>However, Kubernetes is deprecating docker as a container runtime, so we recommend
starting to try out emissary and prepare for a migration when it&rsquo;s stable.</p>
</li>
<li>
<p>For users less concerned with stability and backwards compatibility, we
recommend trying out the new <a href="#emissary-executor">emissary executor</a>.</p>
</li>
</ol>
<p>Note that Argo Workflows support other workflow executors, but the Kubeflow Pipelines
team only recommend choosing between docker executor and emissary executor.</p>
<h3 id="docker-executor">Docker Executor</h3>
<p>Docker executor is the <strong>default</strong> workflow executor. But Kubeflow Pipelines v1.8 will switch to Emissary Executor as default executor.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    Docker executor depends on docker container runtime, which will be deprecated on Kubernetes 1.20+.

</div>

<ul>
<li>Container Runtime: docker only. However, <a href="https://kubernetes.io/blog/2020/12/02/dont-panic-kubernetes-and-docker/">Kubernetes is deprecating Docker as a container runtime after v1.20</a>.
On Google Kubernetes Engine (GKE) 1.19+, container runtime already defaults to containerd.</li>
<li>Reliability: most well-tested and most popular argo workflows executor</li>
<li>Security: least secure
<ul>
<li>It requires <code>privileged</code> access to <code>docker.sock</code> of the host to be mounted which.
Often rejected by Open Policy Agent (OPA) or your Pod Security Policy (PSP).
GKE autopilot mode also rejects it, because <a href="https://cloud.google.com/kubernetes-engine/docs/concepts/autopilot-overview#no_privileged_pods">No privileged Pods</a>.</li>
<li>It can escape the privileges of the pod&rsquo;s service account.</li>
</ul>
</li>
</ul>
<h4 id="prepare-a-gke-cluster-for-docker-executor">Prepare a GKE cluster for Docker Executor</h4>
<p>For GKE, the node image decides which container runtime is used. To use docker
container runtime, you need to <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/node-images">specify a node image</a> with Docker.</p>
<p>You must use one of the following node images:</p>
<ul>
<li>Container-Optimized OS with Docker (cos)</li>
<li>Ubuntu with Docker (ubuntu)</li>
</ul>
<p>If your nodes are not using docker as container runtime, when you run pipelines
you will always find error messages like:</p>
<blockquote>
<p>This step is in Error state with this message: failed to save outputs: Error response from daemon: No such container: XXXXXX</p>
</blockquote>
<h3 id="emissary-executor">Emissary Executor</h3>
<div class="alert alert-warning" role="alert">
  <h4 class="alert-heading">Alpha</h4>
  This Kubeflow component has <b>alpha</b> status with limited support. See the
  <a href="/docs/started/support/#application-status">Kubeflow versioning policies</a>.
  The Kubeflow team is interested in your   
  <a href="https://github.com/kubeflow/pipelines/issues/6249">feedback</a></h4> 
  about the usability of the feature.
</div>
<p>Emissary executor is a new workflow executor. It was first released in Argo Workflows v3.1 (June 2021).
However, the Kubeflow Pipelines team believe that its architectural and portability
improvements can make it the default executor that most people should use in the
future.</p>
<p>Therefore, the team makes a commitment to actively collect feedback and fix bugs
for the emissary executor, so that we can stablize it faster.
Submit your feedback in <a href="https://github.com/kubeflow/pipelines/issues/6249">the Emissary Executor feedback github issue</a>.</p>
<p>So far, Kubeflow
Pipelines test infrastructure has been running stably with the emissary executor.</p>
<ul>
<li>
<p>Container Runtime: any</p>
</li>
<li>
<p>Reliability: not yet well-tested and not yet popular, but the Kubeflow Pipelines
team supports it.</p>
</li>
<li>
<p>Security: more secure</p>
<ul>
<li>No <code>privileged</code> access.</li>
<li>Cannot escape the privileges of the pod&rsquo;s service account.</li>
</ul>
</li>
<li>
<p>Migration: <code>command</code> must be specified in <a href="https://www.kubeflow.org/docs/components/pipelines/reference/component-spec/">Kubeflow Pipelines component specification</a>.</p>
<p>Note, the same migration requirement is required by <a href="https://www.kubeflow.org/docs/components/pipelines/sdk-v2/v2-compatibility/">Kubeflow Pipelines v2 compatible mode</a>, refer to
<a href="https://github.com/kubeflow/pipelines/issues/6133">known caveats &amp; breaking changes</a>.</p>
</li>
</ul>
<h4 id="migrate-to-emissary-executor">Migrate to Emissary Executor</h4>
<p>Prerequisite: emissary executor is only available in Kubeflow Pipelines backend version 1.7+.
To upgrade, refer to <a href="/docs/components/pipelines/upgrade/">upgrading Kubeflow Pipelines</a>.</p>
<h5 id="configure-an-existing-kubeflow-pipelines-cluster-to-use-emissary-executor">Configure an existing Kubeflow Pipelines cluster to use emissary executor</h5>
<ol>
<li>
<p>Install <a href="https://kubernetes.io/docs/tasks/tools/#kubectl">kubectl</a>.</p>
</li>
<li>
<p>Connect to your cluster via kubectl.</p>
</li>
<li>
<p>Switch to the namespace you installed Kubeflow Pipelines:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl config set-context --current --namespace &lt;your-kfp-namespace&gt;
</span></span></code></pre></div><p>Note, usually it&rsquo;s <code>kubeflow</code> or <code>default</code>.</p>
</li>
<li>
<p>Confirm current workflow executor:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl describe configmap workflow-controller-configmap <span class="p">|</span> grep -A <span class="m">2</span> containerRuntimeExecutor
</span></span></code></pre></div><p>You&rsquo;ll see output like the following when using docker executor:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">containerRuntimeExecutor:
</span></span><span class="line"><span class="cl">----
</span></span><span class="line"><span class="cl">docker
</span></span></code></pre></div></li>
<li>
<p>Configure workflow executor to emissary:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl patch configmap workflow-controller-configmap --patch <span class="s1">&#39;{&#34;data&#34;:{&#34;containerRuntimeExecutor&#34;:&#34;emissary&#34;}}&#39;</span>
</span></span></code></pre></div></li>
<li>
<p>Confirm workflow executor is changed successfully:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl describe configmap workflow-controller-configmap <span class="p">|</span> grep -A <span class="m">2</span> containerRuntimeExecutor
</span></span></code></pre></div><p>You&rsquo;ll see output like the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">containerRuntimeExecutor:
</span></span><span class="line"><span class="cl">----
</span></span><span class="line"><span class="cl">emissary
</span></span></code></pre></div></li>
</ol>
<h5 id="deploy-a-new-kubeflow-pipelines-cluster-with-emissary-executor">Deploy a new Kubeflow Pipelines cluster with emissary executor</h5>
<p>For <a href="https://cloud.google.com/ai-platform/pipelines/docs">AI Platform Pipelines</a>, check the &ldquo;Use emissary executor&rdquo; checkbox during installation.</p>
<p>For <a href="https://www.kubeflow.org/docs/components/pipelines/installation/standalone-deployment/">Kubeflow Pipelines Standalone</a>, install <code>env/platform-agnostic-emissary</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl apply -k <span class="s2">&#34;github.com/kubeflow/pipelines/manifests/kustomize/env/platform-agnostic-emissary?ref=</span><span class="nv">$PIPELINE_VERSION</span><span class="s2">&#34;</span>
</span></span></code></pre></div><p>When in doubt, you can always deploy your Kubeflow Pipelines cluster first and
configure workflow executor after installation using the instructions for
existing clusters.</p>
<h5 id="migrate-pipeline-components-to-run-on-emissary-executor">Migrate pipeline components to run on emissary executor</h5>
<p>Some pipeline components require manual updates to run on emissary executor.
For <a href="https://www.kubeflow.org/docs/components/pipelines/reference/component-spec/">Kubeflow Pipelines component specification</a> YAML,
the <code>command</code> field must be specified.</p>
<p>Step by step component migration tutorial:</p>
<ol>
<li>
<p>There is a hello world component:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">hello-world</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">implementation</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">container</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">hello-world</span><span class="w">
</span></span></span></code></pre></div></li>
<li>
<p>We can run the container without command/args:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker run hello-world
</span></span><span class="line"><span class="cl">Hello from Docker!
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div></li>
<li>
<p>Find out what the default ENTRYPOINT and CMD is in the image:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker image inspect -f <span class="s1">&#39;{{.Config.Entrypoint}} {{.Config.Cmd}}&#39;</span> hello-world
</span></span><span class="line"><span class="cl"><span class="o">[]</span> <span class="o">[</span>/hello<span class="o">]</span>
</span></span></code></pre></div><p>So ENTRYPOINT is not specified, and CMD is [&quot;/hello&quot;].
Note, ENTRYPOINT roughly means <code>command</code> and CMD roughly
means <code>arguments</code>. <code>command</code> and <code>arguments</code> are concatenated as the user
command.</p>
</li>
<li>
<p>Update the component YAML:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">hello-world</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">implementation</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">container</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">hello-world</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;/hello&#34;</span><span class="p">]</span><span class="w">
</span></span></span></code></pre></div></li>
<li>
<p>The updated component can run on emissary executor now.</p>
</li>
</ol>
<p>Note: Kubeflow Pipelines SDK compiler always specifies a command for
<a href="https://www.kubeflow.org/docs/components/pipelines/sdk/python-function-components/">python function based components</a>.
Therefore, these components will continue to work on emissary executor without
modifications.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://argoproj.github.io/argo-workflows/workflow-executors/">Argo Workflow Executors documentation</a></li>
<li>KFP docker executor doesn&rsquo;t support Kubernetes 1.19 or above <a href="https://github.com/kubeflow/pipelines/issues/5714">kubeflow/pipelines#5714</a></li>
<li>Feature request - default to emissary executor <a href="https://github.com/kubeflow/pipelines/issues/5718">kubeflow/pipelines#5718</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-15348c81205e7f1ec62291a74fc14992">5 - Upgrade Notes</h1>
    <div class="lead">Notices and breaking changes when you upgrade Kubeflow Pipelines Backend</div>
	<p>This page introduces notices and breaking changes you need to know when upgrading Kubeflow Pipelines Backend.</p>
<p>For upgrade instructions, refer to distribution specific documentations:</p>
<ul>
<li><a href="/docs/distributions/gke/pipelines/upgrade/">Upgrading Kubeflow Pipelines on Google Cloud</a></li>
</ul>
<h2 id="upgrading-to-v17">Upgrading to <a href="https://github.com/kubeflow/pipelines/releases/tag/1.7.0">v1.7</a></h2>
<ul>
<li>
<p><strong>Breaking Change</strong>: Metadata UI and visualizations are not compatible with TensorFlow Extended (TFX) &lt;= v1.0.0. Upgrade to v1.2.0 or above, refer to <a href="/docs/components/pipelines/installation/compatibility-matrix/">Kubeflow Pipelines Backend and TensorFlow Extended (TFX) compatibility matrix</a>.</p>
</li>
<li>
<p><strong>Notice</strong>: Emissary executor (Alpha), a new argo workflow executor is available as an option. Due to <a href="https://kubernetes.io/blog/2020/12/02/dont-panic-kubernetes-and-docker/">Kubernetes deprecating Docker as a container runtime after v1.20</a>, emissary may become the default workflow executor for Kubeflow Pipelines in the near future.</p>
<p>For example, the current default docker executor does not work on Google Kubernetes Engine (GKE) 1.19+ out of the box. To use docker executor, your cluster node image must be configured to use docker (deprecated) as container runtime.</p>
<p>Alternatively, using emissary executor (Alpha) removes the restriction on container runtime, but note some of your pipelines may require manual migrations. The Kubeflow Pipelines team welcomes your feedback in <a href="https://github.com/kubeflow/pipelines/issues/6249">the Emissary Executor feedback github issue</a>.</p>
<p>For detailed configuration and migration instructions for both options, refer to <a href="https://www.kubeflow.org/docs/components/pipelines/installation/choose-executor/">Argo Workflow Executors</a>.</p>
</li>
<li>
<p><strong>Notice</strong>: <a href="/docs/components/pipelines/sdk-v2/v2-compatibility/">Kubeflow Pipelines SDK v2 compatibility mode</a> (Beta) was recently released. The new mode adds support for tracking pipeline runs and artifacts using ML Metadata. In v1.7 backend, complete UI support and caching capabilities for v2 compatibility mode are newly added. We welcome any <a href="https://github.com/kubeflow/pipelines/issues/6451">feedback</a> on positive experiences or issues you encounter.</p>
</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6f46cfeabcf176dd38dca8992b1dc5d5">6 - Compatibility Matrix</h1>
    <div class="lead">Kubeflow Pipelines compatibility matrix with TensorFlow Extended (TFX)</div>
	<h2 id="kubeflow-pipelines-backend-and-tfx-compatibility">Kubeflow Pipelines Backend and TFX compatibility</h2>
<p>Pipelines written in any version of <a href="https://www.tensorflow.org/tfx">TensorFlow Extended (TFX)</a> will execute on any version of Kubeflow Pipelines (KFP) backend. However, some UI features may not be functioning properly if the TFX and Kubeflow Pipelines Backend versions are not compatible.</p>
<p>The following table shows UI feature compatibility for TFX and Kubeflow Pipelines Backend versions:</p>
<table>
<thead>
<tr>
<th><a href="https://github.com/tensorflow/tfx/releases">TFX</a> \ <a href="https://github.com/kubeflow/pipelines/releases">KFP Backend</a></th>
<th><a href="https://github.com/kubeflow/pipelines/releases">KFP Backend</a> &lt;= 1.5</th>
<th><a href="https://github.com/kubeflow/pipelines/releases">KFP Backend</a> &gt;= 1.7</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/tensorflow/tfx/releases">TFX</a> &lt;= 0.28.0</td>
<td>Fully Compatible  ✅</td>
<td>Metadata UI not compatible<sup><a href="#fn2">2</a></sup></td>
</tr>
<tr>
<td><a href="https://github.com/tensorflow/tfx/releases">TFX</a> 0.29.0, 0.30.0</td>
<td>Visualizations not compatible<sup><a href="#fn1">1</a></sup></td>
<td>Metadata UI not compatible<sup><a href="#fn2">2</a></sup></td>
</tr>
<tr>
<td><a href="https://github.com/tensorflow/tfx/releases">TFX</a> 1.0.0</td>
<td>Metadata UI not compatible<sup><a href="#fn2">2</a></sup></td>
<td>Metadata UI not compatible<sup><a href="#fn2">2</a></sup></td>
</tr>
<tr>
<td><a href="https://github.com/tensorflow/tfx/releases">TFX</a> &gt;= 1.2.0</td>
<td>Metadata UI not compatible<sup><a href="#fn2">2</a></sup></td>
<td>Fully Compatible  ✅</td>
</tr>
</tbody>
</table>
<p>Detailed explanations:</p>
<p><a name="fn1">1.</a> <strong>Visualizations not compatible</strong>: Kubeflow Pipelines UI and TFDV, TFMA visualizations is not compatible. Visualizations throw an error in Kubeflow Pipelines UI.</p>
<p><a name="fn2">2.</a> <strong>Metadata UI not compatible</strong>: Kubeflow Pipelines UI and TFX recorded ML Metadata is not compatible. ML Metadata tab in run details page shows error message &ldquo;Corresponding ML Metadata not found&rdquo;. As a result, visualizations based on ML Metadata do not show up in visualizations tab either.</p>
<!--
Issues that caused the incompatibilities:
* TFX 1.0.0+
	* https://github.com/kubeflow/pipelines/issues/6138#issuecomment-898190223
	* https://github.com/kubeflow/pipelines/issues/6138#issuecomment-899917056
* TFX 0.29.0 https://github.com/tensorflow/tfx/issues/3933
-->

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark pt-3 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Kubeflow mailing list" aria-label="Kubeflow mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.kubeflow.org/docs/about/community/#kubeflow-mailing-list" aria-label="Kubeflow mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://twitter.com/kubeflow" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" rel="noopener" href="https://stackoverflow.com/questions/tagged/kubeflow" aria-label="Stack Overflow">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/GoogleCloudPlatform/kubeflow-distribution" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.kubeflow.org/docs/about/community/#kubeflow-slack" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-5 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2022 Google | Documentation Distributed under CC BY 4.0</small>
        <p><small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></small></p>
	
		<p class="mt-2"><a href="/kubeflow-docs/docs/about/">About</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="/kubeflow-docs/js/main.min.301c0110334bec1b4445867d27dc7dd69b2df859154ccf252005508bc860cc5a.js" integrity="sha256-MBwBEDNL7BtERYZ9J9x91pst&#43;FkVTM8lIAVQi8hgzFo=" crossorigin="anonymous"></script>
<script src='/kubeflow-docs/js/tabpane-persist.js'></script>

  </body>
</html>
