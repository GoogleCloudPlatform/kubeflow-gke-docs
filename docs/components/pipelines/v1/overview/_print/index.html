<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.105.0">
<link rel="canonical" type="text/html" href="https://gkcalat.github.io/kubeflow-docs/docs/components/pipelines/v1/overview/">
<link rel="alternate" type="application/rss&#43;xml" href="https://gkcalat.github.io/kubeflow-docs/docs/components/pipelines/v1/overview/index.xml">
<meta name="robots" content="noindex, nofollow">

<script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "WebSite",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/gkcalat.github.io\/kubeflow-docs"
      },
      "articleSection" : "docs",
      "name" : "Overview",
      "headline" : "Overview",
      "description" : "Overview of Kubeflow Pipelines",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "0001",
      "datePublished": "0001-01-01 00:00:00 \u002b0000 UTC",
      "dateModified" : "0001-01-01 00:00:00 \u002b0000 UTC",
      "url" : "https:\/\/gkcalat.github.io\/kubeflow-docs\/docs\/components\/pipelines\/v1\/overview\/",
      "wordCount" : "0",
      "keywords" : [ "Kubeflow" ]
  }
  </script>

<link rel="shortcut icon" href="/kubeflow-docs/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/kubeflow-docs/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/kubeflow-docs/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/kubeflow-docs/favicons/favicon-32x32.png" sizes="32x32">
<link rel="manifest" href="/kubeflow-docs/favicons/manifest.json">
<meta name="msapplication-config" content="/kubeflow-docs/favicons/browserconfig.xml" />
<meta name="msapplication-TileColor" content="#4279f4">
<meta name="theme-color" content="#4279f4">

<title>Overview | Kubeflow on Google Cloud Platform</title>
<meta name="description" content="Overview of Kubeflow Pipelines">
<meta property="og:title" content="Overview" />
<meta property="og:description" content="Overview of Kubeflow Pipelines" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://gkcalat.github.io/kubeflow-docs/docs/components/pipelines/v1/overview/" /><meta property="og:site_name" content="Kubeflow on Google Cloud Platform" />

<meta itemprop="name" content="Overview">
<meta itemprop="description" content="Overview of Kubeflow Pipelines"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Overview"/>
<meta name="twitter:description" content="Overview of Kubeflow Pipelines"/>




<link rel="preload" href="/kubeflow-docs/scss/main.min.5006b434b14f73c3d5537a7ba4c8ecef723ddc93f3a3c8530e19d24f75486ea9.css" as="style">
<link href="/kubeflow-docs/scss/main.min.5006b434b14f73c3d5537a7ba4c8ecef723ddc93f3a3c8530e19d24f75486ea9.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-GK9XL47N6S"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-GK9XL47N6S', { 'anonymize_ip': false });
}
</script>

  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand-md navbar-dark  td-navbar">
        <a class="navbar-brand" href="/kubeflow-docs/">
		<span class="navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 276.93 274.55"><g data-name="Layer 2"><g data-name="Layer 1"><path d="M95.9 62.15l4.1 102.1 73.75-94.12a6.79 6.79.0 019.6-1.11l46 36.92-15-65.61z" fill="#4279f4"/><path fill="#0028aa" d="M102.55 182.98h65.42l-40.17-32.23-25.25 32.23z"/><path fill="#014bd1" d="M180.18 83.92l-44 56.14 46.88 37.61 44.47-55.76-47.35-37.99z"/><path fill="#bedcff" d="M83.56 52.3l.01-.01 38.69-48.52-62.39 30.05-15.41 67.51 39.1-49.03z"/><path fill="#6ca1ff" d="M45.32 122.05l41.44 51.96-3.95-98.98-37.49 47.02z"/><path fill="#a1c3ff" d="M202.31 28.73 142.65.0l-37.13 46.56 96.79-17.83z"/><path d="M1.6 272v-44.78h5.74v23.41l20.48-23.41h6.4l-17.39 19.7 19 25.07H29.1l-15.92-20.8-5.84 6.65V272zm40.02-9.79V240h5.43v22.39a4.67 4.67.0 002.35 4.19 11 11 0 0011 0 4.69 4.69.0 002.33-4.19V240h5.43v22.19a9.08 9.08.0 01-4.1 7.87 16.2 16.2.0 01-18.37.0 9.07 9.07.0 01-4.07-7.85zM77.46 272v-48h5.43v16.81a29.29 29.29.0 019.32-1.73 13.1 13.1.0 016.2 1.41 10.71 10.71.0 014.18 3.74 18.07 18.07.0 012.23 5.06 21.26 21.26.0 01.73 5.58q0 8.43-4.38 12.79T87.35 272zm5.43-4.87h4.55q6.77.0 9.72-2.95t3-9.51a14.21 14.21.0 00-2-7.52 6.55 6.55.0 00-6-3.22 24.73 24.73.0 00-9.25 1.54zm29.47-11.19q0-7.71 4.09-12.3a13.75 13.75.0 0110.8-4.59q13.35.0 13.36 18.86h-22.82a12.3 12.3.0 002.9 7.07q2.59 3.11 7.9 3.1a24.92 24.92.0 0010.55-2v5a27.74 27.74.0 01-9.86 1.87 19.83 19.83.0 01-7.7-1.37 13.31 13.31.0 01-5.28-3.76 16.21 16.21.0 01-3-5.38 20.84 20.84.0 01-.94-6.5zm5.62-2.12h17.26a14.91 14.91.0 00-2.37-7.12 6.44 6.44.0 00-5.62-2.78 8.2 8.2.0 00-6.21 2.72 12.07 12.07.0 00-3.04 7.18z" fill="#4279f4" stroke="#4279f4" stroke-miterlimit="10" stroke-width="3.2"/><path d="M147.32 244.89V240h5v-7.59a8.14 8.14.0 012.31-6.05 7.79 7.79.0 015.69-2.28h7.86V229h-5c-2.21.0-3.67.45-4.37 1.34s-1.06 2.55-1.06 5V240h8.46v4.87h-8.46V272h-5.44v-27.1zM175.26 272v-48h5.43v48zm19.15-3.95a17.86 17.86.0 1112.33 4.9 16.57 16.57.0 01-12.33-4.9zm3.84-20.65a13.16 13.16.0 000 17.2 12.07 12.07.0 0017 0 13.09 13.09.0 000-17.2 12.07 12.07.0 00-17 0zm30.2-7.4h5.75l7.3 25.32 7.43-25.32h5.36l7.34 25.34L269 240h5.74l-10.04 32h-6.12l-6.83-24.58L245 272h-6.47z" fill="#0028aa" stroke="#0028aa" stroke-miterlimit="10" stroke-width="3.2"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Kubeflow on Google Cloud Platform</span>
	</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_navbar" aria-controls="main_navbar" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse ml-md-auto" id="main_navbar">
		<ul class="navbar-nav ml-auto pt-4 pt-md-0 my-2 my-md-1">
			
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kubeflow-docs/docs/" ><span>Docs</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kubeflow-docs/news/" ><span>News</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/GoogleCloudPlatform/kubeflow-distribution" target="_blank" ><i class='fa-brands fa-github pr-2'></i><span>Source</span></a>
			</li>
			
			
			<li class="nav-item dropdown mt-1 mt-lg-0 mr-2">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Releases
</a>
<div class="dropdown-menu dropdown-menu-md-right dropdown-menu-lg-left" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.6-release/docs">latest</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.6-release/docs">v1.6</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.5-release/docs">v1.5</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.4-release/docs">v1.4</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/main/docs">dev</a>
	
</div>

			</li>
			
			
		</ul>
	</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/kubeflow-docs/docs/components/pipelines/v1/overview/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Overview</h1>
<div class="lead">Overview of Kubeflow Pipelines</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-a148519f049b4d923d80c134d57a0da8">Quickstart</a></li>


    
  
    
    
	
<li>2: <a href="#pg-7c0f89103ef95403b48dd2aa13f731a1">Pipelines Interfaces</a></li>


    
  
    
    
	
<li>3: <a href="#pg-d3cec6965952a60c6a492aeee96e221b">Multi-user Isolation</a></li>


    
  
    
    
	
<li>4: <a href="#pg-0c82dc6780f69fb583c5e950c80d8417">Caching</a></li>


    
  
    
    
	
<li>5: <a href="#pg-c7e546e96cee0ce3e347c65d7ea674fc">Caching v2</a></li>


    
  
    
    
	
<li>6: <a href="#pg-4c9d3fedae9983188fafd2b5356887f7">Pipeline Root</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-a148519f049b4d923d80c134d57a0da8">1 - Quickstart</h1>
    <div class="lead">Getting started with Kubeflow Pipelines</div>
	<div class="alert alert-primary" role="alert">
This Kubeflow component has <b>stable</b> status. See the
<a href="/docs/started/support/#application-status">Kubeflow versioning policies</a>.
</div>
<p>Use this guide if you want to get an introduction to the Kubeflow Piplines user interface (UI) and get a simple pipeline running quickly.</p>
<p>The goal with this quickstart guide is to shows how to use two of the samples that come with
the Kubeflow Pipelines installation and are visible on the Kubeflow Pipelines
UI. You can use this guide as an introduction to the
Kubeflow Pipelines UI.</p>
<h2 id="deploy-kubeflow-and-open-the-kubeflow-pipelines-ui">Deploy Kubeflow and open the Kubeflow Pipelines UI</h2>
<p>There are several options to <a href="/docs/components/pipelines/installation/overview/">deploy Kubeflow Pipelines</a>, follow the option that best suits your needs. If you are uncertain and just want to try out kubeflow pipelines it is recommended to start with the <a href="/docs/components/pipelines/installation/standalone-deployment/">standalone deployment</a>.</p>
<p>Once you have deployed Kubeflow Pipelines, make sure you can access the UI. The steps to access the UI vary based on the method you used to deploy Kubeflow Pipelines.</p>
<h2 id="run-a-basic-pipeline">Run a basic pipeline</h2>
<p>Kubeflow Pipelines offers a few samples that you can use to try out
Kubeflow Pipelines quickly. The steps below show you how to run a basic sample that
includes some Python operations, but doesn&rsquo;t include a machine learning (ML)
workload:</p>
<ol>
<li>
<p>Click the name of the sample, <strong>[Tutorial] Data passing in python components</strong>, on the pipelines UI:
<img src="/docs/images/click-pipeline-sample.png" 
alt="Pipelines UI"
class="mt-3 mb-3 border border-info rounded"></p>
</li>
<li>
<p>Click <strong>Create experiment</strong>:
<img src="/docs/images/pipelines-start-experiment.png" 
alt="Creating an experiment on the pipelines UI"
class="mt-3 mb-3 border border-info rounded"></p>
</li>
<li>
<p>Follow the prompts to create an <strong>experiment</strong> and then create a <strong>run</strong>.
The sample supplies default values for all the parameters you need. The
following screenshot assumes you&rsquo;ve already created an experiment named
<em>My experiment</em> and are now creating a run named <em>My first run</em>:
<img src="/docs/images/pipelines-start-run.png" 
alt="Creating a run on the pipelines UI"
class="mt-3 mb-3 border border-info rounded"></p>
</li>
<li>
<p>Click <strong>Start</strong> to run the pipeline.</p>
</li>
<li>
<p>Click the name of the run on the experiments dashboard:
<img src="/docs/images/pipelines-experiments-dashboard.png" 
alt="Experiments dashboard on the pipelines UI"
class="mt-3 mb-3 border border-info rounded"></p>
</li>
<li>
<p>Explore the graph and other aspects of your run by clicking on the
components of the graph and the other UI elements:
<img src="/docs/images/pipelines-basic-run.png" 
alt="Run results on the pipelines UI"
class="mt-3 mb-3 border border-info rounded"></p>
</li>
</ol>
<p>You can find the <a href="https://github.com/kubeflow/pipelines/tree/sdk/release-1.8/samples/tutorials/Data%20passing%20in%20python%20components">source code for the <strong>Data passing in python components</strong> tutorial</a> in the Kubeflow Pipelines repo.</p>
<h2 id="run-an-ml-pipeline">Run an ML pipeline</h2>
<p>This section shows you how to run the XGBoost sample available
from the pipelines UI. Unlike the basic sample described above, the
XGBoost sample does include ML components.</p>
<p>Follow these steps to run the sample:</p>
<ol>
<li>
<p>Click the name of the sample,
<strong>[Demo] XGBoost - Iterative model training</strong>, on the pipelines UI:
<img src="/docs/images/click-xgboost-sample.png" 
alt="XGBoost sample on the pipelines UI"
class="mt-3 mb-3 border border-info rounded"></p>
</li>
<li>
<p>Click <strong>Create experiment</strong>.</p>
</li>
<li>
<p>Follow the prompts to create an <strong>experiment</strong> and then create a <strong>run</strong>.</p>
<p>The following screenshot shows the run details:
<img src="/docs/images/pipelines-start-xgboost-run.png" 
alt="Starting the XGBoost run on the pipelines UI"
class="mt-3 mb-3 border border-info rounded"></p>
</li>
<li>
<p>Click <strong>Start</strong> to create the run.</p>
</li>
<li>
<p>Click the name of the run on the experiments dashboard.</p>
</li>
<li>
<p>Explore the graph and other aspects of your run by clicking on the
components of the graph and the other UI elements. The following screenshot
shows part of the graph when the pipeline has finished running:
<img src="/docs/images/pipelines-xgboost-graph.png" 
alt="XGBoost results on the pipelines UI"
class="mt-3 mb-3 border border-info rounded"></p>
</li>
</ol>
<p>You can find the <a href="https://github.com/kubeflow/pipelines/tree/sdk/release-1.8/samples/core/xgboost_training_cm">source code for the <strong>XGBoost - Iterative model training</strong> demo</a> in the Kubeflow Pipelines repo.</p>
<h2 id="next-steps">Next steps</h2>
<ul>
<li>Learn more about the
<a href="/docs/pipelines/overview/concepts/">important concepts</a> in Kubeflow
Pipelines.</li>
<li>This page showed you how to run some of the examples supplied in the Kubeflow
Pipelines UI. Next, you may want to run a pipeline from a notebook, or compile
and run a sample from the code. See the guide to experimenting with
<a href="/docs/components/pipelines/tutorials/build-pipeline/">the Kubeflow Pipelines samples</a>.</li>
<li>Build your own machine-learning pipelines with the <a href="/docs/components/pipelines/sdk/sdk-overview/">Kubeflow Pipelines
SDK</a>.</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7c0f89103ef95403b48dd2aa13f731a1">2 - Pipelines Interfaces</h1>
    <div class="lead">The ways you can interact with the Kubeflow Pipelines system</div>
	<p>This page introduces the interfaces that you can use to build and run
machine learning (ML) workflows with Kubeflow Pipelines.</p>
<h2 id="user-interface-ui">User interface (UI)</h2>
<p>You can access the Kubeflow Pipelines UI by clicking <strong>Pipeline Dashboard</strong> on
the Kubeflow UI. The Kubeflow Pipelines UI looks like this:
<img src="/docs/images/pipelines/v1/pipelines-ui.png" 
alt="Pipelines UI"
class="mt-3 mb-3 border border-info rounded"></p>
<p>From the Kubeflow Pipelines UI you can perform the following tasks:</p>
<ul>
<li>Run one or more of the preloaded samples to try out pipelines quickly.</li>
<li>Upload a pipeline as a compressed file. The pipeline can be one that you
have built (see how to <a href="/docs/components/pipelines/sdk/build-pipeline/">build a
pipeline</a>) or one
that someone has shared with you.</li>
<li>Create an <em>experiment</em> to group one or more of your pipeline runs.
See the <a href="/docs/components/pipelines/concepts/experiment/">definition of an
experiment</a>.</li>
<li>Create and start a <em>run</em> within the experiment. A run is a single execution
of a pipeline. See the <a href="/docs/components/pipelines/concepts/run/">definition of a
run</a>.</li>
<li>Explore the configuration, graph, and output of your pipeline run.</li>
<li>Compare the results of one or more runs within an experiment.</li>
<li>Schedule runs by creating a recurring run.</li>
</ul>
<p>See the <a href="/docs/components/pipelines/overview/quickstart/">quickstart guide</a> for more
information about accessing the Kubeflow Pipelines UI and running the samples.</p>
<p>When building a pipeline component, you can write out information for display
in the UI. See the guides to <a href="/docs/components/pipelines/sdk/pipelines-metrics/">exporting
metrics</a> and <a href="/docs/components/pipelines/sdk/output-viewer/">visualizing results in
the UI</a>.</p>
<h2 id="python-sdk">Python SDK</h2>
<p>The Kubeflow Pipelines SDK provides a set of Python packages that you can use to
specify and run your ML workflows.</p>
<p>See the <a href="/docs/components/pipelines/sdk/sdk-overview/">introduction to the Kubeflow Pipelines
SDK</a> for an overview of the ways you can
use the SDK to build pipeline components and pipelines.</p>
<h2 id="rest-api">REST API</h2>
<p>The Kubeflow Pipelines API is useful for continuous integration/deployment
systems, for example, where you want to incorporate your pipeline executions
into shell scripts or other systems.
For example, you may want to trigger a pipeline run when new data comes in.</p>
<p>See the <a href="/docs/components/pipelines/reference/api/kubeflow-pipeline-api-spec/">Kubeflow Pipelines API reference
documentation</a>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d3cec6965952a60c6a492aeee96e221b">3 - Multi-user Isolation</h1>
    <div class="lead">How multi-user isolation works in Kubeflow Pipelines</div>
	<p>Multi-user isolation for Kubeflow Pipelines is part of Kubeflow&rsquo;s overall <a href="/docs/components/multi-tenancy/">multi-tenancy</a> feature.</p>


<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Tip</h4>

    <ul>
<li>Kubeflow Pipelines multi-user isolation is only supported in <a href="/docs/components/pipelines/installation/overview/#full-kubeflow-deployment">&ldquo;full&rdquo; Kubeflow deployments</a>.</li>
<li>Refer to <a href="/docs/components/multi-tenancy/getting-started/">Getting Started with Multi-user isolation</a> for the common Kubeflow multi-user operations
like <a href="/docs/components/multi-tenancy/getting-started/#managing-contributors-through-the-kubeflow-ui">Managing contributors</a>.</li>
</ul>


</div>

<h2 id="how-are-resources-separated">How are resources separated?</h2>
<p>Kubeflow Pipelines separates resources using Kubernetes namespaces that are managed by Kubeflow&rsquo;s <a href="/docs/components/multi-tenancy/overview/#key-concepts">Profile resources</a>.
Other users cannot see resources in your Profile/Namespace without permission, because the Kubeflow Pipelines API server
rejects requests for namespaces that the current user is not authorized to access.</p>
<p>&ldquo;Experiments&rdquo; belong to namespaces directly, runs and recurring runs belong to their parent experiment&rsquo;s namespace.</p>
<p>&ldquo;Pipeline Runs&rdquo; are executed in user namespaces, so that users can leverage Kubernetes namespace isolation.
For example, they can configure different secrets for other services in different namespaces.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    Kubeflow makes no hard security guarantees about Profile isolation.
<br>
User profiles have no additional isolation beyond what is provided by Kubernetes Namespaces.

</div>

<h2 id="when-using-the-ui">When using the UI</h2>
<p>When you visit the Kubeflow Pipelines UI from the Kubeflow Dashboard, it only shows &ldquo;experiments&rdquo;, &ldquo;runs&rdquo;, and &ldquo;recurring runs&rdquo; in your chosen namespace.
Similarly, when you create resources from the UI, they also belong to the namespace you have chosen.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    Pipeline definitions are not isolated right now, and are shared across all namespaces, see <a href="#current-limitations">Current Limitations</a> for more details.

</div>

<h2 id="when-using-the-sdk">When using the SDK</h2>
<p>How to connect Pipelines SDK to Kubeflow Pipelines will depend on <strong>what kind</strong> of Kubeflow deployment you have, and <strong>from where you are running your code</strong>.</p>
<ul>
<li><a href="/docs/components/pipelines/sdk/connect-api/#full-kubeflow-subfrom-inside-clustersub">Full Kubeflow (from inside cluster)</a></li>
<li><a href="/docs/components/pipelines/sdk/connect-api/#full-kubeflow-subfrom-outside-clustersub">Full Kubeflow (from outside cluster)</a></li>
<li><a href="/docs/components/pipelines/sdk/connect-api/#standalone-kubeflow-pipelines-subfrom-inside-clustersub">Standalone Kubeflow Pipelines (from inside cluster)</a></li>
<li><a href="/docs/components/pipelines/sdk/connect-api/#standalone-kubeflow-pipelines-subfrom-outside-clustersub">Standalone Kubeflow Pipelines (from outside cluster)</a></li>
</ul>
<p>The following Python code will create an experiment (and associated run) from a Pod inside a full Kubeflow cluster.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">kfp</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># the namespace in which you deployed Kubeflow Pipelines</span>
</span></span><span class="line"><span class="cl"><span class="n">kubeflow_namespace</span> <span class="o">=</span> <span class="s2">&#34;kubeflow&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># the namespace of your pipelines user (where the pipeline will be executed)</span>
</span></span><span class="line"><span class="cl"><span class="n">user_namespace</span> <span class="o">=</span> <span class="s2">&#34;jane-doe&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># the KF_PIPELINES_SA_TOKEN_PATH environment variable is used when no `path` is set</span>
</span></span><span class="line"><span class="cl"><span class="c1"># the default KF_PIPELINES_SA_TOKEN_PATH is /var/run/secrets/kubeflow/pipelines/token</span>
</span></span><span class="line"><span class="cl"><span class="n">credentials</span> <span class="o">=</span> <span class="n">kfp</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">ServiceAccountTokenVolumeCredentials</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create a client</span>
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="o">=</span> <span class="n">kfp</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="sa">f</span><span class="s2">&#34;http://ml-pipeline-ui.</span><span class="si">{</span><span class="n">kubeflow_namespace</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create an experiment</span>
</span></span><span class="line"><span class="cl"><span class="n">client</span><span class="o">.</span><span class="n">create_experiment</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;&lt;YOUR_EXPERIMENT_ID&gt;&#34;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">user_namespace</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">list_experiments</span><span class="p">(</span><span class="n">namespace</span><span class="o">=</span><span class="n">user_namespace</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create a pipeline run</span>
</span></span><span class="line"><span class="cl"><span class="n">client</span><span class="o">.</span><span class="n">run_pipeline</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">experiment_id</span><span class="o">=</span><span class="s2">&#34;&lt;YOUR_EXPERIMENT_ID&gt;&#34;</span><span class="p">,</span>  <span class="c1"># the experiment determines the namespace</span>
</span></span><span class="line"><span class="cl">    <span class="n">job_name</span><span class="o">=</span><span class="s2">&#34;&lt;YOUR_RUN_NAME&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">pipeline_id</span><span class="o">=</span><span class="s2">&#34;&lt;YOUR_PIPELINE_ID&gt;&#34;</span>  <span class="c1"># the pipeline definition to run</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">list_runs</span><span class="p">(</span><span class="n">experiment_id</span><span class="o">=</span><span class="s2">&#34;&lt;YOUR_EXPERIMENT_ID&gt;&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">list_runs</span><span class="p">(</span><span class="n">namespace</span><span class="o">=</span><span class="n">user_namespace</span><span class="p">))</span>
</span></span></code></pre></div>

<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Tip</h4>

    <ul>
<li>To set a default namespace for Pipelines SDK commands, use the <a href="https://kubeflow-pipelines.readthedocs.io/en/stable/source/kfp.client.html#kfp.Client.set_user_namespace"><code>kfp.Client().set_user_namespace()</code></a> method,
this method stores your user namespace in a configuration file at <code>$HOME/.config/kfp/context.json</code>.</li>
<li>Detailed documentation for <code>kfp.Client()</code> can be found in the <a href="https://kubeflow-pipelines.readthedocs.io/en/stable/source/kfp.client.html">Kubeflow Pipelines SDK Reference</a>.</li>
</ul>


</div>

<h2 id="when-using-the-rest-api">When using the REST API</h2>
<p>When calling the <a href="/docs/components/pipelines/reference/api/kubeflow-pipeline-api-spec/">Kubeflow Pipelines REST API</a>, a namespace argument is required for experiment APIs.
<br>
The namespace is specified by a &ldquo;resource reference&rdquo; with <code>type</code> of <code>NAMESPACE</code> and <code>key.id</code> equal to the namespace name.</p>
<p>The following code uses the <a href="https://kubeflow-pipelines.readthedocs.io/en/stable/source/kfp.server_api.html">generated python API client</a> to create an experiment and pipeline run.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">kfp</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">kfp_server_api</span> <span class="kn">import</span> <span class="o">*</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># the namespace in which you deployed Kubeflow Pipelines</span>
</span></span><span class="line"><span class="cl"><span class="n">kubeflow_namespace</span> <span class="o">=</span> <span class="s2">&#34;kubeflow&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># the namespace of your pipelines user (where the pipeline will be executed)</span>
</span></span><span class="line"><span class="cl"><span class="n">user_namespace</span> <span class="o">=</span> <span class="s2">&#34;jane-doe&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># the KF_PIPELINES_SA_TOKEN_PATH environment variable is used when no `path` is set</span>
</span></span><span class="line"><span class="cl"><span class="c1"># the default KF_PIPELINES_SA_TOKEN_PATH is /var/run/secrets/kubeflow/pipelines/token</span>
</span></span><span class="line"><span class="cl"><span class="n">credentials</span> <span class="o">=</span> <span class="n">kfp</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">ServiceAccountTokenVolumeCredentials</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create a client</span>
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="o">=</span> <span class="n">kfp</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="sa">f</span><span class="s2">&#34;http://ml-pipeline-ui.</span><span class="si">{</span><span class="n">kubeflow_namespace</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create an experiment</span>
</span></span><span class="line"><span class="cl"><span class="n">experiment</span><span class="p">:</span> <span class="n">ApiExperiment</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">_experiment_api</span><span class="o">.</span><span class="n">create_experiment</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">body</span><span class="o">=</span><span class="n">ApiExperiment</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">name</span><span class="o">=</span><span class="s2">&#34;&lt;YOUR_EXPERIMENT_ID&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">resource_references</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="n">ApiResourceReference</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">key</span><span class="o">=</span><span class="n">ApiResourceKey</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">id</span><span class="o">=</span><span class="n">user_namespace</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">type</span><span class="o">=</span><span class="n">ApiResourceType</span><span class="o">.</span><span class="n">NAMESPACE</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">),</span>
</span></span><span class="line"><span class="cl">                <span class="n">relationship</span><span class="o">=</span><span class="n">ApiRelationship</span><span class="o">.</span><span class="n">OWNER</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;-------- BEGIN: EXPERIMENT --------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">experiment</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;-------- END: EXPERIMENT ----------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># get the experiment by name (only necessary if you comment out the `create_experiment()` call)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># experiment: ApiExperiment = client.get_experiment(</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     experiment_name=&#34;&lt;YOUR_EXPERIMENT_ID&gt;&#34;,</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     namespace=user_namespace</span>
</span></span><span class="line"><span class="cl"><span class="c1"># )</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create a pipeline run</span>
</span></span><span class="line"><span class="cl"><span class="n">run</span><span class="p">:</span> <span class="n">ApiRunDetail</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">_run_api</span><span class="o">.</span><span class="n">create_run</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">body</span><span class="o">=</span><span class="n">ApiRun</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">name</span><span class="o">=</span><span class="s2">&#34;&lt;YOUR_RUN_NAME&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">pipeline_spec</span><span class="o">=</span><span class="n">ApiPipelineSpec</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># replace &lt;YOUR_PIPELINE_ID&gt; with the UID of a pipeline definition you have previously uploaded</span>
</span></span><span class="line"><span class="cl">            <span class="n">pipeline_id</span><span class="o">=</span><span class="s2">&#34;&lt;YOUR_PIPELINE_ID&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="n">resource_references</span><span class="o">=</span><span class="p">[</span><span class="n">ApiResourceReference</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">key</span><span class="o">=</span><span class="n">ApiResourceKey</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="nb">id</span><span class="o">=</span><span class="n">experiment</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nb">type</span><span class="o">=</span><span class="n">ApiResourceType</span><span class="o">.</span><span class="n">EXPERIMENT</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">relationship</span><span class="o">=</span><span class="n">ApiRelationship</span><span class="o">.</span><span class="n">OWNER</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;-------- BEGIN: RUN --------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">run</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;-------- END: RUN ----------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># view the pipeline run</span>
</span></span><span class="line"><span class="cl"><span class="n">runs</span><span class="p">:</span> <span class="n">ApiListRunsResponse</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">_run_api</span><span class="o">.</span><span class="n">list_runs</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">resource_reference_key_type</span><span class="o">=</span><span class="n">ApiResourceType</span><span class="o">.</span><span class="n">EXPERIMENT</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">resource_reference_key_id</span><span class="o">=</span><span class="n">experiment</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;-------- BEGIN: RUNS --------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">runs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;-------- END: RUNS ----------&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="current-limitations">Current limitations</h2>
<h3 id="resources-without-isolation">Resources without isolation</h3>
<p>The following resources do not currently support isolation and are shared without access control:</p>
<ul>
<li>Pipelines (Pipeline definitions).</li>
<li>Artifacts, Executions, and other metadata entities in <a href="https://www.tensorflow.org/tfx/guide/mlmd">Machine Learning Metadata (MLMD)</a>.</li>
<li><a href="https://min.io/">Minio artifact storage</a> which contains pipeline runs&rsquo; input/output artifacts.</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0c82dc6780f69fb583c5e950c80d8417">4 - Caching</h1>
    <div class="lead">Getting started with Kubeflow Pipelines step caching</div>
	<div class="alert alert-warning" role="alert">
  <h4 class="alert-heading">Alpha</h4>
  This Kubeflow component has <b>alpha</b> status with limited support. See the
  <a href="/docs/started/support/#application-status">Kubeflow versioning policies</a>.
  The Kubeflow team is interested in your   
  <a href="https://github.com/kubeflow/pipelines/issues">feedback</a></h4> 
  about the usability of the feature.
</div>
<p>Starting from Kubeflow Pipelines 0.4, Kubeflow Pipelines supports step caching capabilities in both standalone deployment and AI Platform Pipelines.</p>
<h2 id="before-you-start">Before you start</h2>
<p>This guide tells you the basic concepts of Kubeflow Pipelines step caching and how to use it.
This guide assumes that you already have Kubeflow Pipelines installed or want to use options in the <a href="/docs/components/pipelines/installation/">Kubeflow Pipelines deployment guide</a> to deploy Kubeflow Pipelines.</p>
<h2 id="what-is-step-caching">What is step caching?</h2>
<p>Kubeflow Pipelines caching provides step-level output caching.
And caching is enabled by default for all pipelines submitted through the KFP backend and UI.
The exception is pipelines authored using TFX SDK which has its own caching mechanism.
The cache key calculation is based on the component (base image, command-line, code), arguments passed to the component (values or artifacts) and any additional customizations.
If the component is exactly the same and the arguments are exactly the same as in some previous execution, then the task can be skipped and the outputs of the old step can be used.
The cache reuse behavior can be controlled and the pipeline author can specify the maximum staleness of the cached data considered for reuse.
With caching enabled, the system can skip a step that has already been executed which saves time and money.</p>
<h2 id="disablingenabling-caching">Disabling/enabling caching</h2>
<p>Cache is enabled by default after Kubeflow Pipelines 0.4.
These are instructions on disabling and enabling cache service:</p>
<h3 id="configure-access-to-your-kubeflow-cluster">Configure access to your Kubeflow cluster</h3>
<p>Use the following instructions to configure <code>kubectl</code> with access to your
Kubeflow cluster.</p>
<ol>
<li>
<p>To check if you have <code>kubectl</code> installed, run the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">which kubectl
</span></span></code></pre></div><p>The response should be something like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">/usr/bin/kubectl
</span></span></code></pre></div><p>If you do not have <code>kubectl</code> installed, follow the instructions in the
guide to <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">installing and setting up kubectl</a>.</p>
</li>
<li>
<p>Follow the <a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/">guide to configuring access to Kubernetes
clusters</a>.</p>
</li>
</ol>
<h3 id="disabling-caching-in-your-kubeflow-pipelines-deployment">Disabling caching in your Kubeflow Pipelines deployment:</h3>
<ol>
<li>
<p>Make sure <code>mutatingwebhookconfiguration</code> exists in your cluster:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">export NAMESPACE=&lt;Namespace where KFP is installed&gt;
</span></span><span class="line"><span class="cl">kubectl get mutatingwebhookconfiguration cache-webhook-${NAMESPACE}
</span></span></code></pre></div></li>
<li>
<p>Change <code>mutatingwebhookconfiguration</code> rules:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl patch mutatingwebhookconfiguration cache-webhook-${NAMESPACE} --type=&#39;json&#39; -p=&#39;[{&#34;op&#34;:&#34;replace&#34;, &#34;path&#34;: &#34;/webhooks/0/rules/0/operations/0&#34;, &#34;value&#34;: &#34;DELETE&#34;}]&#39;
</span></span></code></pre></div></li>
</ol>
<h3 id="enabling-caching">Enabling caching</h3>
<ol>
<li>
<p>Make sure <code>mutatingwebhookconfiguration</code> exists in your cluster:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">export NAMESPACE=&lt;Namespace where KFP is installed&gt;
</span></span><span class="line"><span class="cl">kubectl get mutatingwebhookconfiguration cache-webhook-${NAMESPACE}
</span></span></code></pre></div></li>
<li>
<p>Change back <code>mutatingwebhookconfiguration</code> rules:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl patch mutatingwebhookconfiguration cache-webhook-${NAMESPACE} --type=&#39;json&#39; -p=&#39;[{&#34;op&#34;:&#34;replace&#34;, &#34;path&#34;: &#34;/webhooks/0/rules/0/operations/0&#34;, &#34;value&#34;: &#34;CREATE&#34;}]&#39;
</span></span></code></pre></div></li>
</ol>
<h2 id="managing-caching-staleness">Managing caching staleness</h2>
<p>The cache is enabled by default and if you ever executed same component with the same arguments, any new execution of the component will be skipped and the outputs will be taken from the cache.
For some scenarios, the cached output data of some components might become too stale for use after some time.
To control the maximum staleness of the reused cached data, you can set the step&rsquo;s <code>max_cache_staleness</code> parameter.
The <code>max_cache_staleness</code> is in <a href="https://www.ietf.org/rfc/rfc3339.txt">RFC3339 Duration</a> format (so 30 days = &ldquo;P30D&rdquo;).
By default the <code>max_cache_staleness</code> is set to infinity so any old cached data will be reused.</p>
<p>Set <code>max_cache_staleness</code> to 30 days for a step:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">def some_pipeline():
</span></span><span class="line"><span class="cl">      # task is a target step in a pipeline
</span></span><span class="line"><span class="cl">      task = some_op()
</span></span><span class="line"><span class="cl">      task.execution_options.caching_strategy.max_cache_staleness = &#34;P30D&#34;
</span></span></code></pre></div><p>Ideally, the component code should be pure and deterministic in the sense that it produces same outputs given same inputs.
If your component is not deterministic (for example, it returns a different random number on every invocation) you might want to disable caching for the tasks created from this component by setting <code>max_cache_staleness</code> to 0:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">def some_pipeline():
</span></span><span class="line"><span class="cl">      # task is a target step in a pipeline
</span></span><span class="line"><span class="cl">      task_never_use_cache = some_op()
</span></span><span class="line"><span class="cl">      task_never_use_cache.execution_options.caching_strategy.max_cache_staleness = &#34;P0D&#34;
</span></span></code></pre></div><p>A better solution would be to make the component deterministic. If the component uses random number generation, you can expose the RNG seed as a component input. If the component fetches some changing data you can add a timestamp or date input.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c7e546e96cee0ce3e347c65d7ea674fc">5 - Caching v2</h1>
    <div class="lead">Getting started with Kubeflow Pipelines caching v2</div>
	<div class="alert alert-warning" role="alert">
  <h4 class="alert-heading">Beta</h4>
  This Kubeflow component has <b>beta</b> status. See the
  <a href="/docs/started/support/#application-status">Kubeflow versioning policies</a>.
  The Kubeflow team is interested in your   
  <a href="https://github.com/kubeflow/pipelines/issues">feedback</a></h4> 
  about the usability of the feature.
</div>
<p>Starting from <a href="https://www.kubeflow.org/docs/components/pipelines/sdk-v2/">Kubeflow Pipelines SDK v2</a> and Kubeflow Pipelines 1.7.0, Kubeflow Pipelines supports step caching capabilities in both <a href="https://www.kubeflow.org/docs/components/pipelines/installation/standalone-deployment/">standalone deployment</a> and <a href="https://cloud.google.com/ai-platform/pipelines/docs">AI Platform Pipelines</a>.</p>
<h2 id="before-you-start">Before you start</h2>
<p>This guide tells you the basic concepts of Kubeflow Pipelines caching and how to use it.
This guide assumes that you already have Kubeflow Pipelines installed or want to use standalone or AI Platform Pipelines options in the <a href="/docs/components/pipelines/installation/">Kubeflow Pipelines deployment
guide</a> to deploy Kubeflow Pipelines.</p>
<h2 id="what-is-step-caching">What is step caching?</h2>
<p>Kubeflow Pipelines caching provides step-level output caching, a process that helps to reduce costs by skipping computations that were completed in a previous pipeline run.
Caching is enabled by default for all tasks of pipelines built with <a href="https://www.kubeflow.org/docs/components/pipelines/sdk-v2/">Kubeflow Pipelines SDK v2</a> using <code>kfp.dsl.PipelineExecutionMode.V2_COMPATIBLE</code> mode.
When Kubeflow Pipeline runs a pipeline, it checks to see whether
an execution exists in Kubeflow Pipeline with the interface of each pipeline task.
The task&rsquo;s interface is defined as the combination of the pipeline task specification (base image, command, args), the pipeline task&rsquo;s inputs (the name and id of artifacts, the name and value of parameters),
and the pipeline task&rsquo;s outputs specification (artifacts and parameters).
Note: If the producer task which generates an artifact is not cached, then the producer task will generate a new artifact with different ID, and downstream task which uses the artifact generated by the producer task won&rsquo;t hit cache.</p>
<p>If there is a matching execution in Kubeflow Pipelines, the outputs of that execution are used, and the task is skipped. An example of cache being hit:</p>
<p><img src="/docs/images/pipelines/v1/v2-compatible/cacheicon.png" 
alt="Cache is hit on KFPv2 pipelines"
class="mt-3 mb-3 border border-info rounded"></p>
<h2 id="disablingenabling-caching">Disabling/enabling caching</h2>
<p>Cache is enabled by default with <a href="https://www.kubeflow.org/docs/components/pipelines/sdk-v2/">Kubeflow Pipelines SDK v2</a> using <code>kfp.dsl.PipelineExecutionMode.V2_COMPATIBLE</code> mode.</p>
<p>You can turn off execution caching for pipeline runs that are created using Python. When you run a pipeline using <a href="https://kubeflow-pipelines.readthedocs.io/en/latest/source/kfp.client.html#kfp.Client.create_run_from_pipeline_func">create_run_from_pipeline_func</a> or <a href="https://kubeflow-pipelines.readthedocs.io/en/latest/source/kfp.client.html#kfp.Client.create_run_from_pipeline_package">create_run_from_pipeline_package</a> or <a href="https://kubeflow-pipelines.readthedocs.io/en/latest/source/kfp.client.html#kfp.Client.run_pipeline,">run_pipeline</a> you can use the <code>enable_caching</code> argument to specify that this pipeline run does not use caching.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-4c9d3fedae9983188fafd2b5356887f7">6 - Pipeline Root</h1>
    <div class="lead">Getting started with Kubeflow Pipelines pipeline root</div>
	<div class="alert alert-warning" role="alert">
  <h4 class="alert-heading">Beta</h4>
  This Kubeflow component has <b>beta</b> status. See the
  <a href="/docs/started/support/#application-status">Kubeflow versioning policies</a>.
  The Kubeflow team is interested in your   
  <a href="https://github.com/kubeflow/pipelines/issues">feedback</a></h4> 
  about the usability of the feature.
</div>
<p>Starting from <a href="https://www.kubeflow.org/docs/components/pipelines/sdk-v2/">Kubeflow Pipelines SDK v2</a> and Kubeflow Pipelines 1.7.0, Kubeflow Pipelines supports a new intermediate artifact repository feature: pipeline root in both <a href="https://www.kubeflow.org/docs/components/pipelines/installation/standalone-deployment/">standalone deployment</a> and <a href="https://cloud.google.com/ai-platform/pipelines/docs">AI Platform Pipelines</a>.</p>
<h2 id="before-you-start">Before you start</h2>
<p>This guide tells you the basic concepts of Kubeflow Pipelines pipeline root and how to use it.
This guide assumes that you already have Kubeflow Pipelines installed, or want to use standalone or AI Platform Pipelines options in the <a href="/docs/components/pipelines/installation/">Kubeflow Pipelines deployment
guide</a> to deploy Kubeflow Pipelines.</p>
<h2 id="what-is-pipeline-root">What is pipeline root?</h2>
<p>Pipeline root represents an artifact repository where Kubeflow Pipelines stores a pipeline&rsquo;s artifacts.
This feature supports MinIO, S3, GCS natively using <a href="https://github.com/google/go-cloud">Go CDK</a>. Artifacts can be more accessible in S3 and GCS when integrating Kubeflow Pipelines with other systems.</p>
<p><strong>Note:</strong> For MinIO, you can&rsquo;t change the MinIO instance. Kubeflow Pipelines can only use the Minio instance deployed with itself.
(Please thumb up this <a href="https://github.com/kubeflow/pipelines/issues/6517">GitHub Issue</a> if you need to specify the Minio instance.)</p>
<h2 id="how-to-configure-pipeline-root-authentication">How to configure pipeline root authentication</h2>
<h4 id="minio">MinIO</h4>
<p>You don&rsquo;t need to pass the authentication for MinIO.
Kubeflow Pipelines is configured with the authentication of the MinIO instance deployed with itself.</p>
<h4 id="gcs">GCS</h4>
<p>If you want to specify the <code>pipeline root</code> to GCS :</p>
<p>check <a href="https://www.kubeflow.org/docs/distributions/gke/pipelines/authentication-pipelines/">authentication-pipelines</a></p>
<h4 id="s3">S3</h4>
<p>If you want to specify the <code>pipeline root</code> to S3, please choose one of the following options:</p>
<ul>
<li>
<p>Via <a href="https://aws.amazon.com/blogs/containers/cross-account-iam-roles-for-kubernetes-service-accounts/">AWS IRSA</a>:</p>
</li>
<li>
<p>Via kfp sdk:
<code>dsl.get_pipeline_conf().add_op_transformer(aws.use_aws_secret('xxx', xxx, xxx))</code></p>
</li>
</ul>
<p><strong>references</strong>:</p>
<ul>
<li><a href="https://kubeflow-pipelines.readthedocs.io/en/latest/source/kfp.dsl.html#kfp.dsl.PipelineConf.add_op_transformer">add-op-transformer</a></li>
<li><a href="https://kubeflow-pipelines.readthedocs.io/en/latest/source/kfp.extensions.html#kfp.aws.use_aws_secret">use-aws-secret</a></li>
</ul>
<h2 id="how-to-configure-pipeline-root">How to configure pipeline root</h2>
<h4 id="via-configmaps">Via ConfigMaps</h4>
<p>You can configure default pipeline root for Kubeflow Pipelines via changing the <code>defaultPipelineRoot</code> entry of  ConfigMaps <code>kfp-launcher</code> in Kubernetes namespace.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kubectl edit configMap kfp-launcher -n <span class="si">${</span><span class="nv">namespace</span><span class="si">}</span>
</span></span></code></pre></div><p>This pipeline root will be the default pipeline root for all pipelines running in the Kubernetes namespace unless you override it using one of the following options:</p>
<h4 id="via-building-pipelines">Via Building Pipelines</h4>
<p>You can configure a pipeline root through the <code>kfp.dsl.pipeline</code> annotation when <a href="https://www.kubeflow.org/docs/components/pipelines/sdk-v2/build-pipeline/#build-your-pipeline">building pipelines</a></p>
<h4 id="via-submitting-a-pipeline-through-sdk">Via Submitting a Pipeline through SDK</h4>
<p>You can configure pipeline root via <code>pipeline_root</code> argument when you submit a Pipeline using one of the following:</p>
<ul>
<li><a href="https://kubeflow-pipelines.readthedocs.io/en/latest/source/kfp.client.html#kfp.Client.create_run_from_pipeline_func">create_run_from_pipeline_func</a></li>
<li><a href="https://kubeflow-pipelines.readthedocs.io/en/latest/source/kfp.client.html#kfp.Client.create_run_from_pipeline_package">create_run_from_pipeline_package</a></li>
<li><a href="https://kubeflow-pipelines.readthedocs.io/en/latest/source/kfp.client.html#kfp.Client.run_pipeline">run_pipeline</a>.</li>
</ul>
<h4 id="via-submitting-a-pipeline-run-through-ui">Via Submitting a Pipeline Run through UI</h4>
<p>You can configure a pipeline root via the <code>pipeline_root</code> run parameters when you submit a pipeline run in the UI
<img src="/docs/images/pipelines/v1/v2-compatible/pipelines-ui-pipelineroot.png"
alt="Configure pipeline root on the pipelines UI"
class="mt-3 mb-3 border border-info rounded"></p>

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark pt-3 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Kubeflow mailing list" aria-label="Kubeflow mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.kubeflow.org/docs/about/community/#kubeflow-mailing-list" aria-label="Kubeflow mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://twitter.com/kubeflow" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" rel="noopener" href="https://stackoverflow.com/questions/tagged/kubeflow" aria-label="Stack Overflow">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/GoogleCloudPlatform/kubeflow-distribution" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.kubeflow.org/docs/about/community/#kubeflow-slack" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-5 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2022 Google | Documentation Distributed under CC BY 4.0</small>
        <p><small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></small></p>
	
		<p class="mt-2"><a href="/kubeflow-docs/docs/about/">About</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="/kubeflow-docs/js/main.min.301c0110334bec1b4445867d27dc7dd69b2df859154ccf252005508bc860cc5a.js" integrity="sha256-MBwBEDNL7BtERYZ9J9x91pst&#43;FkVTM8lIAVQi8hgzFo=" crossorigin="anonymous"></script>
<script src='/kubeflow-docs/js/tabpane-persist.js'></script>

  </body>
</html>
