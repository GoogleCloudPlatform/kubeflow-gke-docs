<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.105.0">
<link rel="canonical" type="text/html" href="https://gkcalat.github.io/kubeflow-docs/docs/components/pipelines/v1/tutorials/">
<link rel="alternate" type="application/rss&#43;xml" href="https://gkcalat.github.io/kubeflow-docs/docs/components/pipelines/v1/tutorials/index.xml">
<meta name="robots" content="noindex, nofollow">

<script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "WebSite",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/gkcalat.github.io\/kubeflow-docs"
      },
      "articleSection" : "docs",
      "name" : "Samples and Tutorials",
      "headline" : "Samples and Tutorials",
      "description" : "Samples and tutorials for Kubeflow Pipelines",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "0001",
      "datePublished": "0001-01-01 00:00:00 \u002b0000 UTC",
      "dateModified" : "0001-01-01 00:00:00 \u002b0000 UTC",
      "url" : "https:\/\/gkcalat.github.io\/kubeflow-docs\/docs\/components\/pipelines\/v1\/tutorials\/",
      "wordCount" : "0",
      "keywords" : [ "Kubeflow" ]
  }
  </script>

<link rel="shortcut icon" href="/kubeflow-docs/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/kubeflow-docs/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/kubeflow-docs/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/kubeflow-docs/favicons/favicon-32x32.png" sizes="32x32">
<link rel="manifest" href="/kubeflow-docs/favicons/manifest.json">
<meta name="msapplication-config" content="/kubeflow-docs/favicons/browserconfig.xml" />
<meta name="msapplication-TileColor" content="#4279f4">
<meta name="theme-color" content="#4279f4">

<title>Samples and Tutorials | Kubeflow on Google Cloud Platform</title>
<meta name="description" content="Samples and tutorials for Kubeflow Pipelines">
<meta property="og:title" content="Samples and Tutorials" />
<meta property="og:description" content="Samples and tutorials for Kubeflow Pipelines" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://gkcalat.github.io/kubeflow-docs/docs/components/pipelines/v1/tutorials/" /><meta property="og:site_name" content="Kubeflow on Google Cloud Platform" />

<meta itemprop="name" content="Samples and Tutorials">
<meta itemprop="description" content="Samples and tutorials for Kubeflow Pipelines"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Samples and Tutorials"/>
<meta name="twitter:description" content="Samples and tutorials for Kubeflow Pipelines"/>




<link rel="preload" href="/kubeflow-docs/scss/main.min.5006b434b14f73c3d5537a7ba4c8ecef723ddc93f3a3c8530e19d24f75486ea9.css" as="style">
<link href="/kubeflow-docs/scss/main.min.5006b434b14f73c3d5537a7ba4c8ecef723ddc93f3a3c8530e19d24f75486ea9.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-GK9XL47N6S"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-GK9XL47N6S', { 'anonymize_ip': false });
}
</script>

  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand-md navbar-dark  td-navbar">
        <a class="navbar-brand" href="/kubeflow-docs/">
		<span class="navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 276.93 274.55"><g data-name="Layer 2"><g data-name="Layer 1"><path d="M95.9 62.15l4.1 102.1 73.75-94.12a6.79 6.79.0 019.6-1.11l46 36.92-15-65.61z" fill="#4279f4"/><path fill="#0028aa" d="M102.55 182.98h65.42l-40.17-32.23-25.25 32.23z"/><path fill="#014bd1" d="M180.18 83.92l-44 56.14 46.88 37.61 44.47-55.76-47.35-37.99z"/><path fill="#bedcff" d="M83.56 52.3l.01-.01 38.69-48.52-62.39 30.05-15.41 67.51 39.1-49.03z"/><path fill="#6ca1ff" d="M45.32 122.05l41.44 51.96-3.95-98.98-37.49 47.02z"/><path fill="#a1c3ff" d="M202.31 28.73 142.65.0l-37.13 46.56 96.79-17.83z"/><path d="M1.6 272v-44.78h5.74v23.41l20.48-23.41h6.4l-17.39 19.7 19 25.07H29.1l-15.92-20.8-5.84 6.65V272zm40.02-9.79V240h5.43v22.39a4.67 4.67.0 002.35 4.19 11 11 0 0011 0 4.69 4.69.0 002.33-4.19V240h5.43v22.19a9.08 9.08.0 01-4.1 7.87 16.2 16.2.0 01-18.37.0 9.07 9.07.0 01-4.07-7.85zM77.46 272v-48h5.43v16.81a29.29 29.29.0 019.32-1.73 13.1 13.1.0 016.2 1.41 10.71 10.71.0 014.18 3.74 18.07 18.07.0 012.23 5.06 21.26 21.26.0 01.73 5.58q0 8.43-4.38 12.79T87.35 272zm5.43-4.87h4.55q6.77.0 9.72-2.95t3-9.51a14.21 14.21.0 00-2-7.52 6.55 6.55.0 00-6-3.22 24.73 24.73.0 00-9.25 1.54zm29.47-11.19q0-7.71 4.09-12.3a13.75 13.75.0 0110.8-4.59q13.35.0 13.36 18.86h-22.82a12.3 12.3.0 002.9 7.07q2.59 3.11 7.9 3.1a24.92 24.92.0 0010.55-2v5a27.74 27.74.0 01-9.86 1.87 19.83 19.83.0 01-7.7-1.37 13.31 13.31.0 01-5.28-3.76 16.21 16.21.0 01-3-5.38 20.84 20.84.0 01-.94-6.5zm5.62-2.12h17.26a14.91 14.91.0 00-2.37-7.12 6.44 6.44.0 00-5.62-2.78 8.2 8.2.0 00-6.21 2.72 12.07 12.07.0 00-3.04 7.18z" fill="#4279f4" stroke="#4279f4" stroke-miterlimit="10" stroke-width="3.2"/><path d="M147.32 244.89V240h5v-7.59a8.14 8.14.0 012.31-6.05 7.79 7.79.0 015.69-2.28h7.86V229h-5c-2.21.0-3.67.45-4.37 1.34s-1.06 2.55-1.06 5V240h8.46v4.87h-8.46V272h-5.44v-27.1zM175.26 272v-48h5.43v48zm19.15-3.95a17.86 17.86.0 1112.33 4.9 16.57 16.57.0 01-12.33-4.9zm3.84-20.65a13.16 13.16.0 000 17.2 12.07 12.07.0 0017 0 13.09 13.09.0 000-17.2 12.07 12.07.0 00-17 0zm30.2-7.4h5.75l7.3 25.32 7.43-25.32h5.36l7.34 25.34L269 240h5.74l-10.04 32h-6.12l-6.83-24.58L245 272h-6.47z" fill="#0028aa" stroke="#0028aa" stroke-miterlimit="10" stroke-width="3.2"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Kubeflow on Google Cloud Platform</span>
	</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_navbar" aria-controls="main_navbar" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse ml-md-auto" id="main_navbar">
		<ul class="navbar-nav ml-auto pt-4 pt-md-0 my-2 my-md-1">
			
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kubeflow-docs/docs/" ><span>Docs</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kubeflow-docs/news/" ><span>News</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/GoogleCloudPlatform/kubeflow-distribution" target="_blank" ><i class='fa-brands fa-github pr-2'></i><span>Source</span></a>
			</li>
			
			
			<li class="nav-item dropdown mt-1 mt-lg-0 mr-2">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Releases
</a>
<div class="dropdown-menu dropdown-menu-md-right dropdown-menu-lg-left" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.6-release/docs">latest</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.6-release/docs">v1.6</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.5-release/docs">v1.5</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/v1.4-release/docs">v1.4</a>
	
	<a class="dropdown-item" href="https://gkcalat.github.io/kubeflow-docs/main/docs">dev</a>
	
</div>

			</li>
			
			
		</ul>
	</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/kubeflow-docs/docs/components/pipelines/v1/tutorials/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Samples and Tutorials</h1>
<div class="lead">Samples and tutorials for Kubeflow Pipelines</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-d5325394cc7abd01614d7b4eb37cb40c">Using the Kubeflow Pipelines Benchmark Scripts</a></li>


    
  
    
    
	
<li>2: <a href="#pg-55ead7004b3cd366b5decb7eba327a38">Using the Kubeflow Pipelines SDK</a></li>


    
  
    
    
	
<li>3: <a href="#pg-47b3be3dd816e4ac0c83ba23d8a169d5">Experiment with the Kubeflow Pipelines API</a></li>


    
  
    
    
	
<li>4: <a href="#pg-d0b87844f0fd8f7f5d00526028c9c2c6">Experiment with the Pipelines Samples</a></li>


    
  
    
    
	
<li>5: <a href="#pg-5c47ad4da8e3c2a4edddeb4460d4b3ef">Run a Cloud-specific Pipelines Tutorial</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-d5325394cc7abd01614d7b4eb37cb40c">1 - Using the Kubeflow Pipelines Benchmark Scripts</h1>
    <div class="lead">How to use the Kubeflow Pipelines Benchmark Scripts</div>
	<p>This guide explains the Kubeflow Pipelines <a href="https://github.com/kubeflow/pipelines/tree/sdk/release-1.8/tools/benchmarks">benchmark scripts</a>
and demonstrates how to use them to collect basic performance data of a given
Kubeflow Pipelines instance.</p>
<h2 id="about-the-kubeflow-pipelines-benchmark-script">About the Kubeflow Pipelines benchmark script</h2>
<p>The Kubeflow Pipelines benchmark scripts simulate typical workloads and record
performance metrics, such as server latencies and pipeline run durations. To simulate a typical workload, the benchmark script uploads a pipeline
manifest file to a Kubeflow Pipelines instance as a pipeline or
a pipeline version, and creates multiple runs simultaneously.</p>
<p>You can specify the pipelines manifest used in the benchmark script, or you can
use one of the preloaded samples pipelines. For example, the preloaded samples
in Kubeflow pipelines can be used.
Moreover, it is also a good practice to use a pipeline manifest that is representative of your particular use case. For example, if your Kubeflow Pipelines cluster is mainly used for pipelines of image recognition tasks, then it would be desirable to use an image recognition pipeline in the benchmark scripts.</p>
<p>After a proper pipeline is chosen, the benchmark scripts will run it multiple
times simultaneously as mentioned before. Among all the operations that the Kubeflow
Pipelines can perform, running a pipeline is arguably the most unpredictable and
costly one. Other operations, such as creating a pipeline (version) or creating an
experiment, usually induce a predictable and moderate cost. For example, creating a
pipeline version will introduce a new row in the pipeline versions table and a new
file in minio server. The new file&rsquo;s size depends on the pipeline version&rsquo;s
manifest. If we exclude the rare case of an extremely large manifest and assume
an average sized manifest for each created pipeline version, the total cost of
creating a pipeline version grows linearly with the number of pipeline versions.
However, on the other hand, the cost of running a pipeline or a pipeline version
involves much more uncertainty and sometimes quite a high cost. A pipeline or a
pipeline version can have arbitrary components and hence running a pipeline or a
pipeline version can incur arbitrary time and space complexities. For example, a step
in a pipeline can use a customized container image which performs a super
expensive training task. In addition, the runs in a Kubeflow Pipelines instance
also consume more DB space than pipelines, pipeline versions, experiments, etc.
Therefore, in order to understand the performance and scalability pain points in
a Kubeflow Pipelines instance, it is more effective to focus on the run operation
in workloads.</p>
<h2 id="prerequisites-for-running-benchmark-scripts">Prerequisites for running benchmark scripts</h2>
<p>To run the provided benchmark scripts, you need the following:</p>
<ul>
<li>A Jupyter notebook environment with access to the Kubeflow Pipelines API on
your Kubeflow Pipelines cluster. For example, you must be able to call the
<code>CREATE</code>, <code>GET</code>, <code>DELETE</code>, and <code>LIST</code> methods of the pipeline, pipeline version,
run, job, and experiment services from your Jupyter notebook environment.</li>
<li>A Kubeflow Pipelines cluster. If you do not have a Kubeflow Pipelines
cluster, learn more about your <a href="/docs/components/pipelines/installation/overview/">options for installing Kubeflow
Pipelines</a>.</li>
<li>A pipeline manifest. For example, this guide uses the
<a href="https://storage.googleapis.com/ml-pipeline/sample-benchmark/taxi_updated_pool.yaml">taxi_updated_pool.yaml</a>
pipeline manifest file.</li>
</ul>
<p>One way of setting up everything and running a benchmark script is shown below
as an example.</p>
<h2 id="running-the-benchmark-scripts">Running the benchmark scripts</h2>
<p>Use the following instructions to run the benchmark script on your Kubeflow
Pipelines cluster.</p>
<ol>
<li>
<p>Download the <a href="https://storage.googleapis.com/ml-pipeline/sample-benchmark/run_service_api.ipynb"><code>run_service_api.ipynb</code></a>
benchmark script in your Jupyter notebook environment.</p>
</li>
<li>
<p>Open <a href="https://storage.googleapis.com/ml-pipeline/sample-benchmark/run_service_api.ipynb"><code>run_service_api.ipynb</code></a>
in the local Jupyter notebook. This benchmark script:</p>
<ol>
<li>Creates a new pipeline.</li>
<li>Uses the default pipeline version of this pipeline to create multiple runs.</li>
<li>Records the number of successful runs.</li>
<li>Records the duration of each of the successful runs.</li>
<li>Records the latency of <code>CREATE</code>, <code>GET</code>, <code>DELETE</code>.</li>
<li>Cleans up the pipeline and its default pipeline version, the experiment and the runs.</li>
</ol>
</li>
<li>
<p>In the benchmark script, enter the correct values for host,
<code>pipeline_file_url</code>, <code>num_runs</code>, <code>run_status_polling_interval_sec</code> in the
benchmark script.</p>
<ul>
<li>
<p><strong>host</strong>: The URL of the API server in your Kubeflow Pipelines cluster.</p>
</li>
<li>
<p><strong>pipeline_file_url</strong>: The URL of the pipeline manifest file to use in
your benchmark.
<a href="https://storage.googleapis.com/ml-pipeline/sample-benchmark/taxi_updated_pool.yaml"><code>taxi_updated_pool.yaml</code></a>
is used in this example. This example pipeline makes use of
<a href="https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector">nodeSelector</a>
to explicitly schedule the runs of this pipeline onto the node pool named <code>pool-1</code>. If you use the taxi_updated_pool.yaml pipeline manifest in your benchmarks, ensure that a node pool named <code>pool-1</code> exists in your cluster.</p>
<p><strong>NOTE</strong>: Do not use the value <code>https://storage.cloud.google.com/ml-pipeline/sample-benchmark/taxi_updated_pool.yaml</code>
when running your benchmarks. Addresses that start with
<code>storage.cloud.google.com</code> incur a redirect that doesn&rsquo;t work well with
Kubeflow Pipelines.</p>
</li>
<li>
<p><strong>num_runs</strong>: Specifies how many runs will be created in the benchmark script,
and is a direct indicator of the simulated workload.</p>
<p><strong>NOTE</strong>: Running the benchmark script on a cloud
service incurs charges due to the consumption of cloud resources.</p>
</li>
<li>
<p><strong>run_status_polling_interval_sec</strong>: Sets the time interval between two
adjacent pollings of the run status. When a run reaches the success status, the
run duration is recorded. Only the durations of successful runs are recorded.</p>
</li>
</ul>
</li>
<li>
<p>After the parameters are properly set, you can run the
benchmark script in the notebook.</p>
</li>
</ol>
<p>The following snapshot shows the results of running the benchmark script
<a href="https://storage.googleapis.com/ml-pipeline/sample-benchmark/run_service_api.ipynb"><code>run_service_api.ipynb</code></a>
using the <a href="https://storage.googleapis.com/ml-pipeline/sample-benchmark/taxi_updated_pool.yaml"><code>taxi_updated_pool.yaml</code></a>
pipeline manifest for 50 runs on a Kubernetes cluster with two node pools.
Each node pool has three nodes of machine type <code>n1-standard-8</code>.</p>
<p><img src="/docs/images/benchmark-snapshot-1.png"
alt="Benchmark Sample Output Plots"
class="mt-3 mb-3 border border-info rounded"></p>
<h2 id="interpreting-the-results">Interpreting the results</h2>
<p>In the above example output, there are two types of plots. One is the
distribution plot, for latency and duration measurement; the other is the count
plot, for counting succeeded and failed runs. The reading of those plots is in
general straightforward.</p>
<p>In a count plot, the x-axis represents the possible run status: success or fail;
and the y-axis shows how many runs fall into certain status respectively.</p>
<p>In a distribution plot, both histogram plot and rug plot are shown. In addition,
it is also possible to show a KDE (Kernel Density Estimate) plot. If the KDE plot is
desirable, use <code>kde=True</code> in the <code>distplot()</code> method.</p>
<h2 id="tuning-with-different-configurations">Tuning with different configurations</h2>
<p>The above example shows one performance report via running the benchmark script.
In fact, there are multiple ways of tuning the pipeline and/or the Kubernetes
clusters to acquire performance reports. The common ways are trying with</p>
<ul>
<li>
<p>Different cluster sizes/zones, different numbers of pools in a cluster,
different numbers of nodes in each pool, different node configurations (for
example, RAM and disk configuration for each node, CPU or GPU configuration for
each node)</p>
</li>
<li>
<p>Different number of runs</p>
</li>
<li>
<p>Different sizes/complexities of a pipeline, for example, the number of steps
in a pipeline</p>
</li>
<li>
<p>Different running configurations, for example, specifying the node pools for
running components or pipelines</p>
</li>
<li>
<p>Etc.</p>
</li>
</ul>
<h2 id="limitations-and-future-work">Limitations and future work</h2>
<p>When the benchmark script is tuned to generate a moderate workload, for example, 50
runs in the above example, the latency and run duration measurements can be
made properly. However, it is also interesting to see how a Kubeflow Pipelines
instance behaves or breaks under some extremely heavy workloads, or in
other words, to probe the Kubeflow Pipelines instance. The example benchmark
script can be used for that purpose as well. In that case, the measurement plots
of the benchmark script are no longer the expected output. Instead, the errors
and error logs provide information on the performance and scalability of the
Kubeflow Pipelines deployment. With them, bugs and pain points can be discovered and then fixed. Moreover, when probing the
Kubeflow Pipelines instance with extreme workloads, it will be really helpful
to add internal monitoring to the server code to track server performance.
For example, in the future, it would be desirable to use <a href="https://prometheus.io/">Prometheus</a>
to track and visualize metrics for Kubeflow Pipelines servers.</p>
<p>The internal performance monitoring inside the servers is complementary to the
performance measurement from the client-side. When the example benchmark script
measures the latencies from the client-side, the resulting measurements depend
on both the Kubeflow Pipelines instance and the network transmission. On the
other hand, the internal monitoring focuses on the actual processing cost inside
the server given certain requests. Therefore, having both the client-side
measurements and server side monitoring are useful in profiling accurately the
performance and scalability of Kubeflow Pipelines.</p>
<h2 id="contact">Contact</h2>
<p>If you run into any issues with the benchmark script and have any suggestions in
profiling the performance and scalability of Kubeflow Pipelines, <a href="https://github.com/kubeflow/pipelines/issues/new">open an
issue</a> with us.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-55ead7004b3cd366b5decb7eba327a38">2 - Using the Kubeflow Pipelines SDK</h1>
    <div class="lead">How to use the Kubeflow Pipelines SDK</div>
	<p>This guide provides examples that demonstrate how to use the Kubeflow Pipelines SDK.</p>
<h2 id="before-you-start">Before you start</h2>
<p>To follow the examples in this guide, you must have Kubeflow Pipelines SDK
version 0.2.5 or higher installed. Use the following instructions to install
the Kubeflow Pipelines SDK and check the SDK version.</p>
<ol>
<li>Install the <a href="/docs/components/pipelines/sdk/install-sdk/">Kubeflow Pipelines SDK</a></li>
<li>Run the following command to check the version of the SDK
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">pip list | grep kfp
</span></span></code></pre></div>The response should be something like this:
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kfp                      0.2.5
</span></span><span class="line"><span class="cl">kfp-server-api           0.2.5
</span></span></code></pre></div></li>
</ol>
<h2 id="examples">Examples</h2>
<p>Use the following examples to learn more about the Kubeflow Pipelines SDK.</p>
<h3 id="example-1-creating-a-pipeline-and-a-pipeline-version-using-the-sdk">Example 1: Creating a pipeline and a pipeline version using the SDK</h3>
<p>The following example demonstrates how to use the Kubeflow Pipelines SDK to
create a pipeline and a pipeline version.</p>
<p>In this example, you:</p>
<ul>
<li>Use <code>kfp.Client</code> to create a pipeline from a local file. When the pipeline
is created, a default pipeline version is automatically created.</li>
<li>Use <code>kfp.Client</code> to add a pipeline version to the pipeline that was created
in the previous step.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">kfp</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">host</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">host</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">pipeline_file_path</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">path</span> <span class="n">to</span> <span class="n">pipeline</span> <span class="n">file</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">pipeline_name</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">pipeline</span> <span class="n">name</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">pipeline_version_file_path</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">path</span> <span class="n">to</span> <span class="n">pipeline</span> <span class="n">version</span> <span class="n">file</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">pipeline_version_name</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">pipeline</span> <span class="n">version</span> <span class="n">name</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="o">=</span> <span class="n">kfp</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">pipeline_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pipeline_file_path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">pipeline</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">pipeline_uploads</span><span class="o">.</span><span class="n">upload_pipeline</span><span class="p">(</span><span class="n">pipeline_file</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">pipeline_name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">pipeline_version_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pipeline_version_file_path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">pipeline_version</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">pipeline_uploads</span><span class="o">.</span><span class="n">upload_pipeline_version</span><span class="p">(</span><span class="n">pipeline_version_file</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                                                   <span class="n">name</span><span class="o">=</span><span class="n">pipeline_version_name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                                                   <span class="n">pipelineid</span><span class="o">=</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span></span></code></pre></div><ul>
<li><strong>host</strong>: Your Kubeflow Pipelines cluster&rsquo;s host name.</li>
<li><strong>path to pipeline file</strong>: The path to the directory where your pipeline YAML
is stored.</li>
<li><strong>pipeline name</strong>: Your pipeline&rsquo;s file name.</li>
<li><strong>path to pipeline version file</strong>: The path to the directory where the new
version of your pipeline YAML is stored.</li>
<li><strong>pipeline version name</strong>: Your pipeline version&rsquo;s file name.</li>
</ul>
<p><strong>Note:</strong> Pipeline names need to be unique across your Kubeflow Pipelines
cluster. Pipeline version names need to be unique within each pipeline.</p>
<h4 id="adding-a-version-to-an-existing-pipeline-using-the-sdk">Adding a version to an existing pipeline using the SDK</h4>
<p>To add a pipeline version for an existing pipeline, you must find the
pipeline&rsquo;s ID and use it with the <code>upload_pipeline_version</code> method. To
find a pipeline&rsquo;s ID:</p>
<ol>
<li>Open the Kubeflow Pipelines UI. A list of your pipelines appears.</li>
<li>Click the <strong>name of your pipeline</strong>. The pipeline details page appears.</li>
<li>The pipeline ID is listed in the summary card, as shown below.</li>
</ol>
<p><img src="/docs/images/sdk-examples-snapshot-1.png"
alt="Pipeline ID in Summary Card"
class="mt-3 mb-3 border border-info rounded"></p>
<h3 id="example-2-listing-pipelines-with-a-filter">Example 2: Listing pipelines with a filter</h3>
<p>The following example demonstrates how to use the Kubeflow Pipelines SDK to
list pipelines with a particular pipeline name. If list_pipelines method is
called without any input parameters, it will list all the pipelines. However,
you can specify a filter as an input parameter to list pipelines with a
particular name. Given that Kubeflow Pipelines requires pipeline names to be
unique, listing pipelines with a particular name returns at most one pipeline.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">kfp</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># &#39;host&#39; is your Kubeflow Pipelines API server&#39;s host address.</span>
</span></span><span class="line"><span class="cl"><span class="n">host</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">host</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># &#39;pipeline_name&#39; is the name of the pipeline you want to list.</span>
</span></span><span class="line"><span class="cl"><span class="n">pipeline_name</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">pipeline</span> <span class="n">name</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="o">=</span> <span class="n">kfp</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># To filter on pipeline name, you can use a predicate indicating that the pipeline</span>
</span></span><span class="line"><span class="cl"><span class="c1"># name is equal to the given name.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># A predicate includes &#39;key&#39;, &#39;op&#39; and &#39;string_value&#39; fields.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># The &#39;key&#39; specifies the property you want to apply the filter to. For example,</span>
</span></span><span class="line"><span class="cl"><span class="c1"># if you want to filter on the pipeline name, then &#39;key&#39; is set to &#39;name&#39; as</span>
</span></span><span class="line"><span class="cl"><span class="c1"># shown below.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># The &#39;op&#39; specifies the operator used in a predicate. The operator can be</span>
</span></span><span class="line"><span class="cl"><span class="c1"># EQUALS, NOT_EQUALS, GREATER_THAN, etc. The complete list is at [filter.proto](https://github.com/kubeflow/pipelines/blob/sdk/release-1.8/backend/api/filter.proto#L32)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># When using the operator in a string-typed predicate, you need to use the</span>
</span></span><span class="line"><span class="cl"><span class="c1"># corresponding integer value of the enum. For Example, you can use the integer</span>
</span></span><span class="line"><span class="cl"><span class="c1"># value 1 to indicate EQUALS as shown below.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># The &#39;string_value&#39; specifies the value you want to filter with.</span>
</span></span><span class="line"><span class="cl"><span class="nb">filter</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;predicates&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;op&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;string_value&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">)}]})</span>
</span></span><span class="line"><span class="cl"><span class="n">pipelines</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">pipelines</span><span class="o">.</span><span class="n">list_pipelines</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># The pipeline with the given pipeline_name, if exists, is in pipelines.pipelines[0].</span>
</span></span></code></pre></div><h3 id="example-3-creating-a-run-using-a-pipeline-version">Example 3: Creating a run using a pipeline version</h3>
<p>Examine the run_service_api.ipynb notebook to <a href="https://github.com/kubeflow/pipelines/blob/sdk/release-1.8/tools/benchmarks/run_service_api.ipynb">learn more about creating a run using a pipeline version</a>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-47b3be3dd816e4ac0c83ba23d8a169d5">3 - Experiment with the Kubeflow Pipelines API</h1>
    <div class="lead">Get started with the Kubeflow Pipelines API</div>
	<p>This tutorial demonstrates how to use the Kubeflow Pipelines API to build, run, and manage pipelines. This guide is recommended for users who would like to learn how to manage Kubeflow Pipelines using the REST API.</p>
<h2 id="before-you-start">Before you start</h2>
<p>This tutorial assumes that you have access to the <code>ml-pipeline</code> service. If Kubeflow is not configured to use an identity provider, use port-forwarding to directly access the service.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">SVC_PORT=$(kubectl -n kubeflow get svc/ml-pipeline -o json | jq &#34;.spec.ports[0].port&#34;)
</span></span><span class="line"><span class="cl">kubectl port-forward -n kubeflow svc/ml-pipeline ${SVC_PORT}:8888
</span></span></code></pre></div><p>This tutorial assumes that the service is accessible on localhost.</p>
<p>You also need to install <a href="https://stedolan.github.io/jq/download/">jq</a>, and the <a href="/docs/components/pipelines/sdk/install-sdk/">Kubeflow Pipelines SDK</a>.</p>
<h2 id="building-and-running-a-pipeline">Building and running a pipeline</h2>
<p>Follow this guide to download, compile, and run the <a href="https://github.com/kubeflow/pipelines/blob/sdk/release-1.8/samples/core/sequential/sequential.py"><code>sequential.py</code> sample pipeline</a>. To learn how to compile and run pipelines using the Kubeflow Pipelines SDK or a Jupyter notebook, follow the <a href="/docs/components/pipelines/tutorials/build-pipeline/">experimenting with Kubeflow Pipelines samples tutorial</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">PIPELINE_URL=https://raw.githubusercontent.com/kubeflow/pipelines/master/samples/core/sequential/sequential.py
</span></span><span class="line"><span class="cl">PIPELINE_FILE=${PIPELINE_URL##*/}
</span></span><span class="line"><span class="cl">PIPELINE_NAME=${PIPELINE_FILE%.*}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">wget -O ${PIPELINE_FILE} ${PIPELINE_URL}
</span></span><span class="line"><span class="cl">dsl-compile --py ${PIPELINE_FILE} --output ${PIPELINE_NAME}.tar.gz
</span></span></code></pre></div><p>After running the commands above, you should get two files in your current directory: <code>sequential.py</code> and <code>sequential.tar.gz</code>. Run the following command to deploy the generated <code>.tar.gz</code> file as you would do using the <a href="/docs/components/pipelines/sdk/build-component/#deploy-the-pipeline">Kubeflow Pipelines UI</a>, but this time using the REST API.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">SVC=localhost:8888
</span></span><span class="line"><span class="cl">PIPELINE_ID=$(curl -F &#34;uploadfile=@${PIPELINE_NAME}.tar.gz&#34; ${SVC}/apis/v1beta1/pipelines/upload | jq -r .id)
</span></span></code></pre></div><p>If the operation was successful, you should see the pipeline in the central dashboard. You can also get the details using the <code>PIPELINE_ID</code> with the following API call.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">curl ${SVC}/apis/v1beta1/pipelines/${PIPELINE_ID} | jq
</span></span></code></pre></div><p>The response should be similar to the following one:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;id&#34;: &#34;d30d28d7-0bfc-4f0c-8a57-6844a8ec9742&#34;,
</span></span><span class="line"><span class="cl">  &#34;created_at&#34;: &#34;2020-02-20T16:15:02Z&#34;,
</span></span><span class="line"><span class="cl">  &#34;name&#34;: &#34;sequential.tar.gz&#34;,
</span></span><span class="line"><span class="cl">  &#34;parameters&#34;: [
</span></span><span class="line"><span class="cl">    {
</span></span><span class="line"><span class="cl">      &#34;name&#34;: &#34;url&#34;,
</span></span><span class="line"><span class="cl">      &#34;value&#34;: &#34;gs://ml-pipeline-playground/shakespeare1.txt&#34;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">  ],
</span></span><span class="line"><span class="cl">  &#34;default_version&#34;: {
</span></span><span class="line"><span class="cl">    &#34;id&#34;: &#34;d30d28d7-0bfc-4f0c-8a57-6844a8ec9742&#34;,
</span></span><span class="line"><span class="cl">    &#34;name&#34;: &#34;sequential.tar.gz&#34;,
</span></span><span class="line"><span class="cl">    &#34;created_at&#34;: &#34;2020-02-20T16:15:02Z&#34;,
</span></span><span class="line"><span class="cl">    &#34;parameters&#34;: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;name&#34;: &#34;url&#34;,
</span></span><span class="line"><span class="cl">        &#34;value&#34;: &#34;gs://ml-pipeline-playground/shakespeare1.txt&#34;
</span></span><span class="line"><span class="cl">      }
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">    &#34;resource_references&#34;: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;key&#34;: {
</span></span><span class="line"><span class="cl">          &#34;type&#34;: &#34;PIPELINE&#34;,
</span></span><span class="line"><span class="cl">          &#34;id&#34;: &#34;d30d28d7-0bfc-4f0c-8a57-6844a8ec9742&#34;
</span></span><span class="line"><span class="cl">        },
</span></span><span class="line"><span class="cl">        &#34;relationship&#34;: &#34;OWNER&#34;
</span></span><span class="line"><span class="cl">      }
</span></span><span class="line"><span class="cl">    ]
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></div><p>Finally, use the <code>PIPELINE_ID</code> to trigger a run of your pipeline.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">RUN_ID=$((
</span></span><span class="line"><span class="cl">curl -H &#34;Content-Type: application/json&#34; -X POST ${SVC}/apis/v1beta1/runs \
</span></span><span class="line"><span class="cl">-d @- &lt;&lt; EOF
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">   &#34;name&#34;:&#34;${PIPELINE_NAME}_run&#34;,
</span></span><span class="line"><span class="cl">   &#34;pipeline_spec&#34;:{
</span></span><span class="line"><span class="cl">      &#34;pipeline_id&#34;:&#34;${PIPELINE_ID}&#34;
</span></span><span class="line"><span class="cl">   }
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">EOF
</span></span><span class="line"><span class="cl">) | jq -r .run.id)
</span></span></code></pre></div><p>Run the following command occasionally to see how the status of your run changes. After a while, the status of your pipeline should change to <strong>Succeeded</strong>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">curl ${SVC}/apis/v1beta1/runs/${RUN_ID} | jq
</span></span></code></pre></div><p>The response should be similar to the following one:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;run&#34;: {
</span></span><span class="line"><span class="cl">    &#34;id&#34;: &#34;4ff0debd-d6d7-4681-8593-21ec002e6e0c&#34;,
</span></span><span class="line"><span class="cl">    &#34;name&#34;: &#34;sequential_run&#34;,
</span></span><span class="line"><span class="cl">    &#34;pipeline_spec&#34;: {
</span></span><span class="line"><span class="cl">      &#34;pipeline_id&#34;: &#34;d30d28d7-0bfc-4f0c-8a57-6844a8ec9742&#34;,
</span></span><span class="line"><span class="cl">      &#34;pipeline_name&#34;: &#34;sequential.tar.gz&#34;,
</span></span><span class="line"><span class="cl">      &#34;workflow_manifest&#34;: &#34;{...}&#34;
</span></span><span class="line"><span class="cl">    },
</span></span><span class="line"><span class="cl">    &#34;resource_references&#34;: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;key&#34;: {
</span></span><span class="line"><span class="cl">          &#34;type&#34;: &#34;EXPERIMENT&#34;,
</span></span><span class="line"><span class="cl">          &#34;id&#34;: &#34;27af7eee-ce0a-44ba-a44d-07142abfc83c&#34;
</span></span><span class="line"><span class="cl">        },
</span></span><span class="line"><span class="cl">        &#34;name&#34;: &#34;Default&#34;,
</span></span><span class="line"><span class="cl">        &#34;relationship&#34;: &#34;OWNER&#34;
</span></span><span class="line"><span class="cl">      }
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">    &#34;created_at&#34;: &#34;2020-02-20T16:18:58Z&#34;,
</span></span><span class="line"><span class="cl">    &#34;scheduled_at&#34;: &#34;1970-01-01T00:00:00Z&#34;,
</span></span><span class="line"><span class="cl">    &#34;finished_at&#34;: &#34;1970-01-01T00:00:00Z&#34;,
</span></span><span class="line"><span class="cl">    &#34;status&#34;: &#34;Succeeded&#34;
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  &#34;pipeline_runtime&#34;: {
</span></span><span class="line"><span class="cl">    &#34;workflow_manifest&#34;: &#34;{...}&#34;
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></div><p>Read <a href="/docs/components/pipelines/reference/api/kubeflow-pipeline-api-spec/">Kubeflow Pipelines API Reference</a> to learn more about how to use the API.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d0b87844f0fd8f7f5d00526028c9c2c6">4 - Experiment with the Pipelines Samples</h1>
    <div class="lead">Get started with the Kubeflow Pipelines notebooks and samples</div>
	<p>You can learn how to build and deploy pipelines by running the samples
provided in the Kubeflow Pipelines repository or by walking through a
Jupyter notebook that describes the process.</p>
<h2 id="compiling-the-samples-on-the-command-line">Compiling the samples on the command line</h2>
<p>This section shows you how to compile the
<a href="https://github.com/kubeflow/pipelines/tree/sdk/release-1.8/samples">Kubeflow Pipelines samples</a>
and deploy them using the Kubeflow Pipelines UI.</p>
<h3 id="before-you-start">Before you start</h3>
<p>Set up your environment:</p>
<ol>
<li>
<p>Clone or download the
<a href="https://github.com/kubeflow/pipelines/tree/sdk/release-1.8/samples">Kubeflow Pipelines samples</a>.</p>
</li>
<li>
<p>Install the <a href="/docs/components/pipelines/sdk/install-sdk/">Kubeflow Pipelines SDK</a>.</p>
</li>
<li>
<p>Activate your Python 3 environment if you haven&rsquo;t done so already:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">source activate &lt;YOUR-PYTHON-ENVIRONMENT-NAME&gt;
</span></span></code></pre></div><p>For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">source activate mlpipeline
</span></span></code></pre></div></li>
</ol>
<h3 id="choose-and-compile-a-pipeline">Choose and compile a pipeline</h3>
<p>Examine the pipeline samples that you downloaded and choose one to work with.
The
<a href="https://github.com/kubeflow/pipelines/blob/sdk/release-1.8/samples/core/sequential/sequential.py"><code>sequential.py</code> sample pipeline</a>:
is a good one to start with.</p>
<p>Each pipeline is defined as a Python program. Before you can submit a pipeline
to the Kubeflow Pipelines service, you must compile the
pipeline to an intermediate representation. The intermediate representation
takes the form of a YAML file compressed into a
<code>.tar.gz</code> file.</p>
<p>Use the <code>dsl-compile</code> command to compile the pipeline that you chose:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">dsl-compile --py <span class="o">[</span>path/to/python/file<span class="o">]</span> --output <span class="o">[</span>path/to/output/tar.gz<span class="o">]</span>
</span></span></code></pre></div><p>For example, to compile the
<a href="https://github.com/kubeflow/pipelines/blob/sdk/release-1.8/samples/core/sequential/sequential.py"><code>sequential.py</code> sample pipeline</a>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">DIR</span><span class="o">=[</span>YOUR PIPELINES REPO DIRECTORY<span class="o">]</span>/samples/core/sequential
</span></span><span class="line"><span class="cl">dsl-compile --py <span class="si">${</span><span class="nv">DIR</span><span class="si">}</span>/sequential.py --output <span class="si">${</span><span class="nv">DIR</span><span class="si">}</span>/sequential.tar.gz
</span></span></code></pre></div><h3 id="deploy-the-pipeline">Deploy the pipeline</h3>
<p>Upload the generated <code>.tar.gz</code> file through the Kubeflow Pipelines UI. See the
guide to <a href="/docs/components/pipelines/overview/quickstart">getting started with the UI</a>.</p>
<h2 id="building-a-pipeline-in-a-jupyter-notebook">Building a pipeline in a Jupyter notebook</h2>
<p>You can choose to build your pipeline in a Jupyter notebook. The
<a href="https://github.com/kubeflow/pipelines/tree/sdk/release-1.8/samples/core">sample notebooks</a>
walk you through the process.</p>
<p>It&rsquo;s easiest to use the Jupyter services that are installed in the same cluster as
the Kubeflow Pipelines system.</p>
<p>Note: The notebook samples don&rsquo;t work on Jupyter notebooks outside the same
cluster, because the Python library communicates with the Kubeflow Pipelines
system through in-cluster service names.</p>
<p>Follow these steps to start a notebook:</p>
<ol>
<li>
<p>Deploy Kubeflow:</p>
<ul>
<li>
<p>Follow the <a href="/docs/gke/deploy/">GCP deployment guide</a>, including the step
to deploy Kubeflow using the
<a href="https://deploy.kubeflow.cloud/">Kubeflow deployment UI</a>.</p>
</li>
<li>
<p>When Kubeflow is running, access the Kubeflow UI at a URL of the form
<code>https://&lt;deployment-name&gt;.endpoints.&lt;project&gt;.cloud.goog/</code>.</p>
</li>
</ul>
</li>
<li>
<p>Follow the <a href="/docs/components/notebooks/setup/">Kubeflow notebooks setup guide</a> to
create a Jupyter notebook server and open the Jupyter UI.</p>
</li>
<li>
<p>Download the sample notebooks from
<a href="https://github.com/kubeflow/pipelines/tree/sdk/release-1.8/samples/core">https://github.com/kubeflow/pipelines/tree/sdk/release-1.8/samples/core</a>.</p>
</li>
<li>
<p>Upload these notebooks from the Jupyter UI: In Jupyter, go to the tree view
and find the <strong>upload</strong> button in the top right-hand area of the screen.</p>
</li>
<li>
<p>Open one of the uploaded notebooks.</p>
</li>
<li>
<p>Make sure the notebook kernel is set to Python 3. The Python version is at
the top right-hand corner in the Jupyter notebook view.</p>
</li>
<li>
<p>Follow the instructions in the notebook.</p>
</li>
</ol>
<p>The following notebooks are available:</p>
<ul>
<li>
<p><a href="https://github.com/kubeflow/pipelines/blob/sdk/release-1.8/samples/core/tfx-oss/TFX%20Example.ipynb">KubeFlow pipeline using TFX OSS components</a>:
This notebook demonstrates how to build a machine learning pipeline based on
<a href="https://www.tensorflow.org/tfx/">TensorFlow Extended (TFX)</a> components.
The pipeline includes a TFDV step to infer the schema, a TFT preprocessor, a
TensorFlow trainer, a TFMA analyzer, and a model deployer which deploys the
trained model to <code>tf-serving</code> in the same cluster. The notebook also
demonstrates how to build a component based on Python 3 inside the notebook,
including how to build a Docker container.</p>
</li>
<li>
<p><a href="https://github.com/kubeflow/pipelines/blob/sdk/release-1.8/samples/core/lightweight_component/lightweight_component.ipynb">Lightweight Python components</a>:
This notebook demonstrates how to build simple Python components based on
Python 3 and use them in a pipeline with fast iterations. If you use this
technique, you don&rsquo;t need to build a Docker container when you build a
component. Note that the container image may not be self contained because the
source code is not built into the container.</p>
</li>
</ul>
<h2 id="next-steps">Next steps</h2>
<ul>
<li>Learn the various ways to use the <a href="/docs/components/pipelines/sdk/sdk-overview/">Kubeflow Pipelines
SDK</a>.</li>
<li>See how to
<a href="/docs/components/pipelines/sdk/build-component/">build your own pipeline components</a>.</li>
<li>Read more about
<a href="/docs/components/pipelines/sdk/lightweight-python-components/">building lightweight components</a>.</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5c47ad4da8e3c2a4edddeb4460d4b3ef">5 - Run a Cloud-specific Pipelines Tutorial</h1>
    <div class="lead">Choose the Kubeflow Pipelines tutorial to suit your deployment</div>
	

<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Opportunity to add cloud tutorials</h4>

    <b>Invitation:</b> Create a cloud-specific tutorial and link it here.
See the <a href="/docs/about/style-guide/">style guide for the Kubeflow docs</a>.

</div>

<ul>
<li><a href="/docs/azure/azureendtoend/">Pipelines End-to-end on Azure</a>: An end-to-end tutorial for Kubeflow Pipelines on Microsoft Azure.</li>
<li><a href="https://g.co/codelabs/kfp-gis">Pipelines on Google Cloud Platform</a> : This GCP tutorial walks through a Kubeflow Pipelines example that shows training a Tensor2Tensor model for GitHub issue summarization, both via the Pipelines Dashboard UI, and from a Jupyter notebook</li>
</ul>

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark pt-3 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Kubeflow mailing list" aria-label="Kubeflow mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.kubeflow.org/docs/about/community/#kubeflow-mailing-list" aria-label="Kubeflow mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://twitter.com/kubeflow" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" rel="noopener" href="https://stackoverflow.com/questions/tagged/kubeflow" aria-label="Stack Overflow">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/GoogleCloudPlatform/kubeflow-distribution" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.kubeflow.org/docs/about/community/#kubeflow-slack" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Kubeflow community calendar" aria-label="Kubeflow community calendar">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.kubeflow.org/docs/about/community/#kubeflow-community-calendars" aria-label="Kubeflow community calendar">
      <i class="fa fa-calendar"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-5 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2022 Google | Documentation Distributed under CC BY 4.0</small>
        <p><small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></small></p>
	
		<p class="mt-2"><a href="/kubeflow-docs/docs/about/">About</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="/kubeflow-docs/js/main.min.301c0110334bec1b4445867d27dc7dd69b2df859154ccf252005508bc860cc5a.js" integrity="sha256-MBwBEDNL7BtERYZ9J9x91pst&#43;FkVTM8lIAVQi8hgzFo=" crossorigin="anonymous"></script>
<script src='/kubeflow-docs/js/tabpane-persist.js'></script>

  </body>
</html>
